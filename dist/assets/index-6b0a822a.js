(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))p(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const C of y.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&p(C)}).observe(document,{childList:!0,subtree:!0});function h(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerPolicy&&(y.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?y.credentials="include":m.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function p(m){if(m.ep)return;m.ep=!0;const y=h(m);fetch(m.href,y)}})();function yn(t,e){const h=Object.create(null),p=t.split(",");for(let m=0;m<p.length;m++)h[p[m]]=!0;return e?m=>!!h[m.toLowerCase()]:m=>!!h[m]}const Ce={},Et=[],Ve=()=>{},js=()=>!1,Rs=/^on[^a-z]/,Si=t=>Rs.test(t),_n=t=>t.startsWith("onUpdate:"),Te=Object.assign,Cn=(t,e)=>{const h=t.indexOf(e);h>-1&&t.splice(h,1)},zs=Object.prototype.hasOwnProperty,ve=(t,e)=>zs.call(t,e),fe=Array.isArray,Pt=t=>xi(t)==="[object Map]",Ar=t=>xi(t)==="[object Set]",pe=t=>typeof t=="function",xe=t=>typeof t=="string",bn=t=>typeof t=="symbol",we=t=>t!==null&&typeof t=="object",kr=t=>we(t)&&pe(t.then)&&pe(t.catch),Dr=Object.prototype.toString,xi=t=>Dr.call(t),Hs=t=>xi(t).slice(8,-1),Ir=t=>xi(t)==="[object Object]",wn=t=>xe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ci=yn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ti=t=>{const e=Object.create(null);return h=>e[h]||(e[h]=t(h))},Ws=/-(\w)/g,Qe=Ti(t=>t.replace(Ws,(e,h)=>h?h.toUpperCase():"")),Xs=/\B([A-Z])/g,Lt=Ti(t=>t.replace(Xs,"-$1").toLowerCase()),Oi=Ti(t=>t.charAt(0).toUpperCase()+t.slice(1)),ji=Ti(t=>t?`on${Oi(t)}`:""),Ut=(t,e)=>!Object.is(t,e),ui=(t,e)=>{for(let h=0;h<t.length;h++)t[h](e)},mi=(t,e,h)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:h})},Qi=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Yn;const Zi=()=>Yn||(Yn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Sn(t){if(fe(t)){const e={};for(let h=0;h<t.length;h++){const p=t[h],m=xe(p)?Vs(p):Sn(p);if(m)for(const y in m)e[y]=m[y]}return e}else{if(xe(t))return t;if(we(t))return t}}const Ns=/;(?![^(]*\))/g,Ys=/:([^]+)/,Gs=/\/\*[^]*?\*\//g;function Vs(t){const e={};return t.replace(Gs,"").split(Ns).forEach(h=>{if(h){const p=h.split(Ys);p.length>1&&(e[p[0].trim()]=p[1].trim())}}),e}function Ei(t){let e="";if(xe(t))e=t;else if(fe(t))for(let h=0;h<t.length;h++){const p=Ei(t[h]);p&&(e+=p+" ")}else if(we(t))for(const h in t)t[h]&&(e+=h+" ");return e.trim()}const Us="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$s=yn(Us);function Fr(t){return!!t||t===""}const Ri=t=>xe(t)?t:t==null?"":fe(t)||we(t)&&(t.toString===Dr||!pe(t.toString))?JSON.stringify(t,Lr,2):String(t),Lr=(t,e)=>e&&e.__v_isRef?Lr(t,e.value):Pt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((h,[p,m])=>(h[`${p} =>`]=m,h),{})}:Ar(e)?{[`Set(${e.size})`]:[...e.values()]}:we(e)&&!fe(e)&&!Ir(e)?String(e):e;let Xe;class qs{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Xe,!e&&Xe&&(this.index=(Xe.scopes||(Xe.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const h=Xe;try{return Xe=this,e()}finally{Xe=h}}}on(){Xe=this}off(){Xe=this.parent}stop(e){if(this._active){let h,p;for(h=0,p=this.effects.length;h<p;h++)this.effects[h].stop();for(h=0,p=this.cleanups.length;h<p;h++)this.cleanups[h]();if(this.scopes)for(h=0,p=this.scopes.length;h<p;h++)this.scopes[h].stop(!0);if(!this.detached&&this.parent&&!e){const m=this.parent.scopes.pop();m&&m!==this&&(this.parent.scopes[this.index]=m,m.index=this.index)}this.parent=void 0,this._active=!1}}}function Ks(t,e=Xe){e&&e.active&&e.effects.push(t)}function Js(){return Xe}const xn=t=>{const e=new Set(t);return e.w=0,e.n=0,e},Br=t=>(t.w&ut)>0,jr=t=>(t.n&ut)>0,Qs=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=ut},Zs=t=>{const{deps:e}=t;if(e.length){let h=0;for(let p=0;p<e.length;p++){const m=e[p];Br(m)&&!jr(m)?m.delete(t):e[h++]=m,m.w&=~ut,m.n&=~ut}e.length=h}},en=new WeakMap;let Xt=0,ut=1;const tn=30;let Ye;const yt=Symbol(""),nn=Symbol("");class Tn{constructor(e,h=null,p){this.fn=e,this.scheduler=h,this.active=!0,this.deps=[],this.parent=void 0,Ks(this,p)}run(){if(!this.active)return this.fn();let e=Ye,h=lt;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ye,Ye=this,lt=!0,ut=1<<++Xt,Xt<=tn?Qs(this):Gn(this),this.fn()}finally{Xt<=tn&&Zs(this),ut=1<<--Xt,Ye=this.parent,lt=h,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ye===this?this.deferStop=!0:this.active&&(Gn(this),this.onStop&&this.onStop(),this.active=!1)}}function Gn(t){const{deps:e}=t;if(e.length){for(let h=0;h<e.length;h++)e[h].delete(t);e.length=0}}let lt=!0;const Rr=[];function Bt(){Rr.push(lt),lt=!1}function jt(){const t=Rr.pop();lt=t===void 0?!0:t}function Le(t,e,h){if(lt&&Ye){let p=en.get(t);p||en.set(t,p=new Map);let m=p.get(h);m||p.set(h,m=xn()),zr(m)}}function zr(t,e){let h=!1;Xt<=tn?jr(t)||(t.n|=ut,h=!Br(t)):h=!t.has(Ye),h&&(t.add(Ye),Ye.deps.push(t))}function tt(t,e,h,p,m,y){const C=en.get(t);if(!C)return;let u=[];if(e==="clear")u=[...C.values()];else if(h==="length"&&fe(t)){const i=Number(p);C.forEach((c,l)=>{(l==="length"||l>=i)&&u.push(c)})}else switch(h!==void 0&&u.push(C.get(h)),e){case"add":fe(t)?wn(h)&&u.push(C.get("length")):(u.push(C.get(yt)),Pt(t)&&u.push(C.get(nn)));break;case"delete":fe(t)||(u.push(C.get(yt)),Pt(t)&&u.push(C.get(nn)));break;case"set":Pt(t)&&u.push(C.get(yt));break}if(u.length===1)u[0]&&rn(u[0]);else{const i=[];for(const c of u)c&&i.push(...c);rn(xn(i))}}function rn(t,e){const h=fe(t)?t:[...t];for(const p of h)p.computed&&Vn(p);for(const p of h)p.computed||Vn(p)}function Vn(t,e){(t!==Ye||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const eo=yn("__proto__,__v_isRef,__isVue"),Hr=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(bn)),to=On(),io=On(!1,!0),no=On(!0),Un=ro();function ro(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...h){const p=ye(this);for(let y=0,C=this.length;y<C;y++)Le(p,"get",y+"");const m=p[e](...h);return m===-1||m===!1?p[e](...h.map(ye)):m}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...h){Bt();const p=ye(this)[e].apply(this,h);return jt(),p}}),t}function so(t){const e=ye(this);return Le(e,"has",t),e.hasOwnProperty(t)}function On(t=!1,e=!1){return function(p,m,y){if(m==="__v_isReactive")return!t;if(m==="__v_isReadonly")return t;if(m==="__v_isShallow")return e;if(m==="__v_raw"&&y===(t?e?wo:Gr:e?Yr:Nr).get(p))return p;const C=fe(p);if(!t){if(C&&ve(Un,m))return Reflect.get(Un,m,y);if(m==="hasOwnProperty")return so}const u=Reflect.get(p,m,y);return(bn(m)?Hr.has(m):eo(m))||(t||Le(p,"get",m),e)?u:Me(u)?C&&wn(m)?u:u.value:we(u)?t?Vr(u):Ie(u):u}}const oo=Wr(),ao=Wr(!0);function Wr(t=!1){return function(h,p,m,y){let C=h[p];if(Dt(C)&&Me(C)&&!Me(m))return!1;if(!t&&(!vi(m)&&!Dt(m)&&(C=ye(C),m=ye(m)),!fe(h)&&Me(C)&&!Me(m)))return C.value=m,!0;const u=fe(h)&&wn(p)?Number(p)<h.length:ve(h,p),i=Reflect.set(h,p,m,y);return h===ye(y)&&(u?Ut(m,C)&&tt(h,"set",p,m):tt(h,"add",p,m)),i}}function lo(t,e){const h=ve(t,e);t[e];const p=Reflect.deleteProperty(t,e);return p&&h&&tt(t,"delete",e,void 0),p}function co(t,e){const h=Reflect.has(t,e);return(!bn(e)||!Hr.has(e))&&Le(t,"has",e),h}function uo(t){return Le(t,"iterate",fe(t)?"length":yt),Reflect.ownKeys(t)}const Xr={get:to,set:oo,deleteProperty:lo,has:co,ownKeys:uo},fo={get:no,set(t,e){return!0},deleteProperty(t,e){return!0}},ho=Te({},Xr,{get:io,set:ao}),En=t=>t,Pi=t=>Reflect.getPrototypeOf(t);function ei(t,e,h=!1,p=!1){t=t.__v_raw;const m=ye(t),y=ye(e);h||(e!==y&&Le(m,"get",e),Le(m,"get",y));const{has:C}=Pi(m),u=p?En:h?An:$t;if(C.call(m,e))return u(t.get(e));if(C.call(m,y))return u(t.get(y));t!==m&&t.get(e)}function ti(t,e=!1){const h=this.__v_raw,p=ye(h),m=ye(t);return e||(t!==m&&Le(p,"has",t),Le(p,"has",m)),t===m?h.has(t):h.has(t)||h.has(m)}function ii(t,e=!1){return t=t.__v_raw,!e&&Le(ye(t),"iterate",yt),Reflect.get(t,"size",t)}function $n(t){t=ye(t);const e=ye(this);return Pi(e).has.call(e,t)||(e.add(t),tt(e,"add",t,t)),this}function qn(t,e){e=ye(e);const h=ye(this),{has:p,get:m}=Pi(h);let y=p.call(h,t);y||(t=ye(t),y=p.call(h,t));const C=m.call(h,t);return h.set(t,e),y?Ut(e,C)&&tt(h,"set",t,e):tt(h,"add",t,e),this}function Kn(t){const e=ye(this),{has:h,get:p}=Pi(e);let m=h.call(e,t);m||(t=ye(t),m=h.call(e,t)),p&&p.call(e,t);const y=e.delete(t);return m&&tt(e,"delete",t,void 0),y}function Jn(){const t=ye(this),e=t.size!==0,h=t.clear();return e&&tt(t,"clear",void 0,void 0),h}function ni(t,e){return function(p,m){const y=this,C=y.__v_raw,u=ye(C),i=e?En:t?An:$t;return!t&&Le(u,"iterate",yt),C.forEach((c,l)=>p.call(m,i(c),i(l),y))}}function ri(t,e,h){return function(...p){const m=this.__v_raw,y=ye(m),C=Pt(y),u=t==="entries"||t===Symbol.iterator&&C,i=t==="keys"&&C,c=m[t](...p),l=h?En:e?An:$t;return!e&&Le(y,"iterate",i?nn:yt),{next(){const{value:r,done:s}=c.next();return s?{value:r,done:s}:{value:u?[l(r[0]),l(r[1])]:l(r),done:s}},[Symbol.iterator](){return this}}}}function nt(t){return function(...e){return t==="delete"?!1:this}}function po(){const t={get(y){return ei(this,y)},get size(){return ii(this)},has:ti,add:$n,set:qn,delete:Kn,clear:Jn,forEach:ni(!1,!1)},e={get(y){return ei(this,y,!1,!0)},get size(){return ii(this)},has:ti,add:$n,set:qn,delete:Kn,clear:Jn,forEach:ni(!1,!0)},h={get(y){return ei(this,y,!0)},get size(){return ii(this,!0)},has(y){return ti.call(this,y,!0)},add:nt("add"),set:nt("set"),delete:nt("delete"),clear:nt("clear"),forEach:ni(!0,!1)},p={get(y){return ei(this,y,!0,!0)},get size(){return ii(this,!0)},has(y){return ti.call(this,y,!0)},add:nt("add"),set:nt("set"),delete:nt("delete"),clear:nt("clear"),forEach:ni(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=ri(y,!1,!1),h[y]=ri(y,!0,!1),e[y]=ri(y,!1,!0),p[y]=ri(y,!0,!0)}),[t,h,e,p]}const[go,mo,vo,yo]=po();function Pn(t,e){const h=e?t?yo:vo:t?mo:go;return(p,m,y)=>m==="__v_isReactive"?!t:m==="__v_isReadonly"?t:m==="__v_raw"?p:Reflect.get(ve(h,m)&&m in p?h:p,m,y)}const _o={get:Pn(!1,!1)},Co={get:Pn(!1,!0)},bo={get:Pn(!0,!1)},Nr=new WeakMap,Yr=new WeakMap,Gr=new WeakMap,wo=new WeakMap;function So(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xo(t){return t.__v_skip||!Object.isExtensible(t)?0:So(Hs(t))}function Ie(t){return Dt(t)?t:Mn(t,!1,Xr,_o,Nr)}function To(t){return Mn(t,!1,ho,Co,Yr)}function Vr(t){return Mn(t,!0,fo,bo,Gr)}function Mn(t,e,h,p,m){if(!we(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const y=m.get(t);if(y)return y;const C=xo(t);if(C===0)return t;const u=new Proxy(t,C===2?p:h);return m.set(t,u),u}function Mt(t){return Dt(t)?Mt(t.__v_raw):!!(t&&t.__v_isReactive)}function Dt(t){return!!(t&&t.__v_isReadonly)}function vi(t){return!!(t&&t.__v_isShallow)}function Ur(t){return Mt(t)||Dt(t)}function ye(t){const e=t&&t.__v_raw;return e?ye(e):t}function $r(t){return mi(t,"__v_skip",!0),t}const $t=t=>we(t)?Ie(t):t,An=t=>we(t)?Vr(t):t;function qr(t){lt&&Ye&&(t=ye(t),zr(t.dep||(t.dep=xn())))}function Kr(t,e){t=ye(t);const h=t.dep;h&&rn(h)}function Me(t){return!!(t&&t.__v_isRef===!0)}function be(t){return Oo(t,!1)}function Oo(t,e){return Me(t)?t:new Eo(t,e)}class Eo{constructor(e,h){this.__v_isShallow=h,this.dep=void 0,this.__v_isRef=!0,this._rawValue=h?e:ye(e),this._value=h?e:$t(e)}get value(){return qr(this),this._value}set value(e){const h=this.__v_isShallow||vi(e)||Dt(e);e=h?e:ye(e),Ut(e,this._rawValue)&&(this._rawValue=e,this._value=h?e:$t(e),Kr(this))}}function Po(t){return Me(t)?t.value:t}const Mo={get:(t,e,h)=>Po(Reflect.get(t,e,h)),set:(t,e,h,p)=>{const m=t[e];return Me(m)&&!Me(h)?(m.value=h,!0):Reflect.set(t,e,h,p)}};function Jr(t){return Mt(t)?t:new Proxy(t,Mo)}class Ao{constructor(e,h,p,m){this._setter=h,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Tn(e,()=>{this._dirty||(this._dirty=!0,Kr(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!m,this.__v_isReadonly=p}get value(){const e=ye(this);return qr(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function ko(t,e,h=!1){let p,m;const y=pe(t);return y?(p=t,m=Ve):(p=t.get,m=t.set),new Ao(p,m,y||!m,h)}function ct(t,e,h,p){let m;try{m=p?t(...p):t()}catch(y){Mi(y,e,h)}return m}function Ue(t,e,h,p){if(pe(t)){const y=ct(t,e,h,p);return y&&kr(y)&&y.catch(C=>{Mi(C,e,h)}),y}const m=[];for(let y=0;y<t.length;y++)m.push(Ue(t[y],e,h,p));return m}function Mi(t,e,h,p=!0){const m=e?e.vnode:null;if(e){let y=e.parent;const C=e.proxy,u=h;for(;y;){const c=y.ec;if(c){for(let l=0;l<c.length;l++)if(c[l](t,C,u)===!1)return}y=y.parent}const i=e.appContext.config.errorHandler;if(i){ct(i,null,10,[t,C,u]);return}}Do(t,h,m,p)}function Do(t,e,h,p=!0){console.error(t)}let qt=!1,sn=!1;const Pe=[];let Ke=0;const At=[];let et=null,pt=0;const Qr=Promise.resolve();let kn=null;function Zr(t){const e=kn||Qr;return t?e.then(this?t.bind(this):t):e}function Io(t){let e=Ke+1,h=Pe.length;for(;e<h;){const p=e+h>>>1;Kt(Pe[p])<t?e=p+1:h=p}return e}function Dn(t){(!Pe.length||!Pe.includes(t,qt&&t.allowRecurse?Ke+1:Ke))&&(t.id==null?Pe.push(t):Pe.splice(Io(t.id),0,t),es())}function es(){!qt&&!sn&&(sn=!0,kn=Qr.then(is))}function Fo(t){const e=Pe.indexOf(t);e>Ke&&Pe.splice(e,1)}function Lo(t){fe(t)?At.push(...t):(!et||!et.includes(t,t.allowRecurse?pt+1:pt))&&At.push(t),es()}function Qn(t,e=qt?Ke+1:0){for(;e<Pe.length;e++){const h=Pe[e];h&&h.pre&&(Pe.splice(e,1),e--,h())}}function ts(t){if(At.length){const e=[...new Set(At)];if(At.length=0,et){et.push(...e);return}for(et=e,et.sort((h,p)=>Kt(h)-Kt(p)),pt=0;pt<et.length;pt++)et[pt]();et=null,pt=0}}const Kt=t=>t.id==null?1/0:t.id,Bo=(t,e)=>{const h=Kt(t)-Kt(e);if(h===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return h};function is(t){sn=!1,qt=!0,Pe.sort(Bo);const e=Ve;try{for(Ke=0;Ke<Pe.length;Ke++){const h=Pe[Ke];h&&h.active!==!1&&ct(h,null,14)}}finally{Ke=0,Pe.length=0,ts(),qt=!1,kn=null,(Pe.length||At.length)&&is()}}function jo(t,e,...h){if(t.isUnmounted)return;const p=t.vnode.props||Ce;let m=h;const y=e.startsWith("update:"),C=y&&e.slice(7);if(C&&C in p){const l=`${C==="modelValue"?"model":C}Modifiers`,{number:r,trim:s}=p[l]||Ce;s&&(m=h.map(n=>xe(n)?n.trim():n)),r&&(m=h.map(Qi))}let u,i=p[u=ji(e)]||p[u=ji(Qe(e))];!i&&y&&(i=p[u=ji(Lt(e))]),i&&Ue(i,t,6,m);const c=p[u+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,Ue(c,t,6,m)}}function ns(t,e,h=!1){const p=e.emitsCache,m=p.get(t);if(m!==void 0)return m;const y=t.emits;let C={},u=!1;if(!pe(t)){const i=c=>{const l=ns(c,e,!0);l&&(u=!0,Te(C,l))};!h&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return!y&&!u?(we(t)&&p.set(t,null),null):(fe(y)?y.forEach(i=>C[i]=null):Te(C,y),we(t)&&p.set(t,C),C)}function Ai(t,e){return!t||!Si(e)?!1:(e=e.slice(2).replace(/Once$/,""),ve(t,e[0].toLowerCase()+e.slice(1))||ve(t,Lt(e))||ve(t,e))}let We=null,rs=null;function yi(t){const e=We;return We=t,rs=t&&t.type.__scopeId||null,e}function on(t,e=We,h){if(!e||t._n)return t;const p=(...m)=>{p._d&&cr(-1);const y=yi(e);let C;try{C=t(...m)}finally{yi(y),p._d&&cr(1)}return C};return p._n=!0,p._c=!0,p._d=!0,p}function zi(t){const{type:e,vnode:h,proxy:p,withProxy:m,props:y,propsOptions:[C],slots:u,attrs:i,emit:c,render:l,renderCache:r,data:s,setupState:n,ctx:a,inheritAttrs:f}=t;let o,d;const g=yi(t);try{if(h.shapeFlag&4){const _=m||p;o=qe(l.call(_,_,r,y,n,s,a)),d=i}else{const _=e;o=qe(_.length>1?_(y,{attrs:i,slots:u,emit:c}):_(y,null)),d=e.props?i:Ro(i)}}catch(_){Vt.length=0,Mi(_,t,1),o=_e(Ct)}let v=o;if(d&&f!==!1){const _=Object.keys(d),{shapeFlag:b}=v;_.length&&b&7&&(C&&_.some(_n)&&(d=zo(d,C)),v=It(v,d))}return h.dirs&&(v=It(v),v.dirs=v.dirs?v.dirs.concat(h.dirs):h.dirs),h.transition&&(v.transition=h.transition),o=v,yi(g),o}const Ro=t=>{let e;for(const h in t)(h==="class"||h==="style"||Si(h))&&((e||(e={}))[h]=t[h]);return e},zo=(t,e)=>{const h={};for(const p in t)(!_n(p)||!(p.slice(9)in e))&&(h[p]=t[p]);return h};function Ho(t,e,h){const{props:p,children:m,component:y}=t,{props:C,children:u,patchFlag:i}=e,c=y.emitsOptions;if(e.dirs||e.transition)return!0;if(h&&i>=0){if(i&1024)return!0;if(i&16)return p?Zn(p,C,c):!!C;if(i&8){const l=e.dynamicProps;for(let r=0;r<l.length;r++){const s=l[r];if(C[s]!==p[s]&&!Ai(c,s))return!0}}}else return(m||u)&&(!u||!u.$stable)?!0:p===C?!1:p?C?Zn(p,C,c):!0:!!C;return!1}function Zn(t,e,h){const p=Object.keys(e);if(p.length!==Object.keys(t).length)return!0;for(let m=0;m<p.length;m++){const y=p[m];if(e[y]!==t[y]&&!Ai(h,y))return!0}return!1}function Wo({vnode:t,parent:e},h){for(;e&&e.subTree===t;)(t=e.vnode).el=h,e=e.parent}const Xo=t=>t.__isSuspense;function No(t,e){e&&e.pendingBranch?fe(t)?e.effects.push(...t):e.effects.push(t):Lo(t)}const si={};function fi(t,e,h){return ss(t,e,h)}function ss(t,e,{immediate:h,deep:p,flush:m,onTrack:y,onTrigger:C}=Ce){var u;const i=Js()===((u=Ee)==null?void 0:u.scope)?Ee:null;let c,l=!1,r=!1;if(Me(t)?(c=()=>t.value,l=vi(t)):Mt(t)?(c=()=>t,p=!0):fe(t)?(r=!0,l=t.some(_=>Mt(_)||vi(_)),c=()=>t.map(_=>{if(Me(_))return _.value;if(Mt(_))return mt(_);if(pe(_))return ct(_,i,2)})):pe(t)?e?c=()=>ct(t,i,2):c=()=>{if(!(i&&i.isUnmounted))return s&&s(),Ue(t,i,3,[n])}:c=Ve,e&&p){const _=c;c=()=>mt(_())}let s,n=_=>{s=g.onStop=()=>{ct(_,i,4)}},a;if(Qt)if(n=Ve,e?h&&Ue(e,i,3,[c(),r?[]:void 0,n]):c(),m==="sync"){const _=Ia();a=_.__watcherHandles||(_.__watcherHandles=[])}else return Ve;let f=r?new Array(t.length).fill(si):si;const o=()=>{if(g.active)if(e){const _=g.run();(p||l||(r?_.some((b,w)=>Ut(b,f[w])):Ut(_,f)))&&(s&&s(),Ue(e,i,3,[_,f===si?void 0:r&&f[0]===si?[]:f,n]),f=_)}else g.run()};o.allowRecurse=!!e;let d;m==="sync"?d=o:m==="post"?d=()=>Fe(o,i&&i.suspense):(o.pre=!0,i&&(o.id=i.uid),d=()=>Dn(o));const g=new Tn(c,d);e?h?o():f=g.run():m==="post"?Fe(g.run.bind(g),i&&i.suspense):g.run();const v=()=>{g.stop(),i&&i.scope&&Cn(i.scope.effects,g)};return a&&a.push(v),v}function Yo(t,e,h){const p=this.proxy,m=xe(t)?t.includes(".")?os(p,t):()=>p[t]:t.bind(p,p);let y;pe(e)?y=e:(y=e.handler,h=e);const C=Ee;Ft(this);const u=ss(m,y.bind(p),h);return C?Ft(C):_t(),u}function os(t,e){const h=e.split(".");return()=>{let p=t;for(let m=0;m<h.length&&p;m++)p=p[h[m]];return p}}function mt(t,e){if(!we(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),Me(t))mt(t.value,e);else if(fe(t))for(let h=0;h<t.length;h++)mt(t[h],e);else if(Ar(t)||Pt(t))t.forEach(h=>{mt(h,e)});else if(Ir(t))for(const h in t)mt(t[h],e);return t}function vt(t,e){const h=We;if(h===null)return t;const p=Li(h)||h.proxy,m=t.dirs||(t.dirs=[]);for(let y=0;y<e.length;y++){let[C,u,i,c=Ce]=e[y];C&&(pe(C)&&(C={mounted:C,updated:C}),C.deep&&mt(u),m.push({dir:C,instance:p,value:u,oldValue:void 0,arg:i,modifiers:c}))}return t}function ht(t,e,h,p){const m=t.dirs,y=e&&e.dirs;for(let C=0;C<m.length;C++){const u=m[C];y&&(u.oldValue=y[C].value);let i=u.dir[p];i&&(Bt(),Ue(i,h,8,[t.el,u,t,e]),jt())}}function wt(t,e){return pe(t)?(()=>Te({name:t.name},e,{setup:t}))():t}const hi=t=>!!t.type.__asyncLoader,as=t=>t.type.__isKeepAlive;function Go(t,e){ls(t,"a",e)}function Vo(t,e){ls(t,"da",e)}function ls(t,e,h=Ee){const p=t.__wdc||(t.__wdc=()=>{let m=h;for(;m;){if(m.isDeactivated)return;m=m.parent}return t()});if(ki(e,p,h),h){let m=h.parent;for(;m&&m.parent;)as(m.parent.vnode)&&Uo(p,e,h,m),m=m.parent}}function Uo(t,e,h,p){const m=ki(e,t,p,!0);us(()=>{Cn(p[e],m)},h)}function ki(t,e,h=Ee,p=!1){if(h){const m=h[t]||(h[t]=[]),y=e.__weh||(e.__weh=(...C)=>{if(h.isUnmounted)return;Bt(),Ft(h);const u=Ue(e,h,t,C);return _t(),jt(),u});return p?m.unshift(y):m.push(y),y}}const it=t=>(e,h=Ee)=>(!Qt||t==="sp")&&ki(t,(...p)=>e(...p),h),$o=it("bm"),Di=it("m"),cs=it("bu"),In=it("u"),Fn=it("bum"),us=it("um"),qo=it("sp"),Ko=it("rtg"),Jo=it("rtc");function Qo(t,e=Ee){ki("ec",t,e)}const fs="components";function Oe(t,e){return ea(fs,t,!0,e)||t}const Zo=Symbol.for("v-ndc");function ea(t,e,h=!0,p=!1){const m=We||Ee;if(m){const y=m.type;if(t===fs){const u=Aa(y,!1);if(u&&(u===e||u===Qe(e)||u===Oi(Qe(e))))return y}const C=er(m[t]||y[t],e)||er(m.appContext[t],e);return!C&&p?y:C}}function er(t,e){return t&&(t[e]||t[Qe(e)]||t[Oi(Qe(e))])}function kt(t,e,h,p){let m;const y=h&&h[p];if(fe(t)||xe(t)){m=new Array(t.length);for(let C=0,u=t.length;C<u;C++)m[C]=e(t[C],C,void 0,y&&y[C])}else if(typeof t=="number"){m=new Array(t);for(let C=0;C<t;C++)m[C]=e(C+1,C,void 0,y&&y[C])}else if(we(t))if(t[Symbol.iterator])m=Array.from(t,(C,u)=>e(C,u,void 0,y&&y[u]));else{const C=Object.keys(t);m=new Array(C.length);for(let u=0,i=C.length;u<i;u++){const c=C[u];m[u]=e(t[c],c,u,y&&y[u])}}else m=[];return h&&(h[p]=m),m}const an=t=>t?Ss(t)?Li(t)||t.proxy:an(t.parent):null,Gt=Te(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>an(t.parent),$root:t=>an(t.root),$emit:t=>t.emit,$options:t=>Ln(t),$forceUpdate:t=>t.f||(t.f=()=>Dn(t.update)),$nextTick:t=>t.n||(t.n=Zr.bind(t.proxy)),$watch:t=>Yo.bind(t)}),Hi=(t,e)=>t!==Ce&&!t.__isScriptSetup&&ve(t,e),ta={get({_:t},e){const{ctx:h,setupState:p,data:m,props:y,accessCache:C,type:u,appContext:i}=t;let c;if(e[0]!=="$"){const n=C[e];if(n!==void 0)switch(n){case 1:return p[e];case 2:return m[e];case 4:return h[e];case 3:return y[e]}else{if(Hi(p,e))return C[e]=1,p[e];if(m!==Ce&&ve(m,e))return C[e]=2,m[e];if((c=t.propsOptions[0])&&ve(c,e))return C[e]=3,y[e];if(h!==Ce&&ve(h,e))return C[e]=4,h[e];ln&&(C[e]=0)}}const l=Gt[e];let r,s;if(l)return e==="$attrs"&&Le(t,"get",e),l(t);if((r=u.__cssModules)&&(r=r[e]))return r;if(h!==Ce&&ve(h,e))return C[e]=4,h[e];if(s=i.config.globalProperties,ve(s,e))return s[e]},set({_:t},e,h){const{data:p,setupState:m,ctx:y}=t;return Hi(m,e)?(m[e]=h,!0):p!==Ce&&ve(p,e)?(p[e]=h,!0):ve(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(y[e]=h,!0)},has({_:{data:t,setupState:e,accessCache:h,ctx:p,appContext:m,propsOptions:y}},C){let u;return!!h[C]||t!==Ce&&ve(t,C)||Hi(e,C)||(u=y[0])&&ve(u,C)||ve(p,C)||ve(Gt,C)||ve(m.config.globalProperties,C)},defineProperty(t,e,h){return h.get!=null?t._.accessCache[e]=0:ve(h,"value")&&this.set(t,e,h.value,null),Reflect.defineProperty(t,e,h)}};function tr(t){return fe(t)?t.reduce((e,h)=>(e[h]=null,e),{}):t}let ln=!0;function ia(t){const e=Ln(t),h=t.proxy,p=t.ctx;ln=!1,e.beforeCreate&&ir(e.beforeCreate,t,"bc");const{data:m,computed:y,methods:C,watch:u,provide:i,inject:c,created:l,beforeMount:r,mounted:s,beforeUpdate:n,updated:a,activated:f,deactivated:o,beforeDestroy:d,beforeUnmount:g,destroyed:v,unmounted:_,render:b,renderTracked:w,renderTriggered:x,errorCaptured:A,serverPrefetch:M,expose:X,inheritAttrs:z,components:$,directives:q,filters:K}=e;if(c&&na(c,p,null),C)for(const oe in C){const se=C[oe];pe(se)&&(p[oe]=se.bind(h))}if(m){const oe=m.call(h,h);we(oe)&&(t.data=Ie(oe))}if(ln=!0,y)for(const oe in y){const se=y[oe],S=pe(se)?se.bind(h,h):pe(se.get)?se.get.bind(h,h):Ve,F=!pe(se)&&pe(se.set)?se.set.bind(h):Ve,I=Bi({get:S,set:F});Object.defineProperty(p,oe,{enumerable:!0,configurable:!0,get:()=>I.value,set:D=>I.value=D})}if(u)for(const oe in u)hs(u[oe],p,h,oe);if(i){const oe=pe(i)?i.call(h):i;Reflect.ownKeys(oe).forEach(se=>{Bn(se,oe[se])})}l&&ir(l,t,"c");function re(oe,se){fe(se)?se.forEach(S=>oe(S.bind(h))):se&&oe(se.bind(h))}if(re($o,r),re(Di,s),re(cs,n),re(In,a),re(Go,f),re(Vo,o),re(Qo,A),re(Jo,w),re(Ko,x),re(Fn,g),re(us,_),re(qo,M),fe(X))if(X.length){const oe=t.exposed||(t.exposed={});X.forEach(se=>{Object.defineProperty(oe,se,{get:()=>h[se],set:S=>h[se]=S})})}else t.exposed||(t.exposed={});b&&t.render===Ve&&(t.render=b),z!=null&&(t.inheritAttrs=z),$&&(t.components=$),q&&(t.directives=q)}function na(t,e,h=Ve){fe(t)&&(t=cn(t));for(const p in t){const m=t[p];let y;we(m)?"default"in m?y=di(m.from||p,m.default,!0):y=di(m.from||p):y=di(m),Me(y)?Object.defineProperty(e,p,{enumerable:!0,configurable:!0,get:()=>y.value,set:C=>y.value=C}):e[p]=y}}function ir(t,e,h){Ue(fe(t)?t.map(p=>p.bind(e.proxy)):t.bind(e.proxy),e,h)}function hs(t,e,h,p){const m=p.includes(".")?os(h,p):()=>h[p];if(xe(t)){const y=e[t];pe(y)&&fi(m,y)}else if(pe(t))fi(m,t.bind(h));else if(we(t))if(fe(t))t.forEach(y=>hs(y,e,h,p));else{const y=pe(t.handler)?t.handler.bind(h):e[t.handler];pe(y)&&fi(m,y,t)}}function Ln(t){const e=t.type,{mixins:h,extends:p}=e,{mixins:m,optionsCache:y,config:{optionMergeStrategies:C}}=t.appContext,u=y.get(e);let i;return u?i=u:!m.length&&!h&&!p?i=e:(i={},m.length&&m.forEach(c=>_i(i,c,C,!0)),_i(i,e,C)),we(e)&&y.set(e,i),i}function _i(t,e,h,p=!1){const{mixins:m,extends:y}=e;y&&_i(t,y,h,!0),m&&m.forEach(C=>_i(t,C,h,!0));for(const C in e)if(!(p&&C==="expose")){const u=ra[C]||h&&h[C];t[C]=u?u(t[C],e[C]):e[C]}return t}const ra={data:nr,props:rr,emits:rr,methods:Nt,computed:Nt,beforeCreate:ke,created:ke,beforeMount:ke,mounted:ke,beforeUpdate:ke,updated:ke,beforeDestroy:ke,beforeUnmount:ke,destroyed:ke,unmounted:ke,activated:ke,deactivated:ke,errorCaptured:ke,serverPrefetch:ke,components:Nt,directives:Nt,watch:oa,provide:nr,inject:sa};function nr(t,e){return e?t?function(){return Te(pe(t)?t.call(this,this):t,pe(e)?e.call(this,this):e)}:e:t}function sa(t,e){return Nt(cn(t),cn(e))}function cn(t){if(fe(t)){const e={};for(let h=0;h<t.length;h++)e[t[h]]=t[h];return e}return t}function ke(t,e){return t?[...new Set([].concat(t,e))]:e}function Nt(t,e){return t?Te(Object.create(null),t,e):e}function rr(t,e){return t?fe(t)&&fe(e)?[...new Set([...t,...e])]:Te(Object.create(null),tr(t),tr(e??{})):e}function oa(t,e){if(!t)return e;if(!e)return t;const h=Te(Object.create(null),t);for(const p in e)h[p]=ke(t[p],e[p]);return h}function ds(){return{app:null,config:{isNativeTag:js,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let aa=0;function la(t,e){return function(p,m=null){pe(p)||(p=Te({},p)),m!=null&&!we(m)&&(m=null);const y=ds(),C=new Set;let u=!1;const i=y.app={_uid:aa++,_component:p,_props:m,_container:null,_context:y,_instance:null,version:Fa,get config(){return y.config},set config(c){},use(c,...l){return C.has(c)||(c&&pe(c.install)?(C.add(c),c.install(i,...l)):pe(c)&&(C.add(c),c(i,...l))),i},mixin(c){return y.mixins.includes(c)||y.mixins.push(c),i},component(c,l){return l?(y.components[c]=l,i):y.components[c]},directive(c,l){return l?(y.directives[c]=l,i):y.directives[c]},mount(c,l,r){if(!u){const s=_e(p,m);return s.appContext=y,l&&e?e(s,c):t(s,c,r),u=!0,i._container=c,c.__vue_app__=i,Li(s.component)||s.component.proxy}},unmount(){u&&(t(null,i._container),delete i._container.__vue_app__)},provide(c,l){return y.provides[c]=l,i},runWithContext(c){Ci=i;try{return c()}finally{Ci=null}}};return i}}let Ci=null;function Bn(t,e){if(Ee){let h=Ee.provides;const p=Ee.parent&&Ee.parent.provides;p===h&&(h=Ee.provides=Object.create(p)),h[t]=e}}function di(t,e,h=!1){const p=Ee||We;if(p||Ci){const m=p?p.parent==null?p.vnode.appContext&&p.vnode.appContext.provides:p.parent.provides:Ci._context.provides;if(m&&t in m)return m[t];if(arguments.length>1)return h&&pe(e)?e.call(p&&p.proxy):e}}function ca(t,e,h,p=!1){const m={},y={};mi(y,Fi,1),t.propsDefaults=Object.create(null),ps(t,e,m,y);for(const C in t.propsOptions[0])C in m||(m[C]=void 0);h?t.props=p?m:To(m):t.type.props?t.props=m:t.props=y,t.attrs=y}function ua(t,e,h,p){const{props:m,attrs:y,vnode:{patchFlag:C}}=t,u=ye(m),[i]=t.propsOptions;let c=!1;if((p||C>0)&&!(C&16)){if(C&8){const l=t.vnode.dynamicProps;for(let r=0;r<l.length;r++){let s=l[r];if(Ai(t.emitsOptions,s))continue;const n=e[s];if(i)if(ve(y,s))n!==y[s]&&(y[s]=n,c=!0);else{const a=Qe(s);m[a]=un(i,u,a,n,t,!1)}else n!==y[s]&&(y[s]=n,c=!0)}}}else{ps(t,e,m,y)&&(c=!0);let l;for(const r in u)(!e||!ve(e,r)&&((l=Lt(r))===r||!ve(e,l)))&&(i?h&&(h[r]!==void 0||h[l]!==void 0)&&(m[r]=un(i,u,r,void 0,t,!0)):delete m[r]);if(y!==u)for(const r in y)(!e||!ve(e,r))&&(delete y[r],c=!0)}c&&tt(t,"set","$attrs")}function ps(t,e,h,p){const[m,y]=t.propsOptions;let C=!1,u;if(e)for(let i in e){if(ci(i))continue;const c=e[i];let l;m&&ve(m,l=Qe(i))?!y||!y.includes(l)?h[l]=c:(u||(u={}))[l]=c:Ai(t.emitsOptions,i)||(!(i in p)||c!==p[i])&&(p[i]=c,C=!0)}if(y){const i=ye(h),c=u||Ce;for(let l=0;l<y.length;l++){const r=y[l];h[r]=un(m,i,r,c[r],t,!ve(c,r))}}return C}function un(t,e,h,p,m,y){const C=t[h];if(C!=null){const u=ve(C,"default");if(u&&p===void 0){const i=C.default;if(C.type!==Function&&!C.skipFactory&&pe(i)){const{propsDefaults:c}=m;h in c?p=c[h]:(Ft(m),p=c[h]=i.call(null,e),_t())}else p=i}C[0]&&(y&&!u?p=!1:C[1]&&(p===""||p===Lt(h))&&(p=!0))}return p}function gs(t,e,h=!1){const p=e.propsCache,m=p.get(t);if(m)return m;const y=t.props,C={},u=[];let i=!1;if(!pe(t)){const l=r=>{i=!0;const[s,n]=gs(r,e,!0);Te(C,s),n&&u.push(...n)};!h&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}if(!y&&!i)return we(t)&&p.set(t,Et),Et;if(fe(y))for(let l=0;l<y.length;l++){const r=Qe(y[l]);sr(r)&&(C[r]=Ce)}else if(y)for(const l in y){const r=Qe(l);if(sr(r)){const s=y[l],n=C[r]=fe(s)||pe(s)?{type:s}:Te({},s);if(n){const a=lr(Boolean,n.type),f=lr(String,n.type);n[0]=a>-1,n[1]=f<0||a<f,(a>-1||ve(n,"default"))&&u.push(r)}}}const c=[C,u];return we(t)&&p.set(t,c),c}function sr(t){return t[0]!=="$"}function or(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function ar(t,e){return or(t)===or(e)}function lr(t,e){return fe(e)?e.findIndex(h=>ar(h,t)):pe(e)&&ar(e,t)?0:-1}const ms=t=>t[0]==="_"||t==="$stable",jn=t=>fe(t)?t.map(qe):[qe(t)],fa=(t,e,h)=>{if(e._n)return e;const p=on((...m)=>jn(e(...m)),h);return p._c=!1,p},vs=(t,e,h)=>{const p=t._ctx;for(const m in t){if(ms(m))continue;const y=t[m];if(pe(y))e[m]=fa(m,y,p);else if(y!=null){const C=jn(y);e[m]=()=>C}}},ys=(t,e)=>{const h=jn(e);t.slots.default=()=>h},ha=(t,e)=>{if(t.vnode.shapeFlag&32){const h=e._;h?(t.slots=ye(e),mi(e,"_",h)):vs(e,t.slots={})}else t.slots={},e&&ys(t,e);mi(t.slots,Fi,1)},da=(t,e,h)=>{const{vnode:p,slots:m}=t;let y=!0,C=Ce;if(p.shapeFlag&32){const u=e._;u?h&&u===1?y=!1:(Te(m,e),!h&&u===1&&delete m._):(y=!e.$stable,vs(e,m)),C=e}else e&&(ys(t,e),C={default:1});if(y)for(const u in m)!ms(u)&&!(u in C)&&delete m[u]};function fn(t,e,h,p,m=!1){if(fe(t)){t.forEach((s,n)=>fn(s,e&&(fe(e)?e[n]:e),h,p,m));return}if(hi(p)&&!m)return;const y=p.shapeFlag&4?Li(p.component)||p.component.proxy:p.el,C=m?null:y,{i:u,r:i}=t,c=e&&e.r,l=u.refs===Ce?u.refs={}:u.refs,r=u.setupState;if(c!=null&&c!==i&&(xe(c)?(l[c]=null,ve(r,c)&&(r[c]=null)):Me(c)&&(c.value=null)),pe(i))ct(i,u,12,[C,l]);else{const s=xe(i),n=Me(i);if(s||n){const a=()=>{if(t.f){const f=s?ve(r,i)?r[i]:l[i]:i.value;m?fe(f)&&Cn(f,y):fe(f)?f.includes(y)||f.push(y):s?(l[i]=[y],ve(r,i)&&(r[i]=l[i])):(i.value=[y],t.k&&(l[t.k]=i.value))}else s?(l[i]=C,ve(r,i)&&(r[i]=C)):n&&(i.value=C,t.k&&(l[t.k]=C))};C?(a.id=-1,Fe(a,h)):a()}}}const Fe=No;function pa(t){return ga(t)}function ga(t,e){const h=Zi();h.__VUE__=!0;const{insert:p,remove:m,patchProp:y,createElement:C,createText:u,createComment:i,setText:c,setElementText:l,parentNode:r,nextSibling:s,setScopeId:n=Ve,insertStaticContent:a}=t,f=(E,T,P,L=null,B=null,j=null,H=!1,Y=null,Q=!!T.dynamicChildren)=>{if(E===T)return;E&&!zt(E,T)&&(L=N(E),D(E,B,j,!0),E=null),T.patchFlag===-2&&(Q=!1,T.dynamicChildren=null);const{type:G,ref:W,shapeFlag:Z}=T;switch(G){case Ii:o(E,T,P,L);break;case Ct:d(E,T,P,L);break;case Wi:E==null&&g(T,P,L,H);break;case De:$(E,T,P,L,B,j,H,Y,Q);break;default:Z&1?b(E,T,P,L,B,j,H,Y,Q):Z&6?q(E,T,P,L,B,j,H,Y,Q):(Z&64||Z&128)&&G.process(E,T,P,L,B,j,H,Y,Q,V)}W!=null&&B&&fn(W,E&&E.ref,j,T||E,!T)},o=(E,T,P,L)=>{if(E==null)p(T.el=u(T.children),P,L);else{const B=T.el=E.el;T.children!==E.children&&c(B,T.children)}},d=(E,T,P,L)=>{E==null?p(T.el=i(T.children||""),P,L):T.el=E.el},g=(E,T,P,L)=>{[E.el,E.anchor]=a(E.children,T,P,L,E.el,E.anchor)},v=({el:E,anchor:T},P,L)=>{let B;for(;E&&E!==T;)B=s(E),p(E,P,L),E=B;p(T,P,L)},_=({el:E,anchor:T})=>{let P;for(;E&&E!==T;)P=s(E),m(E),E=P;m(T)},b=(E,T,P,L,B,j,H,Y,Q)=>{H=H||T.type==="svg",E==null?w(T,P,L,B,j,H,Y,Q):M(E,T,B,j,H,Y,Q)},w=(E,T,P,L,B,j,H,Y)=>{let Q,G;const{type:W,props:Z,shapeFlag:ne,transition:ae,dirs:ce}=E;if(Q=E.el=C(E.type,j,Z&&Z.is,Z),ne&8?l(Q,E.children):ne&16&&A(E.children,Q,null,L,B,j&&W!=="foreignObject",H,Y),ce&&ht(E,null,L,"created"),x(Q,E,E.scopeId,H,L),Z){for(const he in Z)he!=="value"&&!ci(he)&&y(Q,he,null,Z[he],j,E.children,L,B,R);"value"in Z&&y(Q,"value",null,Z.value),(G=Z.onVnodeBeforeMount)&&$e(G,L,E)}ce&&ht(E,null,L,"beforeMount");const ue=(!B||B&&!B.pendingBranch)&&ae&&!ae.persisted;ue&&ae.beforeEnter(Q),p(Q,T,P),((G=Z&&Z.onVnodeMounted)||ue||ce)&&Fe(()=>{G&&$e(G,L,E),ue&&ae.enter(Q),ce&&ht(E,null,L,"mounted")},B)},x=(E,T,P,L,B)=>{if(P&&n(E,P),L)for(let j=0;j<L.length;j++)n(E,L[j]);if(B){let j=B.subTree;if(T===j){const H=B.vnode;x(E,H,H.scopeId,H.slotScopeIds,B.parent)}}},A=(E,T,P,L,B,j,H,Y,Q=0)=>{for(let G=Q;G<E.length;G++){const W=E[G]=Y?st(E[G]):qe(E[G]);f(null,W,T,P,L,B,j,H,Y)}},M=(E,T,P,L,B,j,H)=>{const Y=T.el=E.el;let{patchFlag:Q,dynamicChildren:G,dirs:W}=T;Q|=E.patchFlag&16;const Z=E.props||Ce,ne=T.props||Ce;let ae;P&&dt(P,!1),(ae=ne.onVnodeBeforeUpdate)&&$e(ae,P,T,E),W&&ht(T,E,P,"beforeUpdate"),P&&dt(P,!0);const ce=B&&T.type!=="foreignObject";if(G?X(E.dynamicChildren,G,Y,P,L,ce,j):H||se(E,T,Y,null,P,L,ce,j,!1),Q>0){if(Q&16)z(Y,T,Z,ne,P,L,B);else if(Q&2&&Z.class!==ne.class&&y(Y,"class",null,ne.class,B),Q&4&&y(Y,"style",Z.style,ne.style,B),Q&8){const ue=T.dynamicProps;for(let he=0;he<ue.length;he++){const de=ue[he],Se=Z[de],ze=ne[de];(ze!==Se||de==="value")&&y(Y,de,Se,ze,B,E.children,P,L,R)}}Q&1&&E.children!==T.children&&l(Y,T.children)}else!H&&G==null&&z(Y,T,Z,ne,P,L,B);((ae=ne.onVnodeUpdated)||W)&&Fe(()=>{ae&&$e(ae,P,T,E),W&&ht(T,E,P,"updated")},L)},X=(E,T,P,L,B,j,H)=>{for(let Y=0;Y<T.length;Y++){const Q=E[Y],G=T[Y],W=Q.el&&(Q.type===De||!zt(Q,G)||Q.shapeFlag&70)?r(Q.el):P;f(Q,G,W,null,L,B,j,H,!0)}},z=(E,T,P,L,B,j,H)=>{if(P!==L){if(P!==Ce)for(const Y in P)!ci(Y)&&!(Y in L)&&y(E,Y,P[Y],null,H,T.children,B,j,R);for(const Y in L){if(ci(Y))continue;const Q=L[Y],G=P[Y];Q!==G&&Y!=="value"&&y(E,Y,G,Q,H,T.children,B,j,R)}"value"in L&&y(E,"value",P.value,L.value)}},$=(E,T,P,L,B,j,H,Y,Q)=>{const G=T.el=E?E.el:u(""),W=T.anchor=E?E.anchor:u("");let{patchFlag:Z,dynamicChildren:ne,slotScopeIds:ae}=T;ae&&(Y=Y?Y.concat(ae):ae),E==null?(p(G,P,L),p(W,P,L),A(T.children,P,W,B,j,H,Y,Q)):Z>0&&Z&64&&ne&&E.dynamicChildren?(X(E.dynamicChildren,ne,P,B,j,H,Y),(T.key!=null||B&&T===B.subTree)&&_s(E,T,!0)):se(E,T,P,W,B,j,H,Y,Q)},q=(E,T,P,L,B,j,H,Y,Q)=>{T.slotScopeIds=Y,E==null?T.shapeFlag&512?B.ctx.activate(T,P,L,H,Q):K(T,P,L,B,j,H,Q):te(E,T,Q)},K=(E,T,P,L,B,j,H)=>{const Y=E.component=Ta(E,L,B);if(as(E)&&(Y.ctx.renderer=V),Oa(Y),Y.asyncDep){if(B&&B.registerDep(Y,re),!E.el){const Q=Y.subTree=_e(Ct);d(null,Q,T,P)}return}re(Y,E,T,P,B,j,H)},te=(E,T,P)=>{const L=T.component=E.component;if(Ho(E,T,P))if(L.asyncDep&&!L.asyncResolved){oe(L,T,P);return}else L.next=T,Fo(L.update),L.update();else T.el=E.el,L.vnode=T},re=(E,T,P,L,B,j,H)=>{const Y=()=>{if(E.isMounted){let{next:W,bu:Z,u:ne,parent:ae,vnode:ce}=E,ue=W,he;dt(E,!1),W?(W.el=ce.el,oe(E,W,H)):W=ce,Z&&ui(Z),(he=W.props&&W.props.onVnodeBeforeUpdate)&&$e(he,ae,W,ce),dt(E,!0);const de=zi(E),Se=E.subTree;E.subTree=de,f(Se,de,r(Se.el),N(Se),E,B,j),W.el=de.el,ue===null&&Wo(E,de.el),ne&&Fe(ne,B),(he=W.props&&W.props.onVnodeUpdated)&&Fe(()=>$e(he,ae,W,ce),B)}else{let W;const{el:Z,props:ne}=T,{bm:ae,m:ce,parent:ue}=E,he=hi(T);if(dt(E,!1),ae&&ui(ae),!he&&(W=ne&&ne.onVnodeBeforeMount)&&$e(W,ue,T),dt(E,!0),Z&&ie){const de=()=>{E.subTree=zi(E),ie(Z,E.subTree,E,B,null)};he?T.type.__asyncLoader().then(()=>!E.isUnmounted&&de()):de()}else{const de=E.subTree=zi(E);f(null,de,P,L,E,B,j),T.el=de.el}if(ce&&Fe(ce,B),!he&&(W=ne&&ne.onVnodeMounted)){const de=T;Fe(()=>$e(W,ue,de),B)}(T.shapeFlag&256||ue&&hi(ue.vnode)&&ue.vnode.shapeFlag&256)&&E.a&&Fe(E.a,B),E.isMounted=!0,T=P=L=null}},Q=E.effect=new Tn(Y,()=>Dn(G),E.scope),G=E.update=()=>Q.run();G.id=E.uid,dt(E,!0),G()},oe=(E,T,P)=>{T.component=E;const L=E.vnode.props;E.vnode=T,E.next=null,ua(E,T.props,L,P),da(E,T.children,P),Bt(),Qn(),jt()},se=(E,T,P,L,B,j,H,Y,Q=!1)=>{const G=E&&E.children,W=E?E.shapeFlag:0,Z=T.children,{patchFlag:ne,shapeFlag:ae}=T;if(ne>0){if(ne&128){F(G,Z,P,L,B,j,H,Y,Q);return}else if(ne&256){S(G,Z,P,L,B,j,H,Y,Q);return}}ae&8?(W&16&&R(G,B,j),Z!==G&&l(P,Z)):W&16?ae&16?F(G,Z,P,L,B,j,H,Y,Q):R(G,B,j,!0):(W&8&&l(P,""),ae&16&&A(Z,P,L,B,j,H,Y,Q))},S=(E,T,P,L,B,j,H,Y,Q)=>{E=E||Et,T=T||Et;const G=E.length,W=T.length,Z=Math.min(G,W);let ne;for(ne=0;ne<Z;ne++){const ae=T[ne]=Q?st(T[ne]):qe(T[ne]);f(E[ne],ae,P,null,B,j,H,Y,Q)}G>W?R(E,B,j,!0,!1,Z):A(T,P,L,B,j,H,Y,Q,Z)},F=(E,T,P,L,B,j,H,Y,Q)=>{let G=0;const W=T.length;let Z=E.length-1,ne=W-1;for(;G<=Z&&G<=ne;){const ae=E[G],ce=T[G]=Q?st(T[G]):qe(T[G]);if(zt(ae,ce))f(ae,ce,P,null,B,j,H,Y,Q);else break;G++}for(;G<=Z&&G<=ne;){const ae=E[Z],ce=T[ne]=Q?st(T[ne]):qe(T[ne]);if(zt(ae,ce))f(ae,ce,P,null,B,j,H,Y,Q);else break;Z--,ne--}if(G>Z){if(G<=ne){const ae=ne+1,ce=ae<W?T[ae].el:L;for(;G<=ne;)f(null,T[G]=Q?st(T[G]):qe(T[G]),P,ce,B,j,H,Y,Q),G++}}else if(G>ne)for(;G<=Z;)D(E[G],B,j,!0),G++;else{const ae=G,ce=G,ue=new Map;for(G=ce;G<=ne;G++){const Ae=T[G]=Q?st(T[G]):qe(T[G]);Ae.key!=null&&ue.set(Ae.key,G)}let he,de=0;const Se=ne-ce+1;let ze=!1,Be=0;const ft=new Array(Se);for(G=0;G<Se;G++)ft[G]=0;for(G=ae;G<=Z;G++){const Ae=E[G];if(de>=Se){D(Ae,B,j,!0);continue}let He;if(Ae.key!=null)He=ue.get(Ae.key);else for(he=ce;he<=ne;he++)if(ft[he-ce]===0&&zt(Ae,T[he])){He=he;break}He===void 0?D(Ae,B,j,!0):(ft[He-ce]=G+1,He>=Be?Be=He:ze=!0,f(Ae,T[He],P,null,B,j,H,Y,Q),de++)}const Rt=ze?ma(ft):Et;for(he=Rt.length-1,G=Se-1;G>=0;G--){const Ae=ce+G,He=T[Ae],Nn=Ae+1<W?T[Ae+1].el:L;ft[G]===0?f(null,He,P,Nn,B,j,H,Y,Q):ze&&(he<0||G!==Rt[he]?I(He,P,Nn,2):he--)}}},I=(E,T,P,L,B=null)=>{const{el:j,type:H,transition:Y,children:Q,shapeFlag:G}=E;if(G&6){I(E.component.subTree,T,P,L);return}if(G&128){E.suspense.move(T,P,L);return}if(G&64){H.move(E,T,P,V);return}if(H===De){p(j,T,P);for(let Z=0;Z<Q.length;Z++)I(Q[Z],T,P,L);p(E.anchor,T,P);return}if(H===Wi){v(E,T,P);return}if(L!==2&&G&1&&Y)if(L===0)Y.beforeEnter(j),p(j,T,P),Fe(()=>Y.enter(j),B);else{const{leave:Z,delayLeave:ne,afterLeave:ae}=Y,ce=()=>p(j,T,P),ue=()=>{Z(j,()=>{ce(),ae&&ae()})};ne?ne(j,ce,ue):ue()}else p(j,T,P)},D=(E,T,P,L=!1,B=!1)=>{const{type:j,props:H,ref:Y,children:Q,dynamicChildren:G,shapeFlag:W,patchFlag:Z,dirs:ne}=E;if(Y!=null&&fn(Y,null,P,E,!0),W&256){T.ctx.deactivate(E);return}const ae=W&1&&ne,ce=!hi(E);let ue;if(ce&&(ue=H&&H.onVnodeBeforeUnmount)&&$e(ue,T,E),W&6)O(E.component,P,L);else{if(W&128){E.suspense.unmount(P,L);return}ae&&ht(E,null,T,"beforeUnmount"),W&64?E.type.remove(E,T,P,B,V,L):G&&(j!==De||Z>0&&Z&64)?R(G,T,P,!1,!0):(j===De&&Z&384||!B&&W&16)&&R(Q,T,P),L&&U(E)}(ce&&(ue=H&&H.onVnodeUnmounted)||ae)&&Fe(()=>{ue&&$e(ue,T,E),ae&&ht(E,null,T,"unmounted")},P)},U=E=>{const{type:T,el:P,anchor:L,transition:B}=E;if(T===De){k(P,L);return}if(T===Wi){_(E);return}const j=()=>{m(P),B&&!B.persisted&&B.afterLeave&&B.afterLeave()};if(E.shapeFlag&1&&B&&!B.persisted){const{leave:H,delayLeave:Y}=B,Q=()=>H(P,j);Y?Y(E.el,j,Q):Q()}else j()},k=(E,T)=>{let P;for(;E!==T;)P=s(E),m(E),E=P;m(T)},O=(E,T,P)=>{const{bum:L,scope:B,update:j,subTree:H,um:Y}=E;L&&ui(L),B.stop(),j&&(j.active=!1,D(H,E,T,P)),Y&&Fe(Y,T),Fe(()=>{E.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},R=(E,T,P,L=!1,B=!1,j=0)=>{for(let H=j;H<E.length;H++)D(E[H],T,P,L,B)},N=E=>E.shapeFlag&6?N(E.component.subTree):E.shapeFlag&128?E.suspense.next():s(E.anchor||E.el),J=(E,T,P)=>{E==null?T._vnode&&D(T._vnode,null,null,!0):f(T._vnode||null,E,T,null,null,null,P),Qn(),ts(),T._vnode=E},V={p:f,um:D,m:I,r:U,mt:K,mc:A,pc:se,pbc:X,n:N,o:t};let ee,ie;return e&&([ee,ie]=e(V)),{render:J,hydrate:ee,createApp:la(J,ee)}}function dt({effect:t,update:e},h){t.allowRecurse=e.allowRecurse=h}function _s(t,e,h=!1){const p=t.children,m=e.children;if(fe(p)&&fe(m))for(let y=0;y<p.length;y++){const C=p[y];let u=m[y];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=m[y]=st(m[y]),u.el=C.el),h||_s(C,u)),u.type===Ii&&(u.el=C.el)}}function ma(t){const e=t.slice(),h=[0];let p,m,y,C,u;const i=t.length;for(p=0;p<i;p++){const c=t[p];if(c!==0){if(m=h[h.length-1],t[m]<c){e[p]=m,h.push(p);continue}for(y=0,C=h.length-1;y<C;)u=y+C>>1,t[h[u]]<c?y=u+1:C=u;c<t[h[y]]&&(y>0&&(e[p]=h[y-1]),h[y]=p)}}for(y=h.length,C=h[y-1];y-- >0;)h[y]=C,C=e[C];return h}const va=t=>t.__isTeleport,De=Symbol.for("v-fgt"),Ii=Symbol.for("v-txt"),Ct=Symbol.for("v-cmt"),Wi=Symbol.for("v-stc"),Vt=[];let Ge=null;function ge(t=!1){Vt.push(Ge=t?null:[])}function ya(){Vt.pop(),Ge=Vt[Vt.length-1]||null}let Jt=1;function cr(t){Jt+=t}function Cs(t){return t.dynamicChildren=Jt>0?Ge||Et:null,ya(),Jt>0&&Ge&&Ge.push(t),t}function me(t,e,h,p,m,y){return Cs(le(t,e,h,p,m,y,!0))}function bs(t,e,h,p,m){return Cs(_e(t,e,h,p,m,!0))}function hn(t){return t?t.__v_isVNode===!0:!1}function zt(t,e){return t.type===e.type&&t.key===e.key}const Fi="__vInternal",ws=({key:t})=>t??null,pi=({ref:t,ref_key:e,ref_for:h})=>(typeof t=="number"&&(t=""+t),t!=null?xe(t)||Me(t)||pe(t)?{i:We,r:t,k:e,f:!!h}:t:null);function le(t,e=null,h=null,p=0,m=null,y=t===De?0:1,C=!1,u=!1){const i={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ws(e),ref:e&&pi(e),scopeId:rs,slotScopeIds:null,children:h,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:p,dynamicProps:m,dynamicChildren:null,appContext:null,ctx:We};return u?(Rn(i,h),y&128&&t.normalize(i)):h&&(i.shapeFlag|=xe(h)?8:16),Jt>0&&!C&&Ge&&(i.patchFlag>0||y&6)&&i.patchFlag!==32&&Ge.push(i),i}const _e=_a;function _a(t,e=null,h=null,p=0,m=null,y=!1){if((!t||t===Zo)&&(t=Ct),hn(t)){const u=It(t,e,!0);return h&&Rn(u,h),Jt>0&&!y&&Ge&&(u.shapeFlag&6?Ge[Ge.indexOf(t)]=u:Ge.push(u)),u.patchFlag|=-2,u}if(ka(t)&&(t=t.__vccOpts),e){e=Ca(e);let{class:u,style:i}=e;u&&!xe(u)&&(e.class=Ei(u)),we(i)&&(Ur(i)&&!fe(i)&&(i=Te({},i)),e.style=Sn(i))}const C=xe(t)?1:Xo(t)?128:va(t)?64:we(t)?4:pe(t)?2:0;return le(t,e,h,p,m,C,y,!0)}function Ca(t){return t?Ur(t)||Fi in t?Te({},t):t:null}function It(t,e,h=!1){const{props:p,ref:m,patchFlag:y,children:C}=t,u=e?wa(p||{},e):p;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&ws(u),ref:e&&e.ref?h&&m?fe(m)?m.concat(pi(e)):[m,pi(e)]:pi(e):m,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:C,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==De?y===-1?16:y|16:y,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&It(t.ssContent),ssFallback:t.ssFallback&&It(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ba(t=" ",e=0){return _e(Ii,null,t,e)}function rt(t="",e=!1){return e?(ge(),bs(Ct,null,t)):_e(Ct,null,t)}function qe(t){return t==null||typeof t=="boolean"?_e(Ct):fe(t)?_e(De,null,t.slice()):typeof t=="object"?st(t):_e(Ii,null,String(t))}function st(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:It(t)}function Rn(t,e){let h=0;const{shapeFlag:p}=t;if(e==null)e=null;else if(fe(e))h=16;else if(typeof e=="object")if(p&65){const m=e.default;m&&(m._c&&(m._d=!1),Rn(t,m()),m._c&&(m._d=!0));return}else{h=32;const m=e._;!m&&!(Fi in e)?e._ctx=We:m===3&&We&&(We.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else pe(e)?(e={default:e,_ctx:We},h=32):(e=String(e),p&64?(h=16,e=[ba(e)]):h=8);t.children=e,t.shapeFlag|=h}function wa(...t){const e={};for(let h=0;h<t.length;h++){const p=t[h];for(const m in p)if(m==="class")e.class!==p.class&&(e.class=Ei([e.class,p.class]));else if(m==="style")e.style=Sn([e.style,p.style]);else if(Si(m)){const y=e[m],C=p[m];C&&y!==C&&!(fe(y)&&y.includes(C))&&(e[m]=y?[].concat(y,C):C)}else m!==""&&(e[m]=p[m])}return e}function $e(t,e,h,p=null){Ue(t,e,7,[h,p])}const Sa=ds();let xa=0;function Ta(t,e,h){const p=t.type,m=(e?e.appContext:t.appContext)||Sa,y={uid:xa++,vnode:t,type:p,parent:e,appContext:m,root:null,next:null,subTree:null,effect:null,update:null,scope:new qs(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(m.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gs(p,m),emitsOptions:ns(p,m),emit:null,emitted:null,propsDefaults:Ce,inheritAttrs:p.inheritAttrs,ctx:Ce,data:Ce,props:Ce,attrs:Ce,slots:Ce,refs:Ce,setupState:Ce,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:h,suspenseId:h?h.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=e?e.root:y,y.emit=jo.bind(null,y),t.ce&&t.ce(y),y}let Ee=null,zn,Tt,ur="__VUE_INSTANCE_SETTERS__";(Tt=Zi()[ur])||(Tt=Zi()[ur]=[]),Tt.push(t=>Ee=t),zn=t=>{Tt.length>1?Tt.forEach(e=>e(t)):Tt[0](t)};const Ft=t=>{zn(t),t.scope.on()},_t=()=>{Ee&&Ee.scope.off(),zn(null)};function Ss(t){return t.vnode.shapeFlag&4}let Qt=!1;function Oa(t,e=!1){Qt=e;const{props:h,children:p}=t.vnode,m=Ss(t);ca(t,h,m,e),ha(t,p);const y=m?Ea(t,e):void 0;return Qt=!1,y}function Ea(t,e){const h=t.type;t.accessCache=Object.create(null),t.proxy=$r(new Proxy(t.ctx,ta));const{setup:p}=h;if(p){const m=t.setupContext=p.length>1?Ma(t):null;Ft(t),Bt();const y=ct(p,t,0,[t.props,m]);if(jt(),_t(),kr(y)){if(y.then(_t,_t),e)return y.then(C=>{fr(t,C,e)}).catch(C=>{Mi(C,t,0)});t.asyncDep=y}else fr(t,y,e)}else xs(t,e)}function fr(t,e,h){pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:we(e)&&(t.setupState=Jr(e)),xs(t,h)}let hr;function xs(t,e,h){const p=t.type;if(!t.render){if(!e&&hr&&!p.render){const m=p.template||Ln(t).template;if(m){const{isCustomElement:y,compilerOptions:C}=t.appContext.config,{delimiters:u,compilerOptions:i}=p,c=Te(Te({isCustomElement:y,delimiters:u},C),i);p.render=hr(m,c)}}t.render=p.render||Ve}Ft(t),Bt(),ia(t),jt(),_t()}function Pa(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,h){return Le(t,"get","$attrs"),e[h]}}))}function Ma(t){const e=h=>{t.exposed=h||{}};return{get attrs(){return Pa(t)},slots:t.slots,emit:t.emit,expose:e}}function Li(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Jr($r(t.exposed)),{get(e,h){if(h in e)return e[h];if(h in Gt)return Gt[h](t)},has(e,h){return h in e||h in Gt}}))}function Aa(t,e=!0){return pe(t)?t.displayName||t.name:t.name||e&&t.__name}function ka(t){return pe(t)&&"__vccOpts"in t}const Bi=(t,e)=>ko(t,e,Qt);function Ne(t,e,h){const p=arguments.length;return p===2?we(e)&&!fe(e)?hn(e)?_e(t,null,[e]):_e(t,e):_e(t,null,e):(p>3?h=Array.prototype.slice.call(arguments,2):p===3&&hn(h)&&(h=[h]),_e(t,e,h))}const Da=Symbol.for("v-scx"),Ia=()=>di(Da),Fa="3.3.4",La="http://www.w3.org/2000/svg",gt=typeof document<"u"?document:null,dr=gt&&gt.createElement("template"),Ba={insert:(t,e,h)=>{e.insertBefore(t,h||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,h,p)=>{const m=e?gt.createElementNS(La,t):gt.createElement(t,h?{is:h}:void 0);return t==="select"&&p&&p.multiple!=null&&m.setAttribute("multiple",p.multiple),m},createText:t=>gt.createTextNode(t),createComment:t=>gt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>gt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,h,p,m,y){const C=h?h.previousSibling:e.lastChild;if(m&&(m===y||m.nextSibling))for(;e.insertBefore(m.cloneNode(!0),h),!(m===y||!(m=m.nextSibling)););else{dr.innerHTML=p?`<svg>${t}</svg>`:t;const u=dr.content;if(p){const i=u.firstChild;for(;i.firstChild;)u.appendChild(i.firstChild);u.removeChild(i)}e.insertBefore(u,h)}return[C?C.nextSibling:e.firstChild,h?h.previousSibling:e.lastChild]}};function ja(t,e,h){const p=t._vtc;p&&(e=(e?[e,...p]:[...p]).join(" ")),e==null?t.removeAttribute("class"):h?t.setAttribute("class",e):t.className=e}function Ra(t,e,h){const p=t.style,m=xe(h);if(h&&!m){if(e&&!xe(e))for(const y in e)h[y]==null&&dn(p,y,"");for(const y in h)dn(p,y,h[y])}else{const y=p.display;m?e!==h&&(p.cssText=h):e&&t.removeAttribute("style"),"_vod"in t&&(p.display=y)}}const pr=/\s*!important$/;function dn(t,e,h){if(fe(h))h.forEach(p=>dn(t,e,p));else if(h==null&&(h=""),e.startsWith("--"))t.setProperty(e,h);else{const p=za(t,e);pr.test(h)?t.setProperty(Lt(p),h.replace(pr,""),"important"):t[p]=h}}const gr=["Webkit","Moz","ms"],Xi={};function za(t,e){const h=Xi[e];if(h)return h;let p=Qe(e);if(p!=="filter"&&p in t)return Xi[e]=p;p=Oi(p);for(let m=0;m<gr.length;m++){const y=gr[m]+p;if(y in t)return Xi[e]=y}return e}const mr="http://www.w3.org/1999/xlink";function Ha(t,e,h,p,m){if(p&&e.startsWith("xlink:"))h==null?t.removeAttributeNS(mr,e.slice(6,e.length)):t.setAttributeNS(mr,e,h);else{const y=$s(e);h==null||y&&!Fr(h)?t.removeAttribute(e):t.setAttribute(e,y?"":h)}}function Wa(t,e,h,p,m,y,C){if(e==="innerHTML"||e==="textContent"){p&&C(p,m,y),t[e]=h??"";return}const u=t.tagName;if(e==="value"&&u!=="PROGRESS"&&!u.includes("-")){t._value=h;const c=u==="OPTION"?t.getAttribute("value"):t.value,l=h??"";c!==l&&(t.value=l),h==null&&t.removeAttribute(e);return}let i=!1;if(h===""||h==null){const c=typeof t[e];c==="boolean"?h=Fr(h):h==null&&c==="string"?(h="",i=!0):c==="number"&&(h=0,i=!0)}try{t[e]=h}catch{}i&&t.removeAttribute(e)}function Ot(t,e,h,p){t.addEventListener(e,h,p)}function Xa(t,e,h,p){t.removeEventListener(e,h,p)}function Na(t,e,h,p,m=null){const y=t._vei||(t._vei={}),C=y[e];if(p&&C)C.value=p;else{const[u,i]=Ya(e);if(p){const c=y[e]=Ua(p,m);Ot(t,u,c,i)}else C&&(Xa(t,u,C,i),y[e]=void 0)}}const vr=/(?:Once|Passive|Capture)$/;function Ya(t){let e;if(vr.test(t)){e={};let p;for(;p=t.match(vr);)t=t.slice(0,t.length-p[0].length),e[p[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Lt(t.slice(2)),e]}let Ni=0;const Ga=Promise.resolve(),Va=()=>Ni||(Ga.then(()=>Ni=0),Ni=Date.now());function Ua(t,e){const h=p=>{if(!p._vts)p._vts=Date.now();else if(p._vts<=h.attached)return;Ue($a(p,h.value),e,5,[p])};return h.value=t,h.attached=Va(),h}function $a(t,e){if(fe(e)){const h=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{h.call(t),t._stopped=!0},e.map(p=>m=>!m._stopped&&p&&p(m))}else return e}const yr=/^on[a-z]/,qa=(t,e,h,p,m=!1,y,C,u,i)=>{e==="class"?ja(t,p,m):e==="style"?Ra(t,h,p):Si(e)?_n(e)||Na(t,e,h,p,C):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ka(t,e,p,m))?Wa(t,e,p,y,C,u,i):(e==="true-value"?t._trueValue=p:e==="false-value"&&(t._falseValue=p),Ha(t,e,p,m))};function Ka(t,e,h,p){return p?!!(e==="innerHTML"||e==="textContent"||e in t&&yr.test(e)&&pe(h)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||yr.test(e)&&xe(h)?!1:e in t}const _r=t=>{const e=t.props["onUpdate:modelValue"]||!1;return fe(e)?h=>ui(e,h):e};function Ja(t){t.target.composing=!0}function Cr(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const oi={created(t,{modifiers:{lazy:e,trim:h,number:p}},m){t._assign=_r(m);const y=p||m.props&&m.props.type==="number";Ot(t,e?"change":"input",C=>{if(C.target.composing)return;let u=t.value;h&&(u=u.trim()),y&&(u=Qi(u)),t._assign(u)}),h&&Ot(t,"change",()=>{t.value=t.value.trim()}),e||(Ot(t,"compositionstart",Ja),Ot(t,"compositionend",Cr),Ot(t,"change",Cr))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:h,trim:p,number:m}},y){if(t._assign=_r(y),t.composing||document.activeElement===t&&t.type!=="range"&&(h||p&&t.value.trim()===e||(m||t.type==="number")&&Qi(t.value)===e))return;const C=e??"";t.value!==C&&(t.value=C)}},Qa=["ctrl","shift","alt","meta"],Za={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Qa.some(h=>t[`${h}Key`]&&!e.includes(h))},el=(t,e)=>(h,...p)=>{for(let m=0;m<e.length;m++){const y=Za[e[m]];if(y&&y(h,e))return}return t(h,...p)},pn={beforeMount(t,{value:e},{transition:h}){t._vod=t.style.display==="none"?"":t.style.display,h&&e?h.beforeEnter(t):Ht(t,e)},mounted(t,{value:e},{transition:h}){h&&e&&h.enter(t)},updated(t,{value:e,oldValue:h},{transition:p}){!e!=!h&&(p?e?(p.beforeEnter(t),Ht(t,!0),p.enter(t)):p.leave(t,()=>{Ht(t,!1)}):Ht(t,e))},beforeUnmount(t,{value:e}){Ht(t,e)}};function Ht(t,e){t.style.display=e?t._vod:"none"}const tl=Te({patchProp:qa},Ba);let br;function il(){return br||(br=pa(tl))}const nl=(...t)=>{const e=il().createApp(...t),{mount:h}=e;return e.mount=p=>{const m=rl(p);if(!m)return;const y=e._component;!pe(y)&&!y.render&&!y.template&&(y.template=m.innerHTML),m.innerHTML="";const C=h(m,!1,m instanceof SVGElement);return m instanceof Element&&(m.removeAttribute("v-cloak"),m.setAttribute("data-v-app","")),C},e};function rl(t){return xe(t)?document.querySelector(t):t}function sl(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var h=function p(){if(this instanceof p){var m=[null];m.push.apply(m,arguments);var y=Function.bind.apply(e,m);return new y}return e.apply(this,arguments)};h.prototype=e.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(t).forEach(function(p){var m=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(h,p,m.get?m:{enumerable:!0,get:function(){return t[p]}})}),h}var Yt={};const ol={},al=Object.freeze(Object.defineProperty({__proto__:null,default:ol},Symbol.toStringTag,{value:"Module"})),Yi=sl(al);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var h=Yi,p=new h.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=p.document,e.jsdomImplForWrapper=Yi.implForWrapper,e.nodeCanvas=Yi.Canvas,e.window=p,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function u(n,a){if(this.__eventListeners[n]){var f=this.__eventListeners[n];a?f[f.indexOf(a)]=!1:e.util.array.fill(f,!1)}}function i(n,a){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var f in n)this.on(f,n[f]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(a);return this}function c(n,a){var f=(function(){a.apply(this,arguments),this.off(n,f)}).bind(this);this.on(n,f)}function l(n,a){if(arguments.length===1)for(var f in n)c.call(this,f,n[f]);else c.call(this,n,a);return this}function r(n,a){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)u.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var f in n)u.call(this,f,n[f]);else u.call(this,n,a);return this}function s(n,a){if(!this.__eventListeners)return this;var f=this.__eventListeners[n];if(!f)return this;for(var o=0,d=f.length;o<d;o++)f[o]&&f[o].call(this,a||{});return this.__eventListeners[n]=f.filter(function(g){return g!==!1}),this}e.Observable={fire:s,on:i,once:l,off:r}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var u=0,i=arguments.length;u<i;u++)this._onObjectAdded(arguments[u]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(u,i,c){var l=this._objects;return c?l[i]=u:l.splice(i,0,u),this._onObjectAdded&&this._onObjectAdded(u),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var u=this._objects,i,c=!1,l=0,r=arguments.length;l<r;l++)i=u.indexOf(arguments[l]),i!==-1&&(c=!0,u.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[l]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(u,i){for(var c=this.getObjects(),l=0,r=c.length;l<r;l++)u.call(i,c[l],l,c);return this},getObjects:function(u){return typeof u>"u"?this._objects.concat():this._objects.filter(function(i){return i.type===u})},item:function(u){return this._objects[u]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(u,i){return this._objects.indexOf(u)>-1?!0:i?this._objects.some(function(c){return typeof c.contains=="function"&&c.contains(u,!0)}):!1},complexity:function(){return this._objects.reduce(function(u,i){return u+=i.complexity?i.complexity():0,u},0)}},e.CommonMethods={_setOptions:function(u){for(var i in u)this.set(i,u[i])},_initGradient:function(u,i){u&&u.colorStops&&!(u instanceof e.Gradient)&&this.set(i,new e.Gradient(u))},_initPattern:function(u,i,c){u&&u.source&&!(u instanceof e.Pattern)?this.set(i,new e.Pattern(u,c)):c&&c()},_setObject:function(u){for(var i in u)this._set(i,u[i])},set:function(u,i){return typeof u=="object"?this._setObject(u):this._set(u,i),this},_set:function(u,i){this[u]=i},toggle:function(u){var i=this.get(u);return typeof i=="boolean"&&this.set(u,!i),this},get:function(u){return this[u]}},function(u){var i=Math.sqrt,c=Math.atan2,l=Math.pow,r=Math.PI/180,s=Math.PI/2;e.util={cos:function(n){if(n===0)return 1;n<0&&(n=-n);var a=n/s;switch(a){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},sin:function(n){if(n===0)return 0;var a=n/s,f=1;switch(n<0&&(f=-1),a){case 1:return f;case 2:return 0;case 3:return-f}return Math.sin(n)},removeFromArray:function(n,a){var f=n.indexOf(a);return f!==-1&&n.splice(f,1),n},getRandomInt:function(n,a){return Math.floor(Math.random()*(a-n+1))+n},degreesToRadians:function(n){return n*r},radiansToDegrees:function(n){return n/r},rotatePoint:function(n,a,f){var o=new e.Point(n.x-a.x,n.y-a.y),d=e.util.rotateVector(o,f);return new e.Point(d.x,d.y).addEquals(a)},rotateVector:function(n,a){var f=e.util.sin(a),o=e.util.cos(a),d=n.x*o-n.y*f,g=n.x*f+n.y*o;return{x:d,y:g}},createVector:function(n,a){return new e.Point(a.x-n.x,a.y-n.y)},calcAngleBetweenVectors:function(n,a){return Math.acos((n.x*a.x+n.y*a.y)/(Math.hypot(n.x,n.y)*Math.hypot(a.x,a.y)))},getHatVector:function(n){return new e.Point(n.x,n.y).multiply(1/Math.hypot(n.x,n.y))},getBisector:function(n,a,f){var o=e.util.createVector(n,a),d=e.util.createVector(n,f),g=e.util.calcAngleBetweenVectors(o,d),v=e.util.calcAngleBetweenVectors(e.util.rotateVector(o,g),d),_=g*(v===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(o,_)),angle:g}},projectStrokeOnPoints:function(n,a,f){var o=[],d=a.strokeWidth/2,g=a.strokeUniform?new e.Point(1/a.scaleX,1/a.scaleY):new e.Point(1,1),v=function(_){var b=d/Math.hypot(_.x,_.y);return new e.Point(_.x*b*g.x,_.y*b*g.y)};return n.length<=1||n.forEach(function(_,b){var w=new e.Point(_.x,_.y),x,A;b===0?(A=n[b+1],x=f?v(e.util.createVector(A,w)).addEquals(w):n[n.length-1]):b===n.length-1?(x=n[b-1],A=f?v(e.util.createVector(x,w)).addEquals(w):n[0]):(x=n[b-1],A=n[b+1]);var M=e.util.getBisector(w,x,A),X=M.vector,z=M.angle,$,q;if(a.strokeLineJoin==="miter"&&($=-d/Math.sin(z/2),q=new e.Point(X.x*$*g.x,X.y*$*g.y),Math.hypot(q.x,q.y)/d<=a.strokeMiterLimit)){o.push(w.add(q)),o.push(w.subtract(q));return}$=-d*Math.SQRT2,q=new e.Point(X.x*$*g.x,X.y*$*g.y),o.push(w.add(q)),o.push(w.subtract(q))}),o},transformPoint:function(n,a,f){return f?new e.Point(a[0]*n.x+a[2]*n.y,a[1]*n.x+a[3]*n.y):new e.Point(a[0]*n.x+a[2]*n.y+a[4],a[1]*n.x+a[3]*n.y+a[5])},makeBoundingBoxFromPoints:function(n,a){if(a)for(var f=0;f<n.length;f++)n[f]=e.util.transformPoint(n[f],a);var o=[n[0].x,n[1].x,n[2].x,n[3].x],d=e.util.array.min(o),g=e.util.array.max(o),v=g-d,_=[n[0].y,n[1].y,n[2].y,n[3].y],b=e.util.array.min(_),w=e.util.array.max(_),x=w-b;return{left:d,top:b,width:v,height:x}},invertTransform:function(n){var a=1/(n[0]*n[3]-n[1]*n[2]),f=[a*n[3],-a*n[1],-a*n[2],a*n[0]],o=e.util.transformPoint({x:n[4],y:n[5]},f,!0);return f[4]=-o.x,f[5]=-o.y,f},toFixed:function(n,a){return parseFloat(Number(n).toFixed(a))},parseUnit:function(n,a){var f=/\D{0,2}$/.exec(n),o=parseFloat(n);switch(a||(a=e.Text.DEFAULT_SVG_FONT_SIZE),f[0]){case"mm":return o*e.DPI/25.4;case"cm":return o*e.DPI/2.54;case"in":return o*e.DPI;case"pt":return o*e.DPI/72;case"pc":return o*e.DPI/72*12;case"em":return o*a;default:return o}},falseFunction:function(){return!1},getKlass:function(n,a){return n=e.util.string.camelize(n.charAt(0).toUpperCase()+n.slice(1)),e.util.resolveNamespace(a)[n]},getSvgAttributes:function(n){var a=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":a=a.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":a=a.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":a=a.concat(["offset","stop-color","stop-opacity"]);break}return a},resolveNamespace:function(n){if(!n)return e;var a=n.split("."),f=a.length,o,d=u||e.window;for(o=0;o<f;++o)d=d[a[o]];return d},loadImage:function(n,a,f,o){if(!n){a&&a.call(f,n);return}var d=e.util.createImage(),g=function(){a&&a.call(f,d,!1),d=d.onload=d.onerror=null};d.onload=g,d.onerror=function(){e.log("Error loading "+d.src),a&&a.call(f,null,!0),d=d.onload=d.onerror=null},n.indexOf("data")!==0&&o!==void 0&&o!==null&&(d.crossOrigin=o),n.substring(0,14)==="data:image/svg"&&(d.onload=null,e.util.loadImageInDom(d,g)),d.src=n},loadImageInDom:function(n,a){var f=e.document.createElement("div");f.style.width=f.style.height="1px",f.style.left=f.style.top="-100%",f.style.position="absolute",f.appendChild(n),e.document.querySelector("body").appendChild(f),n.onload=function(){a(),f.parentNode.removeChild(f),f=null}},enlivenObjects:function(n,a,f,o){n=n||[];var d=[],g=0,v=n.length;function _(){++g===v&&a&&a(d.filter(function(b){return b}))}if(!v){a&&a(d);return}n.forEach(function(b,w){if(!b||!b.type){_();return}var x=e.util.getKlass(b.type,f);x.fromObject(b,function(A,M){M||(d[w]=A),o&&o(b,A,M),_()})})},enlivenObjectEnlivables:function(n,a,f){var o=e.Object.ENLIVEN_PROPS.filter(function(d){return!!n[d]});e.util.enlivenObjects(o.map(function(d){return n[d]}),function(d){var g={};o.forEach(function(v,_){g[v]=d[_],a&&(a[v]=d[_])}),f&&f(g)})},enlivenPatterns:function(n,a){n=n||[];function f(){++d===g&&a&&a(o)}var o=[],d=0,g=n.length;if(!g){a&&a(o);return}n.forEach(function(v,_){v&&v.source?new e.Pattern(v,function(b){o[_]=b,f()}):(o[_]=v,f())})},groupSVGElements:function(n,a,f){var o;return n&&n.length===1?(typeof f<"u"&&(n[0].sourcePath=f),n[0]):(a&&(a.width&&a.height?a.centerPoint={x:a.width/2,y:a.height/2}:(delete a.width,delete a.height)),o=new e.Group(n,a),typeof f<"u"&&(o.sourcePath=f),o)},populateWithProperties:function(n,a,f){if(f&&Array.isArray(f))for(var o=0,d=f.length;o<d;o++)f[o]in n&&(a[f[o]]=n[f[o]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(n){var a=e.util.createCanvasElement();return a.width=n.width,a.height=n.height,a.getContext("2d").drawImage(n,0,0),a},toDataURL:function(n,a,f){return n.toDataURL("image/"+a,f)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(n,a,f){return[n[0]*a[0]+n[2]*a[1],n[1]*a[0]+n[3]*a[1],n[0]*a[2]+n[2]*a[3],n[1]*a[2]+n[3]*a[3],f?0:n[0]*a[4]+n[2]*a[5]+n[4],f?0:n[1]*a[4]+n[3]*a[5]+n[5]]},qrDecompose:function(n){var a=c(n[1],n[0]),f=l(n[0],2)+l(n[1],2),o=i(f),d=(n[0]*n[3]-n[2]*n[1])/o,g=c(n[0]*n[2]+n[1]*n[3],f);return{angle:a/r,scaleX:o,scaleY:d,skewX:g/r,skewY:0,translateX:n[4],translateY:n[5]}},calcRotateMatrix:function(n){if(!n.angle)return e.iMatrix.concat();var a=e.util.degreesToRadians(n.angle),f=e.util.cos(a),o=e.util.sin(a);return[f,o,-o,f,0,0]},calcDimensionsMatrix:function(n){var a=typeof n.scaleX>"u"?1:n.scaleX,f=typeof n.scaleY>"u"?1:n.scaleY,o=[n.flipX?-a:a,0,0,n.flipY?-f:f,0,0],d=e.util.multiplyTransformMatrices,g=e.util.degreesToRadians;return n.skewX&&(o=d(o,[1,0,Math.tan(g(n.skewX)),1],!0)),n.skewY&&(o=d(o,[1,Math.tan(g(n.skewY)),0,1],!0)),o},composeMatrix:function(n){var a=[1,0,0,1,n.translateX||0,n.translateY||0],f=e.util.multiplyTransformMatrices;return n.angle&&(a=f(a,e.util.calcRotateMatrix(n))),(n.scaleX!==1||n.scaleY!==1||n.skewX||n.skewY||n.flipX||n.flipY)&&(a=f(a,e.util.calcDimensionsMatrix(n))),a},resetObjectTransform:function(n){n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},saveObjectTransform:function(n){return{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}},isTransparent:function(n,a,f,o){o>0&&(a>o?a-=o:a=0,f>o?f-=o:f=0);var d=!0,g,v,_=n.getImageData(a,f,o*2||1,o*2||1),b=_.data.length;for(g=3;g<b&&(v=_.data[g],d=v<=0,d!==!1);g+=4);return _=null,d},parsePreserveAspectRatioAttribute:function(n){var a="meet",f="Mid",o="Mid",d=n.split(" "),g;return d&&d.length&&(a=d.pop(),a!=="meet"&&a!=="slice"?(g=a,a="meet"):d.length&&(g=d.pop())),f=g!=="none"?g.slice(1,4):"none",o=g!=="none"?g.slice(5,8):"none",{meetOrSlice:a,alignX:f,alignY:o}},clearFabricFontCache:function(n){n=(n||"").toLowerCase(),n?e.charWidthsCache[n]&&delete e.charWidthsCache[n]:e.charWidthsCache={}},limitDimsByArea:function(n,a){var f=Math.sqrt(a*n),o=Math.floor(a/f);return{x:Math.floor(f),y:o}},capValue:function(n,a,f){return Math.max(n,Math.min(a,f))},findScaleToFit:function(n,a){return Math.min(a.width/n.width,a.height/n.height)},findScaleToCover:function(n,a){return Math.max(a.width/n.width,a.height/n.height)},matrixToSVG:function(n){return"matrix("+n.map(function(a){return e.util.toFixed(a,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(n,a){var f=e.util.invertTransform(a),o=e.util.multiplyTransformMatrices(f,n.calcOwnMatrix());e.util.applyTransformToObject(n,o)},addTransformToObject:function(n,a){e.util.applyTransformToObject(n,e.util.multiplyTransformMatrices(a,n.calcOwnMatrix()))},applyTransformToObject:function(n,a){var f=e.util.qrDecompose(a),o=new e.Point(f.translateX,f.translateY);n.flipX=!1,n.flipY=!1,n.set("scaleX",f.scaleX),n.set("scaleY",f.scaleY),n.skewX=f.skewX,n.skewY=f.skewY,n.angle=f.angle,n.setPositionByOrigin(o,"center","center")},sizeAfterTransform:function(n,a,f){var o=n/2,d=a/2,g=[{x:-o,y:-d},{x:o,y:-d},{x:-o,y:d},{x:o,y:d}],v=e.util.calcDimensionsMatrix(f),_=e.util.makeBoundingBoxFromPoints(g,v);return{x:_.width,y:_.height}},mergeClipPaths:function(n,a){var f=n,o=a;f.inverted&&!o.inverted&&(f=a,o=n),e.util.applyTransformToObject(o,e.util.multiplyTransformMatrices(e.util.invertTransform(f.calcTransformMatrix()),o.calcTransformMatrix()));var d=f.inverted&&o.inverted;return d&&(f.inverted=o.inverted=!1),new e.Group([f],{clipPath:o,inverted:d})},hasStyleChanged:function(n,a,f){return f=f||!1,n.fill!==a.fill||n.stroke!==a.stroke||n.strokeWidth!==a.strokeWidth||n.fontSize!==a.fontSize||n.fontFamily!==a.fontFamily||n.fontWeight!==a.fontWeight||n.fontStyle!==a.fontStyle||n.textBackgroundColor!==a.textBackgroundColor||n.deltaY!==a.deltaY||f&&(n.overline!==a.overline||n.underline!==a.underline||n.linethrough!==a.linethrough)},stylesToArray:function(f,a){for(var f=e.util.object.clone(f,!0),o=a.split(`
`),d=-1,g={},v=[],_=0;_<o.length;_++){if(!f[_]){d+=o[_].length;continue}for(var b=0;b<o[_].length;b++){d++;var w=f[_][b];if(w&&Object.keys(w).length>0){var x=e.util.hasStyleChanged(g,w,!0);x?v.push({start:d,end:d+1,style:w}):v[v.length-1].end++}g=w||{}}}return v},stylesFromArray:function(n,a){if(!Array.isArray(n))return n;for(var f=a.split(`
`),o=-1,d=0,g={},v=0;v<f.length;v++)for(var _=0;_<f[v].length;_++)o++,n[d]&&n[d].start<=o&&o<n[d].end&&(g[v]=g[v]||{},g[v][_]=Object.assign({},n[d].style),o===n[d].end-1&&d++);return g}}}(t),function(){var u=Array.prototype.join,i={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},c={m:"l",M:"L"};function l(S,F,I,D,U,k,O,R,N,J,V){var ee=e.util.cos(S),ie=e.util.sin(S),E=e.util.cos(F),T=e.util.sin(F),P=I*U*E-D*k*T+O,L=D*U*E+I*k*T+R,B=J+N*(-I*U*ie-D*k*ee),j=V+N*(-D*U*ie+I*k*ee),H=P+N*(I*U*T+D*k*E),Y=L+N*(D*U*T-I*k*E);return["C",B,j,H,Y,P,L]}function r(S,F,I,D,U,k,O){var R=Math.PI,N=O*R/180,J=e.util.sin(N),V=e.util.cos(N),ee=0,ie=0;I=Math.abs(I),D=Math.abs(D);var E=-V*S*.5-J*F*.5,T=-V*F*.5+J*S*.5,P=I*I,L=D*D,B=T*T,j=E*E,H=P*L-P*B-L*j,Y=0;if(H<0){var Q=Math.sqrt(1-H/(P*L));I*=Q,D*=Q}else Y=(U===k?-1:1)*Math.sqrt(H/(P*B+L*j));var G=Y*I*T/D,W=-Y*D*E/I,Z=V*G-J*W+S*.5,ne=J*G+V*W+F*.5,ae=s(1,0,(E-G)/I,(T-W)/D),ce=s((E-G)/I,(T-W)/D,(-E-G)/I,(-T-W)/D);k===0&&ce>0?ce-=2*R:k===1&&ce<0&&(ce+=2*R);for(var ue=Math.ceil(Math.abs(ce/R*2)),he=[],de=ce/ue,Se=8/3*Math.sin(de/4)*Math.sin(de/4)/Math.sin(de/2),ze=ae+de,Be=0;Be<ue;Be++)he[Be]=l(ae,ze,V,J,I,D,Z,ne,Se,ee,ie),ee=he[Be][5],ie=he[Be][6],ae=ze,ze+=de;return he}function s(S,F,I,D){var U=Math.atan2(F,S),k=Math.atan2(D,I);return k>=U?k-U:2*Math.PI-(U-k)}function n(S,F,I,D,U,k,O,R){var N;if(e.cachesBoundsOfCurve&&(N=u.call(arguments),e.boundsOfCurveCache[N]))return e.boundsOfCurveCache[N];var J=Math.sqrt,V=Math.min,ee=Math.max,ie=Math.abs,E=[],T=[[],[]],P,L,B,j,H,Y,Q,G;L=6*S-12*I+6*U,P=-3*S+9*I-9*U+3*O,B=3*I-3*S;for(var W=0;W<2;++W){if(W>0&&(L=6*F-12*D+6*k,P=-3*F+9*D-9*k+3*R,B=3*D-3*F),ie(P)<1e-12){if(ie(L)<1e-12)continue;j=-B/L,0<j&&j<1&&E.push(j);continue}Q=L*L-4*B*P,!(Q<0)&&(G=J(Q),H=(-L+G)/(2*P),0<H&&H<1&&E.push(H),Y=(-L-G)/(2*P),0<Y&&Y<1&&E.push(Y))}for(var Z,ne,ae=E.length,ce=ae,ue;ae--;)j=E[ae],ue=1-j,Z=ue*ue*ue*S+3*ue*ue*j*I+3*ue*j*j*U+j*j*j*O,T[0][ae]=Z,ne=ue*ue*ue*F+3*ue*ue*j*D+3*ue*j*j*k+j*j*j*R,T[1][ae]=ne;T[0][ce]=S,T[1][ce]=F,T[0][ce+1]=O,T[1][ce+1]=R;var he=[{x:V.apply(null,T[0]),y:V.apply(null,T[1])},{x:ee.apply(null,T[0]),y:ee.apply(null,T[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[N]=he),he}function a(S,F,I){for(var D=I[1],U=I[2],k=I[3],O=I[4],R=I[5],N=I[6],J=I[7],V=r(N-S,J-F,D,U,O,R,k),ee=0,ie=V.length;ee<ie;ee++)V[ee][1]+=S,V[ee][2]+=F,V[ee][3]+=S,V[ee][4]+=F,V[ee][5]+=S,V[ee][6]+=F;return V}function f(S){var F=0,I=0,D=S.length,U=0,k=0,O,R,N,J=[],V,ee,ie;for(R=0;R<D;++R){switch(N=!1,O=S[R].slice(0),O[0]){case"l":O[0]="L",O[1]+=F,O[2]+=I;case"L":F=O[1],I=O[2];break;case"h":O[1]+=F;case"H":O[0]="L",O[2]=I,F=O[1];break;case"v":O[1]+=I;case"V":O[0]="L",I=O[1],O[1]=F,O[2]=I;break;case"m":O[0]="M",O[1]+=F,O[2]+=I;case"M":F=O[1],I=O[2],U=O[1],k=O[2];break;case"c":O[0]="C",O[1]+=F,O[2]+=I,O[3]+=F,O[4]+=I,O[5]+=F,O[6]+=I;case"C":ee=O[3],ie=O[4],F=O[5],I=O[6];break;case"s":O[0]="S",O[1]+=F,O[2]+=I,O[3]+=F,O[4]+=I;case"S":V==="C"?(ee=2*F-ee,ie=2*I-ie):(ee=F,ie=I),F=O[3],I=O[4],O[0]="C",O[5]=O[3],O[6]=O[4],O[3]=O[1],O[4]=O[2],O[1]=ee,O[2]=ie,ee=O[3],ie=O[4];break;case"q":O[0]="Q",O[1]+=F,O[2]+=I,O[3]+=F,O[4]+=I;case"Q":ee=O[1],ie=O[2],F=O[3],I=O[4];break;case"t":O[0]="T",O[1]+=F,O[2]+=I;case"T":V==="Q"?(ee=2*F-ee,ie=2*I-ie):(ee=F,ie=I),O[0]="Q",F=O[1],I=O[2],O[1]=ee,O[2]=ie,O[3]=F,O[4]=I;break;case"a":O[0]="A",O[6]+=F,O[7]+=I;case"A":N=!0,J=J.concat(a(F,I,O)),F=O[6],I=O[7];break;case"z":case"Z":F=U,I=k;break}N||J.push(O),V=O[0]}return J}function o(S,F,I,D){return Math.sqrt((I-S)*(I-S)+(D-F)*(D-F))}function d(S){return S*S*S}function g(S){return 3*S*S*(1-S)}function v(S){return 3*S*(1-S)*(1-S)}function _(S){return(1-S)*(1-S)*(1-S)}function b(S,F,I,D,U,k,O,R){return function(N){var J=d(N),V=g(N),ee=v(N),ie=_(N);return{x:O*J+U*V+I*ee+S*ie,y:R*J+k*V+D*ee+F*ie}}}function w(S,F,I,D,U,k,O,R){return function(N){var J=1-N,V=3*J*J*(I-S)+6*J*N*(U-I)+3*N*N*(O-U),ee=3*J*J*(D-F)+6*J*N*(k-D)+3*N*N*(R-k);return Math.atan2(ee,V)}}function x(S){return S*S}function A(S){return 2*S*(1-S)}function M(S){return(1-S)*(1-S)}function X(S,F,I,D,U,k){return function(O){var R=x(O),N=A(O),J=M(O);return{x:U*R+I*N+S*J,y:k*R+D*N+F*J}}}function z(S,F,I,D,U,k){return function(O){var R=1-O,N=2*R*(I-S)+2*O*(U-I),J=2*R*(D-F)+2*O*(k-D);return Math.atan2(J,N)}}function $(S,F,I){var D={x:F,y:I},U,k=0,O;for(O=1;O<=100;O+=1)U=S(O/100),k+=o(D.x,D.y,U.x,U.y),D=U;return k}function q(S,F){for(var I=0,D=0,U=S.iterator,k={x:S.x,y:S.y},O,R,N=.01,J=S.angleFinder,V;D<F&&N>1e-4;)O=U(I),V=I,R=o(k.x,k.y,O.x,O.y),R+D>F?(I-=N,N/=2):(k=O,I+=N,D+=R);return O.angle=J(V),O}function K(S){for(var F=0,I=S.length,D,U=0,k=0,O=0,R=0,N=[],J,V,ee,ie=0;ie<I;ie++){switch(D=S[ie],V={x:U,y:k,command:D[0]},D[0]){case"M":V.length=0,O=U=D[1],R=k=D[2];break;case"L":V.length=o(U,k,D[1],D[2]),U=D[1],k=D[2];break;case"C":J=b(U,k,D[1],D[2],D[3],D[4],D[5],D[6]),ee=w(U,k,D[1],D[2],D[3],D[4],D[5],D[6]),V.iterator=J,V.angleFinder=ee,V.length=$(J,U,k),U=D[5],k=D[6];break;case"Q":J=X(U,k,D[1],D[2],D[3],D[4]),ee=z(U,k,D[1],D[2],D[3],D[4]),V.iterator=J,V.angleFinder=ee,V.length=$(J,U,k),U=D[3],k=D[4];break;case"Z":case"z":V.destX=O,V.destY=R,V.length=o(U,k,O,R),U=O,k=R;break}F+=V.length,N.push(V)}return N.push({length:F,x:U,y:k}),N}function te(S,F,I){I||(I=K(S));for(var D=0;F-I[D].length>0&&D<I.length-2;)F-=I[D].length,D++;var U=I[D],k=F/U.length,O=U.command,R=S[D],N;switch(O){case"M":return{x:U.x,y:U.y,angle:0};case"Z":case"z":return N=new e.Point(U.x,U.y).lerp(new e.Point(U.destX,U.destY),k),N.angle=Math.atan2(U.destY-U.y,U.destX-U.x),N;case"L":return N=new e.Point(U.x,U.y).lerp(new e.Point(R[1],R[2]),k),N.angle=Math.atan2(R[2]-U.y,R[1]-U.x),N;case"C":return q(U,F);case"Q":return q(U,F)}}function re(S){var F=[],I=[],D,U,k=e.rePathCommand,O="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",R="("+O+")"+e.commaWsp,N="([01])"+e.commaWsp+"?",J=R+"?"+R+"?"+R+N+N+R+"?("+O+")",V=new RegExp(J,"g"),ee,ie,E;if(!S||!S.match)return F;E=S.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var T=0,P,L=E.length;T<L;T++){D=E[T],ie=D.slice(1).trim(),I.length=0;var B=D.charAt(0);if(P=[B],B.toLowerCase()==="a")for(var j;j=V.exec(ie);)for(var H=1;H<j.length;H++)I.push(j[H]);else for(;ee=k.exec(ie);)I.push(ee[0]);for(var H=0,Y=I.length;H<Y;H++)U=parseFloat(I[H]),isNaN(U)||P.push(U);var Q=i[B.toLowerCase()],G=c[B]||B;if(P.length-1>Q)for(var W=1,Z=P.length;W<Z;W+=Q)F.push([B].concat(P.slice(W,W+Q))),B=G;else F.push(P)}return F}function oe(S,F){var I=[],D,U=new e.Point(S[0].x,S[0].y),k=new e.Point(S[1].x,S[1].y),O=S.length,R=1,N=0,J=O>2;for(F=F||0,J&&(R=S[2].x<k.x?-1:S[2].x===k.x?0:1,N=S[2].y<k.y?-1:S[2].y===k.y?0:1),I.push(["M",U.x-R*F,U.y-N*F]),D=1;D<O;D++){if(!U.eq(k)){var V=U.midPointFrom(k);I.push(["Q",U.x,U.y,V.x,V.y])}U=S[D],D+1<S.length&&(k=S[D+1])}return J&&(R=U.x>S[D-2].x?1:U.x===S[D-2].x?0:-1,N=U.y>S[D-2].y?1:U.y===S[D-2].y?0:-1),I.push(["L",U.x+R*F,U.y+N*F]),I}function se(S,F,I){return I&&(F=e.util.multiplyTransformMatrices(F,[1,0,0,1,-I.x,-I.y])),S.map(function(D){for(var U=D.slice(0),k={},O=1;O<D.length-1;O+=2)k.x=D[O],k.y=D[O+1],k=e.util.transformPoint(k,F),U[O]=k.x,U[O+1]=k.y;return U})}e.util.joinPath=function(S){return S.map(function(F){return F.join(" ")}).join(" ")},e.util.parsePath=re,e.util.makePathSimpler=f,e.util.getSmoothPathFromPoints=oe,e.util.getPathSegmentsInfo=K,e.util.getBoundsOfCurve=n,e.util.getPointOnPath=te,e.util.transformPath=se}(),function(){var u=Array.prototype.slice;function i(n,a){for(var f=u.call(arguments,2),o=[],d=0,g=n.length;d<g;d++)o[d]=f.length?n[d][a].apply(n[d],f):n[d][a].call(n[d]);return o}function c(n,a){return s(n,a,function(f,o){return f>=o})}function l(n,a){return s(n,a,function(f,o){return f<o})}function r(n,a){for(var f=n.length;f--;)n[f]=a;return n}function s(n,a,f){if(!(!n||n.length===0)){var o=n.length-1,d=a?n[o][a]:n[o];if(a)for(;o--;)f(n[o][a],d)&&(d=n[o][a]);else for(;o--;)f(n[o],d)&&(d=n[o]);return d}}e.util.array={fill:r,invoke:i,min:l,max:c}}(),function(){function u(c,l,r){if(r)if(!e.isLikelyNode&&l instanceof Element)c=l;else if(l instanceof Array){c=[];for(var s=0,n=l.length;s<n;s++)c[s]=u({},l[s],r)}else if(l&&typeof l=="object")for(var a in l)a==="canvas"||a==="group"?c[a]=null:l.hasOwnProperty(a)&&(c[a]=u({},l[a],r));else c=l;else for(var a in l)c[a]=l[a];return c}function i(c,l){return u({},c,l)}e.util.object={extend:u,clone:i},e.util.object.extend(e.util,e.Observable)}(),function(){function u(s){return s.replace(/-+(.)?/g,function(n,a){return a?a.toUpperCase():""})}function i(s,n){return s.charAt(0).toUpperCase()+(n?s.slice(1):s.slice(1).toLowerCase())}function c(s){return s.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(s){var n=0,a,f=[];for(n=0,a;n<s.length;n++)(a=r(s,n))!==!1&&f.push(a);return f}function r(s,n){var a=s.charCodeAt(n);if(isNaN(a))return"";if(a<55296||a>57343)return s.charAt(n);if(55296<=a&&a<=56319){if(s.length<=n+1)throw"High surrogate without following low surrogate";var f=s.charCodeAt(n+1);if(56320>f||f>57343)throw"High surrogate without following low surrogate";return s.charAt(n)+s.charAt(n+1)}if(n===0)throw"Low surrogate without preceding high surrogate";var o=s.charCodeAt(n-1);if(55296>o||o>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:u,capitalize:i,escapeXml:c,graphemeSplit:l}}(),function(){var u=Array.prototype.slice,i=function(){},c=function(){for(var a in{toString:1})if(a==="toString")return!1;return!0}(),l=function(a,f,o){for(var d in f)d in a.prototype&&typeof a.prototype[d]=="function"&&(f[d]+"").indexOf("callSuper")>-1?a.prototype[d]=function(g){return function(){var v=this.constructor.superclass;this.constructor.superclass=o;var _=f[g].apply(this,arguments);if(this.constructor.superclass=v,g!=="initialize")return _}}(d):a.prototype[d]=f[d],c&&(f.toString!==Object.prototype.toString&&(a.prototype.toString=f.toString),f.valueOf!==Object.prototype.valueOf&&(a.prototype.valueOf=f.valueOf))};function r(){}function s(a){for(var f=null,o=this;o.constructor.superclass;){var d=o.constructor.superclass.prototype[a];if(o[a]!==d){f=d;break}o=o.constructor.superclass.prototype}return f?arguments.length>1?f.apply(this,u.call(arguments,1)):f.call(this):console.log("tried to callSuper "+a+", method not found in prototype chain",this)}function n(){var a=null,f=u.call(arguments,0);typeof f[0]=="function"&&(a=f.shift());function o(){this.initialize.apply(this,arguments)}o.superclass=a,o.subclasses=[],a&&(r.prototype=a.prototype,o.prototype=new r,a.subclasses.push(o));for(var d=0,g=f.length;d<g;d++)l(o,f[d],a);return o.prototype.initialize||(o.prototype.initialize=i),o.prototype.constructor=o,o.prototype.callSuper=s,o}e.util.createClass=n}(),function(){var u=!!e.document.createElement("div").attachEvent,i=["touchstart","touchmove","touchend"];e.util.addListener=function(l,r,s,n){l&&l.addEventListener(r,s,u?!1:n)},e.util.removeListener=function(l,r,s,n){l&&l.removeEventListener(r,s,u?!1:n)};function c(l){var r=l.changedTouches;return r&&r[0]?r[0]:l}e.util.getPointer=function(l){var r=l.target,s=e.util.getScrollLeftTop(r),n=c(l);return{x:n.clientX+s.left,y:n.clientY+s.top}},e.util.isTouchEvent=function(l){return i.indexOf(l.type)>-1||l.pointerType==="touch"}}(),function(){function u(n,a){var f=n.style;if(!f)return n;if(typeof a=="string")return n.style.cssText+=";"+a,a.indexOf("opacity")>-1?s(n,a.match(/opacity:\s*(\d?\.?\d*)/)[1]):n;for(var o in a)if(o==="opacity")s(n,a[o]);else{var d=o==="float"||o==="cssFloat"?typeof f.styleFloat>"u"?"cssFloat":"styleFloat":o;f.setProperty(d,a[o])}return n}var i=e.document.createElement("div"),c=typeof i.style.opacity=="string",l=typeof i.style.filter=="string",r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(n){return n};c?s=function(n,a){return n.style.opacity=a,n}:l&&(s=function(n,a){var f=n.style;return n.currentStyle&&!n.currentStyle.hasLayout&&(f.zoom=1),r.test(f.filter)?(a=a>=.9999?"":"alpha(opacity="+a*100+")",f.filter=f.filter.replace(r,a)):f.filter+=" alpha(opacity="+a*100+")",n}),e.util.setStyle=u}(),function(){var u=Array.prototype.slice;function i(_){return typeof _=="string"?e.document.getElementById(_):_}var c,l=function(_){return u.call(_,0)};try{c=l(e.document.childNodes)instanceof Array}catch{}c||(l=function(_){for(var b=new Array(_.length),w=_.length;w--;)b[w]=_[w];return b});function r(_,b){var w=e.document.createElement(_);for(var x in b)x==="class"?w.className=b[x]:x==="for"?w.htmlFor=b[x]:w.setAttribute(x,b[x]);return w}function s(_,b){_&&(" "+_.className+" ").indexOf(" "+b+" ")===-1&&(_.className+=(_.className?" ":"")+b)}function n(_,b,w){return typeof b=="string"&&(b=r(b,w)),_.parentNode&&_.parentNode.replaceChild(b,_),b.appendChild(_),b}function a(_){for(var b=0,w=0,x=e.document.documentElement,A=e.document.body||{scrollLeft:0,scrollTop:0};_&&(_.parentNode||_.host)&&(_=_.parentNode||_.host,_===e.document?(b=A.scrollLeft||x.scrollLeft||0,w=A.scrollTop||x.scrollTop||0):(b+=_.scrollLeft||0,w+=_.scrollTop||0),!(_.nodeType===1&&_.style.position==="fixed")););return{left:b,top:w}}function f(_){var b,w=_&&_.ownerDocument,x={left:0,top:0},A={left:0,top:0},M,X={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!w)return A;for(var z in X)A[X[z]]+=parseInt(o(_,z),10)||0;return b=w.documentElement,typeof _.getBoundingClientRect<"u"&&(x=_.getBoundingClientRect()),M=a(_),{left:x.left+M.left-(b.clientLeft||0)+A.left,top:x.top+M.top-(b.clientTop||0)+A.top}}var o;e.document.defaultView&&e.document.defaultView.getComputedStyle?o=function(_,b){var w=e.document.defaultView.getComputedStyle(_,null);return w?w[b]:void 0}:o=function(_,b){var w=_.style[b];return!w&&_.currentStyle&&(w=_.currentStyle[b]),w},function(){var _=e.document.documentElement.style,b="userSelect"in _?"userSelect":"MozUserSelect"in _?"MozUserSelect":"WebkitUserSelect"in _?"WebkitUserSelect":"KhtmlUserSelect"in _?"KhtmlUserSelect":"";function w(A){return typeof A.onselectstart<"u"&&(A.onselectstart=e.util.falseFunction),b?A.style[b]="none":typeof A.unselectable=="string"&&(A.unselectable="on"),A}function x(A){return typeof A.onselectstart<"u"&&(A.onselectstart=null),b?A.style[b]="":typeof A.unselectable=="string"&&(A.unselectable=""),A}e.util.makeElementUnselectable=w,e.util.makeElementSelectable=x}();function d(_){var b=e.jsdomImplForWrapper(_);return b._canvas||b._image}function g(_){if(e.isLikelyNode){var b=e.jsdomImplForWrapper(_);b&&(b._image=null,b._canvas=null,b._currentSrc=null,b._attributes=null,b._classList=null)}}function v(_,b){_.imageSmoothingEnabled=_.imageSmoothingEnabled||_.webkitImageSmoothingEnabled||_.mozImageSmoothingEnabled||_.msImageSmoothingEnabled||_.oImageSmoothingEnabled,_.imageSmoothingEnabled=b}e.util.setImageSmoothing=v,e.util.getById=i,e.util.toArray=l,e.util.addClass=s,e.util.makeElement=r,e.util.wrapElement=n,e.util.getScrollLeftTop=a,e.util.getElementOffset=f,e.util.getNodeCanvas=d,e.util.cleanUpJsdomNode=g}(),function(){function u(l,r){return l+(/\?/.test(l)?"&":"?")+r}function i(){}function c(l,r){r||(r={});var s=r.method?r.method.toUpperCase():"GET",n=r.onComplete||function(){},a=new e.window.XMLHttpRequest,f=r.body||r.parameters;return a.onreadystatechange=function(){a.readyState===4&&(n(a),a.onreadystatechange=i)},s==="GET"&&(f=null,typeof r.parameters=="string"&&(l=u(l,r.parameters))),a.open(s,l,!0),(s==="POST"||s==="PUT")&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(f),a}e.util.request=c}(),e.log=console.log,e.warn=console.warn,function(){var u=e.util.object.extend,i=e.util.object.clone,c=[];e.util.object.extend(c,{cancelAll:function(){var d=this.splice(0);return d.forEach(function(g){g.cancel()}),d},cancelByCanvas:function(d){if(!d)return[];var g=this.filter(function(v){return typeof v.target=="object"&&v.target.canvas===d});return g.forEach(function(v){v.cancel()}),g},cancelByTarget:function(d){var g=this.findAnimationsByTarget(d);return g.forEach(function(v){v.cancel()}),g},findAnimationIndex:function(d){return this.indexOf(this.findAnimation(d))},findAnimation:function(d){return this.find(function(g){return g.cancel===d})},findAnimationsByTarget:function(d){return d?this.filter(function(g){return g.target===d}):[]}});function l(){return!1}function r(d,g,v,_){return-v*Math.cos(d/_*(Math.PI/2))+v+g}function s(d){d||(d={});var g=!1,v,_=function(){var b=e.runningAnimations.indexOf(v);return b>-1&&e.runningAnimations.splice(b,1)[0]};return v=u(i(d),{cancel:function(){return g=!0,_()},currentValue:"startValue"in d?d.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(v),f(function(b){var w=b||+new Date,x=d.duration||500,A=w+x,M,X=d.onChange||l,z=d.abort||l,$=d.onComplete||l,q=d.easing||r,K="startValue"in d?d.startValue.length>0:!1,te="startValue"in d?d.startValue:0,re="endValue"in d?d.endValue:100,oe=d.byValue||(K?te.map(function(se,S){return re[S]-te[S]}):re-te);d.onStart&&d.onStart(),function se(S){M=S||+new Date;var F=M>A?x:M-w,I=F/x,D=K?te.map(function(k,O){return q(F,te[O],oe[O],x)}):q(F,te,oe,x),U=Math.abs(K?(D[0]-te[0])/oe[0]:(D-te)/oe);if(v.currentValue=K?D.slice():D,v.completionRate=U,v.durationRate=I,!g){if(z(D,U,I)){_();return}if(M>A){v.currentValue=K?re.slice():re,v.completionRate=1,v.durationRate=1,X(K?re.slice():re,1,1),$(re,1,1),_();return}else X(D,U,I),f(se)}}(w)}),v.cancel}var n=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(d){return e.window.setTimeout(d,1e3/60)},a=e.window.cancelAnimationFrame||e.window.clearTimeout;function f(){return n.apply(e.window,arguments)}function o(){return a.apply(e.window,arguments)}e.util.animate=s,e.util.requestAnimFrame=f,e.util.cancelAnimFrame=o,e.runningAnimations=c}(),function(){function u(c,l,r){var s="rgba("+parseInt(c[0]+r*(l[0]-c[0]),10)+","+parseInt(c[1]+r*(l[1]-c[1]),10)+","+parseInt(c[2]+r*(l[2]-c[2]),10);return s+=","+(c&&l?parseFloat(c[3]+r*(l[3]-c[3])):1),s+=")",s}function i(c,l,r,s){var n=new e.Color(c).getSource(),a=new e.Color(l).getSource(),f=s.onComplete,o=s.onChange;return s=s||{},e.util.animate(e.util.object.extend(s,{duration:r||500,startValue:n,endValue:a,byValue:a,easing:function(d,g,v,_){var b=s.colorEasing?s.colorEasing(d,_):1-Math.cos(d/_*(Math.PI/2));return u(g,v,b)},onComplete:function(d,g,v){if(f)return f(u(a,a,0),g,v)},onChange:function(d,g,v){if(o){if(Array.isArray(d))return o(u(d,d,0),g,v);o(d,g,v)}}}))}e.util.animateColor=i}(),function(){function u(S,F,I,D){return S<Math.abs(F)?(S=F,D=I/4):F===0&&S===0?D=I/(2*Math.PI)*Math.asin(1):D=I/(2*Math.PI)*Math.asin(F/S),{a:S,c:F,p:I,s:D}}function i(S,F,I){return S.a*Math.pow(2,10*(F-=1))*Math.sin((F*I-S.s)*(2*Math.PI)/S.p)}function c(S,F,I,D){return I*((S=S/D-1)*S*S+1)+F}function l(S,F,I,D){return S/=D/2,S<1?I/2*S*S*S+F:I/2*((S-=2)*S*S+2)+F}function r(S,F,I,D){return I*(S/=D)*S*S*S+F}function s(S,F,I,D){return-I*((S=S/D-1)*S*S*S-1)+F}function n(S,F,I,D){return S/=D/2,S<1?I/2*S*S*S*S+F:-I/2*((S-=2)*S*S*S-2)+F}function a(S,F,I,D){return I*(S/=D)*S*S*S*S+F}function f(S,F,I,D){return I*((S=S/D-1)*S*S*S*S+1)+F}function o(S,F,I,D){return S/=D/2,S<1?I/2*S*S*S*S*S+F:I/2*((S-=2)*S*S*S*S+2)+F}function d(S,F,I,D){return-I*Math.cos(S/D*(Math.PI/2))+I+F}function g(S,F,I,D){return I*Math.sin(S/D*(Math.PI/2))+F}function v(S,F,I,D){return-I/2*(Math.cos(Math.PI*S/D)-1)+F}function _(S,F,I,D){return S===0?F:I*Math.pow(2,10*(S/D-1))+F}function b(S,F,I,D){return S===D?F+I:I*(-Math.pow(2,-10*S/D)+1)+F}function w(S,F,I,D){return S===0?F:S===D?F+I:(S/=D/2,S<1?I/2*Math.pow(2,10*(S-1))+F:I/2*(-Math.pow(2,-10*--S)+2)+F)}function x(S,F,I,D){return-I*(Math.sqrt(1-(S/=D)*S)-1)+F}function A(S,F,I,D){return I*Math.sqrt(1-(S=S/D-1)*S)+F}function M(S,F,I,D){return S/=D/2,S<1?-I/2*(Math.sqrt(1-S*S)-1)+F:I/2*(Math.sqrt(1-(S-=2)*S)+1)+F}function X(S,F,I,D){var U=1.70158,k=0,O=I;if(S===0)return F;if(S/=D,S===1)return F+I;k||(k=D*.3);var R=u(O,I,k,U);return-i(R,S,D)+F}function z(S,F,I,D){var U=1.70158,k=0,O=I;if(S===0)return F;if(S/=D,S===1)return F+I;k||(k=D*.3);var R=u(O,I,k,U);return R.a*Math.pow(2,-10*S)*Math.sin((S*D-R.s)*(2*Math.PI)/R.p)+R.c+F}function $(S,F,I,D){var U=1.70158,k=0,O=I;if(S===0)return F;if(S/=D/2,S===2)return F+I;k||(k=D*(.3*1.5));var R=u(O,I,k,U);return S<1?-.5*i(R,S,D)+F:R.a*Math.pow(2,-10*(S-=1))*Math.sin((S*D-R.s)*(2*Math.PI)/R.p)*.5+R.c+F}function q(S,F,I,D,U){return U===void 0&&(U=1.70158),I*(S/=D)*S*((U+1)*S-U)+F}function K(S,F,I,D,U){return U===void 0&&(U=1.70158),I*((S=S/D-1)*S*((U+1)*S+U)+1)+F}function te(S,F,I,D,U){return U===void 0&&(U=1.70158),S/=D/2,S<1?I/2*(S*S*(((U*=1.525)+1)*S-U))+F:I/2*((S-=2)*S*(((U*=1.525)+1)*S+U)+2)+F}function re(S,F,I,D){return I-oe(D-S,0,I,D)+F}function oe(S,F,I,D){return(S/=D)<1/2.75?I*(7.5625*S*S)+F:S<2/2.75?I*(7.5625*(S-=1.5/2.75)*S+.75)+F:S<2.5/2.75?I*(7.5625*(S-=2.25/2.75)*S+.9375)+F:I*(7.5625*(S-=2.625/2.75)*S+.984375)+F}function se(S,F,I,D){return S<D/2?re(S*2,0,I,D)*.5+F:oe(S*2-D,0,I,D)*.5+I*.5+F}e.util.ease={easeInQuad:function(S,F,I,D){return I*(S/=D)*S+F},easeOutQuad:function(S,F,I,D){return-I*(S/=D)*(S-2)+F},easeInOutQuad:function(S,F,I,D){return S/=D/2,S<1?I/2*S*S+F:-I/2*(--S*(S-2)-1)+F},easeInCubic:function(S,F,I,D){return I*(S/=D)*S*S+F},easeOutCubic:c,easeInOutCubic:l,easeInQuart:r,easeOutQuart:s,easeInOutQuart:n,easeInQuint:a,easeOutQuint:f,easeInOutQuint:o,easeInSine:d,easeOutSine:g,easeInOutSine:v,easeInExpo:_,easeOutExpo:b,easeInOutExpo:w,easeInCirc:x,easeOutCirc:A,easeInOutCirc:M,easeInElastic:X,easeOutElastic:z,easeInOutElastic:$,easeInBack:q,easeOutBack:K,easeInOutBack:te,easeInBounce:re,easeOutBounce:oe,easeInOutBounce:se}}(),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.extend,l=i.util.object.clone,r=i.util.toFixed,s=i.util.parseUnit,n=i.util.multiplyTransformMatrices,a=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],f=["symbol","image","marker","pattern","view","svg"],o=["pattern","defs","symbol","metadata","clipPath","mask","desc"],d=["symbol","g","a","svg","clipPath","defs"],g={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},v={stroke:"strokeOpacity",fill:"fillOpacity"},_="font-size",b="clip-path";i.svgValidTagNamesRegEx=A(a),i.svgViewBoxElementsRegEx=A(f),i.svgInvalidAncestorsRegEx=A(o),i.svgValidParentsRegEx=A(d),i.cssRules={},i.gradientDefs={},i.clipPaths={};function w(k){return k in g?g[k]:k}function x(k,O,R,N){var J=Array.isArray(O),V;if((k==="fill"||k==="stroke")&&O==="none")O="";else{if(k==="strokeUniform")return O==="non-scaling-stroke";if(k==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(k==="transformMatrix")R&&R.transformMatrix?O=n(R.transformMatrix,i.parseTransformAttribute(O)):O=i.parseTransformAttribute(O);else if(k==="visible")O=O!=="none"&&O!=="hidden",R&&R.visible===!1&&(O=!1);else if(k==="opacity")O=parseFloat(O),R&&typeof R.opacity<"u"&&(O*=R.opacity);else if(k==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(k==="charSpacing")V=s(O,N)/N*1e3;else if(k==="paintFirst"){var ee=O.indexOf("fill"),ie=O.indexOf("stroke"),O="fill";(ee>-1&&ie>-1&&ie<ee||ee===-1&&ie>-1)&&(O="stroke")}else{if(k==="href"||k==="xlink:href"||k==="font")return O;if(k==="imageSmoothing")return O==="optimizeQuality";V=J?O.map(s):s(O,N)}}return!J&&isNaN(V)?O:V}function A(k){return new RegExp("^("+k.join("|")+")\\b","i")}function M(k){for(var O in v)if(!(typeof k[v[O]]>"u"||k[O]==="")){if(typeof k[O]>"u"){if(!i.Object.prototype[O])continue;k[O]=i.Object.prototype[O]}if(k[O].indexOf("url(")!==0){var R=new i.Color(k[O]);k[O]=R.setAlpha(r(R.getAlpha()*k[v[O]],2)).toRgba()}}return k}function X(k,O){var R,N=[],J,V,ee;for(V=0,ee=O.length;V<ee;V++)R=O[V],J=k.getElementsByTagName(R),N=N.concat(Array.prototype.slice.call(J));return N}i.parseTransformAttribute=function(){function k(W,Z){var ne=i.util.cos(Z[0]),ae=i.util.sin(Z[0]),ce=0,ue=0;Z.length===3&&(ce=Z[1],ue=Z[2]),W[0]=ne,W[1]=ae,W[2]=-ae,W[3]=ne,W[4]=ce-(ne*ce-ae*ue),W[5]=ue-(ae*ce+ne*ue)}function O(W,Z){var ne=Z[0],ae=Z.length===2?Z[1]:Z[0];W[0]=ne,W[3]=ae}function R(W,Z,ne){W[ne]=Math.tan(i.util.degreesToRadians(Z[0]))}function N(W,Z){W[4]=Z[0],Z.length===2&&(W[5]=Z[1])}var J=i.iMatrix,V=i.reNum,ee=i.commaWsp,ie="(?:(skewX)\\s*\\(\\s*("+V+")\\s*\\))",E="(?:(skewY)\\s*\\(\\s*("+V+")\\s*\\))",T="(?:(rotate)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+")"+ee+"("+V+"))?\\s*\\))",P="(?:(scale)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+"))?\\s*\\))",L="(?:(translate)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+"))?\\s*\\))",B="(?:(matrix)\\s*\\(\\s*("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")\\s*\\))",j="(?:"+B+"|"+L+"|"+P+"|"+T+"|"+ie+"|"+E+")",H="(?:"+j+"(?:"+ee+"*"+j+")*)",Y="^\\s*(?:"+H+"?)\\s*$",Q=new RegExp(Y),G=new RegExp(j,"g");return function(W){var Z=J.concat(),ne=[];if(!W||W&&!Q.test(W))return Z;W.replace(G,function(ce){var ue=new RegExp(j).exec(ce).filter(function(Se){return!!Se}),he=ue[1],de=ue.slice(2).map(parseFloat);switch(he){case"translate":N(Z,de);break;case"rotate":de[0]=i.util.degreesToRadians(de[0]),k(Z,de);break;case"scale":O(Z,de);break;case"skewX":R(Z,de,2);break;case"skewY":R(Z,de,1);break;case"matrix":Z=de;break}ne.push(Z.concat()),Z=J.concat()});for(var ae=ne[0];ne.length>1;)ne.shift(),ae=i.util.multiplyTransformMatrices(ae,ne[0]);return ae}}();function z(k,O){var R,N;k.replace(/;\s*$/,"").split(";").forEach(function(J){var V=J.split(":");R=V[0].trim().toLowerCase(),N=V[1].trim(),O[R]=N})}function $(k,O){var R,N;for(var J in k)typeof k[J]>"u"||(R=J.toLowerCase(),N=k[J],O[R]=N)}function q(k,O){var R={};for(var N in i.cssRules[O])if(K(k,N.split(" ")))for(var J in i.cssRules[O][N])R[J]=i.cssRules[O][N][J];return R}function K(k,O){var R,N=!0;return R=re(k,O.pop()),R&&O.length&&(N=te(k,O)),R&&N&&O.length===0}function te(k,O){for(var R,N=!0;k.parentNode&&k.parentNode.nodeType===1&&O.length;)N&&(R=O.pop()),k=k.parentNode,N=re(k,R);return O.length===0}function re(k,O){var R=k.nodeName,N=k.getAttribute("class"),J=k.getAttribute("id"),V,ee;if(V=new RegExp("^"+R,"i"),O=O.replace(V,""),J&&O.length&&(V=new RegExp("#"+J+"(?![a-zA-Z\\-]+)","i"),O=O.replace(V,"")),N&&O.length)for(N=N.split(" "),ee=N.length;ee--;)V=new RegExp("\\."+N[ee]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(V,"");return O.length===0}function oe(k,O){var R;if(k.getElementById&&(R=k.getElementById(O)),R)return R;var N,J,V,ee=k.getElementsByTagName("*");for(J=0,V=ee.length;J<V;J++)if(N=ee[J],O===N.getAttribute("id"))return N}function se(k){for(var O=X(k,["use","svg:use"]),R=0;O.length&&R<O.length;){var N=O[R],J=N.getAttribute("xlink:href")||N.getAttribute("href");if(J===null)return;var V=J.slice(1),ee=N.getAttribute("x")||0,ie=N.getAttribute("y")||0,E=oe(k,V).cloneNode(!0),T=(E.getAttribute("transform")||"")+" translate("+ee+", "+ie+")",P,L=O.length,B,j,H,Y,Q=i.svgNS;if(F(E),/^svg$/i.test(E.nodeName)){var G=E.ownerDocument.createElementNS(Q,"g");for(j=0,H=E.attributes,Y=H.length;j<Y;j++)B=H.item(j),G.setAttributeNS(Q,B.nodeName,B.nodeValue);for(;E.firstChild;)G.appendChild(E.firstChild);E=G}for(j=0,H=N.attributes,Y=H.length;j<Y;j++)B=H.item(j),!(B.nodeName==="x"||B.nodeName==="y"||B.nodeName==="xlink:href"||B.nodeName==="href")&&(B.nodeName==="transform"?T=B.nodeValue+" "+T:E.setAttribute(B.nodeName,B.nodeValue));E.setAttribute("transform",T),E.setAttribute("instantiated_by_use","1"),E.removeAttribute("id"),P=N.parentNode,P.replaceChild(E,N),O.length===L&&R++}}var S=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function F(k){if(!i.svgViewBoxElementsRegEx.test(k.nodeName))return{};var O=k.getAttribute("viewBox"),R=1,N=1,J=0,V=0,ee,ie,E,T,P=k.getAttribute("width"),L=k.getAttribute("height"),B=k.getAttribute("x")||0,j=k.getAttribute("y")||0,H=k.getAttribute("preserveAspectRatio")||"",Y=!O||!(O=O.match(S)),Q=!P||!L||P==="100%"||L==="100%",G=Y&&Q,W={},Z="",ne=0,ae=0;if(W.width=0,W.height=0,W.toBeParsed=G,Y&&(B||j)&&k.parentNode&&k.parentNode.nodeName!=="#document"&&(Z=" translate("+s(B)+" "+s(j)+") ",E=(k.getAttribute("transform")||"")+Z,k.setAttribute("transform",E),k.removeAttribute("x"),k.removeAttribute("y")),G)return W;if(Y)return W.width=s(P),W.height=s(L),W;if(J=-parseFloat(O[1]),V=-parseFloat(O[2]),ee=parseFloat(O[3]),ie=parseFloat(O[4]),W.minX=J,W.minY=V,W.viewBoxWidth=ee,W.viewBoxHeight=ie,Q?(W.width=ee,W.height=ie):(W.width=s(P),W.height=s(L),R=W.width/ee,N=W.height/ie),H=i.util.parsePreserveAspectRatioAttribute(H),H.alignX!=="none"&&(H.meetOrSlice==="meet"&&(N=R=R>N?N:R),H.meetOrSlice==="slice"&&(N=R=R>N?R:N),ne=W.width-ee*R,ae=W.height-ie*R,H.alignX==="Mid"&&(ne/=2),H.alignY==="Mid"&&(ae/=2),H.alignX==="Min"&&(ne=0),H.alignY==="Min"&&(ae=0)),R===1&&N===1&&J===0&&V===0&&B===0&&j===0)return W;if((B||j)&&k.parentNode.nodeName!=="#document"&&(Z=" translate("+s(B)+" "+s(j)+") "),E=Z+" matrix("+R+" 0 0 "+N+" "+(J*R+ne)+" "+(V*N+ae)+") ",k.nodeName==="svg"){for(T=k.ownerDocument.createElementNS(i.svgNS,"g");k.firstChild;)T.appendChild(k.firstChild);k.appendChild(T)}else T=k,T.removeAttribute("x"),T.removeAttribute("y"),E=T.getAttribute("transform")+E;return T.setAttribute("transform",E),W}function I(k,O){for(;k&&(k=k.parentNode);)if(k.nodeName&&O.test(k.nodeName.replace("svg:",""))&&!k.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(k,O,R,N){if(k){se(k);var J=i.Object.__uid++,V,ee,ie=F(k),E=i.util.toArray(k.getElementsByTagName("*"));if(ie.crossOrigin=N&&N.crossOrigin,ie.svgUid=J,E.length===0&&i.isLikelyNode){E=k.selectNodes('//*[name(.)!="svg"]');var T=[];for(V=0,ee=E.length;V<ee;V++)T[V]=E[V];E=T}var P=E.filter(function(B){return F(B),i.svgValidTagNamesRegEx.test(B.nodeName.replace("svg:",""))&&!I(B,i.svgInvalidAncestorsRegEx)});if(!P||P&&!P.length){O&&O([],{});return}var L={};E.filter(function(B){return B.nodeName.replace("svg:","")==="clipPath"}).forEach(function(B){var j=B.getAttribute("id");L[j]=i.util.toArray(B.getElementsByTagName("*")).filter(function(H){return i.svgValidTagNamesRegEx.test(H.nodeName.replace("svg:",""))})}),i.gradientDefs[J]=i.getGradientDefs(k),i.cssRules[J]=i.getCSSRules(k),i.clipPaths[J]=L,i.parseElements(P,function(B,j){O&&(O(B,ie,j,E),delete i.gradientDefs[J],delete i.cssRules[J],delete i.clipPaths[J])},l(ie),R,N)}};function D(k,O){var R=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],N="xlink:href",J=O.getAttribute(N).slice(1),V=oe(k,J);if(V&&V.getAttribute(N)&&D(k,V),R.forEach(function(ie){V&&!O.hasAttribute(ie)&&V.hasAttribute(ie)&&O.setAttribute(ie,V.getAttribute(ie))}),!O.children.length)for(var ee=V.cloneNode(!0);ee.firstChild;)O.appendChild(ee.firstChild);O.removeAttribute(N)}var U=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");c(i,{parseFontDeclaration:function(k,O){var R=k.match(U);if(R){var N=R[1],J=R[3],V=R[4],ee=R[5],ie=R[6];N&&(O.fontStyle=N),J&&(O.fontWeight=isNaN(parseFloat(J))?J:parseFloat(J)),V&&(O.fontSize=s(V)),ie&&(O.fontFamily=ie),ee&&(O.lineHeight=ee==="normal"?1:ee)}},getGradientDefs:function(k){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],R=X(k,O),N,J=0,V={};for(J=R.length;J--;)N=R[J],N.getAttribute("xlink:href")&&D(k,N),V[N.getAttribute("id")]=N;return V},parseAttributes:function(k,O,R){if(k){var N,J={},V,ee;typeof R>"u"&&(R=k.getAttribute("svgUid")),k.parentNode&&i.svgValidParentsRegEx.test(k.parentNode.nodeName)&&(J=i.parseAttributes(k.parentNode,O,R));var ie=O.reduce(function(H,Y){return N=k.getAttribute(Y),N&&(H[Y]=N),H},{}),E=c(q(k,R),i.parseStyleAttribute(k));ie=c(ie,E),E[b]&&k.setAttribute(b,E[b]),V=ee=J.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,ie[_]&&(ie[_]=V=s(ie[_],ee));var T,P,L={};for(var B in ie)T=w(B),P=x(T,ie[B],J,V),L[T]=P;L&&L.font&&i.parseFontDeclaration(L.font,L);var j=c(J,L);return i.svgValidParentsRegEx.test(k.nodeName)?j:M(j)}},parseElements:function(k,O,R,N,J){new i.ElementsParser(k,O,R,N,J).parse()},parseStyleAttribute:function(k){var O={},R=k.getAttribute("style");return R&&(typeof R=="string"?z(R,O):$(R,O)),O},parsePointsAttribute:function(k){if(!k)return null;k=k.replace(/,/g," ").trim(),k=k.split(/\s+/);var O=[],R,N;for(R=0,N=k.length;R<N;R+=2)O.push({x:parseFloat(k[R]),y:parseFloat(k[R+1])});return O},getCSSRules:function(k){var O=k.getElementsByTagName("style"),R,N,J={},V;for(R=0,N=O.length;R<N;R++){var ee=O[R].textContent;ee=ee.replace(/\/\*[\s\S]*?\*\//g,""),ee.trim()!==""&&(V=ee.split("}"),V=V.filter(function(ie){return ie.trim()}),V.forEach(function(ie){var E=ie.split("{"),T={},P=E[1].trim(),L=P.split(";").filter(function(Y){return Y.trim()});for(R=0,N=L.length;R<N;R++){var B=L[R].split(":"),j=B[0].trim(),H=B[1].trim();T[j]=H}ie=E[0].trim(),ie.split(",").forEach(function(Y){Y=Y.replace(/^svg/i,"").trim(),Y!==""&&(J[Y]?i.util.object.extend(J[Y],T):J[Y]=i.util.object.clone(T))})}))}return J},loadSVGFromURL:function(k,O,R,N){k=k.replace(/^\n\s*/,"").trim(),new i.util.request(k,{method:"get",onComplete:J});function J(V){var ee=V.responseXML;if(!ee||!ee.documentElement)return O&&O(null),!1;i.parseSVGDocument(ee.documentElement,function(ie,E,T,P){O&&O(ie,E,T,P)},R,N)}},loadSVGFromString:function(k,O,R,N){var J=new i.window.DOMParser,V=J.parseFromString(k.trim(),"text/xml");i.parseSVGDocument(V.documentElement,function(ee,ie,E,T){O(ee,ie,E,T)},R,N)}})}(t),e.ElementsParser=function(u,i,c,l,r,s){this.elements=u,this.callback=i,this.options=c,this.reviver=l,this.svgUid=c&&c.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},function(u){u.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},u.createObjects=function(){var i=this;this.elements.forEach(function(c,l){c.setAttribute("svgUid",i.svgUid),i.createObject(c,l)})},u.findTag=function(i){return e[e.util.string.capitalize(i.tagName.replace("svg:",""))]},u.createObject=function(i,c){var l=this.findTag(i);if(l&&l.fromElement)try{l.fromElement(i,this.createCallback(c,i),this.options)}catch(r){e.log(r)}else this.checkIfDone()},u.createCallback=function(i,c){var l=this;return function(r){var s;l.resolveGradient(r,c,"fill"),l.resolveGradient(r,c,"stroke"),r instanceof e.Image&&r._originalElement&&(s=r.parsePreserveAspectRatioAttribute(c)),r._removeTransformMatrix(s),l.resolveClipPath(r,c),l.reviver&&l.reviver(c,r),l.instances[i]=r,l.checkIfDone()}},u.extractPropertyDefinition=function(i,c,l){var r=i[c],s=this.regexUrl;if(s.test(r)){s.lastIndex=0;var n=s.exec(r)[1];return s.lastIndex=0,e[l][this.svgUid][n]}},u.resolveGradient=function(i,c,l){var r=this.extractPropertyDefinition(i,l,"gradientDefs");if(r){var s=c.getAttribute(l+"-opacity"),n=e.Gradient.fromElement(r,i,s,this.options);i.set(l,n)}},u.createClipPathCallback=function(i,c){return function(l){l._removeTransformMatrix(),l.fillRule=l.clipRule,c.push(l)}},u.resolveClipPath=function(i,c){var l=this.extractPropertyDefinition(i,"clipPath","clipPaths"),r,s,n,a,f,o;if(l){a=[],n=e.util.invertTransform(i.calcTransformMatrix());for(var d=l[0].parentNode,g=c;g.parentNode&&g.getAttribute("clip-path")!==i.clipPath;)g=g.parentNode;g.parentNode.appendChild(d);for(var v=0;v<l.length;v++)r=l[v],s=this.findTag(r),s.fromElement(r,this.createClipPathCallback(i,a),this.options);a.length===1?l=a[0]:l=new e.Group(a),f=e.util.multiplyTransformMatrices(n,l.calcTransformMatrix()),l.clipPath&&this.resolveClipPath(l,g);var o=e.util.qrDecompose(f);l.flipX=!1,l.flipY=!1,l.set("scaleX",o.scaleX),l.set("scaleY",o.scaleY),l.angle=o.angle,l.skewX=o.skewX,l.skewY=0,l.setPositionByOrigin({x:o.translateX,y:o.translateY},"center","center"),i.clipPath=l}else delete i.clipPath},u.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(u){var i=u.fabric||(u.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=c;function c(l,r){this.x=l,this.y=r}c.prototype={type:"point",constructor:c,add:function(l){return new c(this.x+l.x,this.y+l.y)},addEquals:function(l){return this.x+=l.x,this.y+=l.y,this},scalarAdd:function(l){return new c(this.x+l,this.y+l)},scalarAddEquals:function(l){return this.x+=l,this.y+=l,this},subtract:function(l){return new c(this.x-l.x,this.y-l.y)},subtractEquals:function(l){return this.x-=l.x,this.y-=l.y,this},scalarSubtract:function(l){return new c(this.x-l,this.y-l)},scalarSubtractEquals:function(l){return this.x-=l,this.y-=l,this},multiply:function(l){return new c(this.x*l,this.y*l)},multiplyEquals:function(l){return this.x*=l,this.y*=l,this},divide:function(l){return new c(this.x/l,this.y/l)},divideEquals:function(l){return this.x/=l,this.y/=l,this},eq:function(l){return this.x===l.x&&this.y===l.y},lt:function(l){return this.x<l.x&&this.y<l.y},lte:function(l){return this.x<=l.x&&this.y<=l.y},gt:function(l){return this.x>l.x&&this.y>l.y},gte:function(l){return this.x>=l.x&&this.y>=l.y},lerp:function(l,r){return typeof r>"u"&&(r=.5),r=Math.max(Math.min(1,r),0),new c(this.x+(l.x-this.x)*r,this.y+(l.y-this.y)*r)},distanceFrom:function(l){var r=this.x-l.x,s=this.y-l.y;return Math.sqrt(r*r+s*s)},midPointFrom:function(l){return this.lerp(l)},min:function(l){return new c(Math.min(this.x,l.x),Math.min(this.y,l.y))},max:function(l){return new c(Math.max(this.x,l.x),Math.max(this.y,l.y))},toString:function(){return this.x+","+this.y},setXY:function(l,r){return this.x=l,this.y=r,this},setX:function(l){return this.x=l,this},setY:function(l){return this.y=l,this},setFromPoint:function(l){return this.x=l.x,this.y=l.y,this},swap:function(l){var r=this.x,s=this.y;this.x=l.x,this.y=l.y,l.x=r,l.y=s},clone:function(){return new c(this.x,this.y)}}}(t),function(u){var i=u.fabric||(u.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function c(l){this.status=l,this.points=[]}i.Intersection=c,i.Intersection.prototype={constructor:c,appendPoint:function(l){return this.points.push(l),this},appendPoints:function(l){return this.points=this.points.concat(l),this}},i.Intersection.intersectLineLine=function(l,r,s,n){var a,f=(n.x-s.x)*(l.y-s.y)-(n.y-s.y)*(l.x-s.x),o=(r.x-l.x)*(l.y-s.y)-(r.y-l.y)*(l.x-s.x),d=(n.y-s.y)*(r.x-l.x)-(n.x-s.x)*(r.y-l.y);if(d!==0){var g=f/d,v=o/d;0<=g&&g<=1&&0<=v&&v<=1?(a=new c("Intersection"),a.appendPoint(new i.Point(l.x+g*(r.x-l.x),l.y+g*(r.y-l.y)))):a=new c}else f===0||o===0?a=new c("Coincident"):a=new c("Parallel");return a},i.Intersection.intersectLinePolygon=function(l,r,s){var n=new c,a=s.length,f,o,d,g;for(g=0;g<a;g++)f=s[g],o=s[(g+1)%a],d=c.intersectLineLine(l,r,f,o),n.appendPoints(d.points);return n.points.length>0&&(n.status="Intersection"),n},i.Intersection.intersectPolygonPolygon=function(l,r){var s=new c,n=l.length,a;for(a=0;a<n;a++){var f=l[a],o=l[(a+1)%n],d=c.intersectLinePolygon(f,o,r);s.appendPoints(d.points)}return s.points.length>0&&(s.status="Intersection"),s},i.Intersection.intersectPolygonRectangle=function(l,r,s){var n=r.min(s),a=r.max(s),f=new i.Point(a.x,n.y),o=new i.Point(n.x,a.y),d=c.intersectLinePolygon(n,f,l),g=c.intersectLinePolygon(f,a,l),v=c.intersectLinePolygon(a,o,l),_=c.intersectLinePolygon(o,n,l),b=new c;return b.appendPoints(d.points),b.appendPoints(g.points),b.appendPoints(v.points),b.appendPoints(_.points),b.points.length>0&&(b.status="Intersection"),b}}(t),function(u){var i=u.fabric||(u.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function c(r){r?this._tryParsingColor(r):this.setSource([0,0,0,1])}i.Color=c,i.Color.prototype={_tryParsingColor:function(r){var s;r in c.colorNameMap&&(r=c.colorNameMap[r]),r==="transparent"&&(s=[255,255,255,0]),s||(s=c.sourceFromHex(r)),s||(s=c.sourceFromRgb(r)),s||(s=c.sourceFromHsl(r)),s||(s=[0,0,0,1]),s&&this.setSource(s)},_rgbToHsl:function(r,s,n){r/=255,s/=255,n/=255;var a,f,o,d=i.util.array.max([r,s,n]),g=i.util.array.min([r,s,n]);if(o=(d+g)/2,d===g)a=f=0;else{var v=d-g;switch(f=o>.5?v/(2-d-g):v/(d+g),d){case r:a=(s-n)/v+(s<n?6:0);break;case s:a=(n-r)/v+2;break;case n:a=(r-s)/v+4;break}a/=6}return[Math.round(a*360),Math.round(f*100),Math.round(o*100)]},getSource:function(){return this._source},setSource:function(r){this._source=r},toRgb:function(){var r=this.getSource();return"rgb("+r[0]+","+r[1]+","+r[2]+")"},toRgba:function(){var r=this.getSource();return"rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+")"},toHsl:function(){var r=this.getSource(),s=this._rgbToHsl(r[0],r[1],r[2]);return"hsl("+s[0]+","+s[1]+"%,"+s[2]+"%)"},toHsla:function(){var r=this.getSource(),s=this._rgbToHsl(r[0],r[1],r[2]);return"hsla("+s[0]+","+s[1]+"%,"+s[2]+"%,"+r[3]+")"},toHex:function(){var r=this.getSource(),s,n,a;return s=r[0].toString(16),s=s.length===1?"0"+s:s,n=r[1].toString(16),n=n.length===1?"0"+n:n,a=r[2].toString(16),a=a.length===1?"0"+a:a,s.toUpperCase()+n.toUpperCase()+a.toUpperCase()},toHexa:function(){var r=this.getSource(),s;return s=Math.round(r[3]*255),s=s.toString(16),s=s.length===1?"0"+s:s,this.toHex()+s.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(r){var s=this.getSource();return s[3]=r,this.setSource(s),this},toGrayscale:function(){var r=this.getSource(),s=parseInt((r[0]*.3+r[1]*.59+r[2]*.11).toFixed(0),10),n=r[3];return this.setSource([s,s,s,n]),this},toBlackWhite:function(r){var s=this.getSource(),n=(s[0]*.3+s[1]*.59+s[2]*.11).toFixed(0),a=s[3];return r=r||127,n=Number(n)<Number(r)?0:255,this.setSource([n,n,n,a]),this},overlayWith:function(r){r instanceof c||(r=new c(r));var s=[],n=this.getAlpha(),a=.5,f=this.getSource(),o=r.getSource(),d;for(d=0;d<3;d++)s.push(Math.round(f[d]*(1-a)+o[d]*a));return s[3]=n,this.setSource(s),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function l(r,s,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?r+(s-r)*6*n:n<1/2?s:n<2/3?r+(s-r)*(2/3-n)*6:r}i.Color.fromRgb=function(r){return c.fromSource(c.sourceFromRgb(r))},i.Color.sourceFromRgb=function(r){var s=r.match(c.reRGBa);if(s){var n=parseInt(s[1],10)/(/%$/.test(s[1])?100:1)*(/%$/.test(s[1])?255:1),a=parseInt(s[2],10)/(/%$/.test(s[2])?100:1)*(/%$/.test(s[2])?255:1),f=parseInt(s[3],10)/(/%$/.test(s[3])?100:1)*(/%$/.test(s[3])?255:1);return[parseInt(n,10),parseInt(a,10),parseInt(f,10),s[4]?parseFloat(s[4]):1]}},i.Color.fromRgba=c.fromRgb,i.Color.fromHsl=function(r){return c.fromSource(c.sourceFromHsl(r))},i.Color.sourceFromHsl=function(r){var s=r.match(c.reHSLa);if(s){var n=(parseFloat(s[1])%360+360)%360/360,a=parseFloat(s[2])/(/%$/.test(s[2])?100:1),f=parseFloat(s[3])/(/%$/.test(s[3])?100:1),o,d,g;if(a===0)o=d=g=f;else{var v=f<=.5?f*(a+1):f+a-f*a,_=f*2-v;o=l(_,v,n+1/3),d=l(_,v,n),g=l(_,v,n-1/3)}return[Math.round(o*255),Math.round(d*255),Math.round(g*255),s[4]?parseFloat(s[4]):1]}},i.Color.fromHsla=c.fromHsl,i.Color.fromHex=function(r){return c.fromSource(c.sourceFromHex(r))},i.Color.sourceFromHex=function(r){if(r.match(c.reHex)){var s=r.slice(r.indexOf("#")+1),n=s.length===3||s.length===4,a=s.length===8||s.length===4,f=n?s.charAt(0)+s.charAt(0):s.substring(0,2),o=n?s.charAt(1)+s.charAt(1):s.substring(2,4),d=n?s.charAt(2)+s.charAt(2):s.substring(4,6),g=a?n?s.charAt(3)+s.charAt(3):s.substring(6,8):"FF";return[parseInt(f,16),parseInt(o,16),parseInt(d,16),parseFloat((parseInt(g,16)/255).toFixed(2))]}},i.Color.fromSource=function(r){var s=new c;return s.setSource(r),s}}(t),function(u){var i=u.fabric||(u.fabric={}),c=["e","se","s","sw","w","nw","n","ne","e"],l=["ns","nesw","ew","nwse"],r={},s="left",n="top",a="right",f="bottom",o="center",d={top:f,bottom:n,left:a,right:s,center:o},g=i.util.radiansToDegrees,v=Math.sign||function(T){return(T>0)-(T<0)||+T};function _(T,P){var L=T.angle+g(Math.atan2(P.y,P.x))+360;return Math.round(L%360/45)}function b(T,P){var L=P.transform.target,B=L.canvas,j=i.util.object.clone(P);j.target=L,B&&B.fire("object:"+T,j),L.fire(T,P)}function w(T,P){var L=P.canvas,B=L.uniScaleKey,j=T[B];return L.uniformScaling&&!j||!L.uniformScaling&&j}function x(T){return T.originX===o&&T.originY===o}function A(T,P,L){var B=T.lockScalingX,j=T.lockScalingY;return!!(B&&j||!P&&(B||j)&&L||B&&P==="x"||j&&P==="y")}function M(T,P,L){var B="not-allowed",j=w(T,L),H="";if(P.x!==0&&P.y===0?H="x":P.x===0&&P.y!==0&&(H="y"),A(L,H,j))return B;var Y=_(L,P);return c[Y]+"-resize"}function X(T,P,L){var B="not-allowed";if(P.x!==0&&L.lockSkewingY||P.y!==0&&L.lockSkewingX)return B;var j=_(L,P)%4;return l[j]+"-resize"}function z(T,P,L){return T[L.canvas.altActionKey]?r.skewCursorStyleHandler(T,P,L):r.scaleCursorStyleHandler(T,P,L)}function $(T,P,L){var B=T[L.canvas.altActionKey];if(P.x===0)return B?"skewX":"scaleY";if(P.y===0)return B?"skewY":"scaleX"}function q(T,P,L){return L.lockRotation?"not-allowed":P.cursorStyle}function K(T,P,L,B){return{e:T,transform:P,pointer:{x:L,y:B}}}function te(T){return function(P,L,B,j){var H=L.target,Y=H.getCenterPoint(),Q=H.translateToOriginPoint(Y,L.originX,L.originY),G=T(P,L,B,j);return H.setPositionByOrigin(Q,L.originX,L.originY),G}}function re(T,P){return function(L,B,j,H){var Y=P(L,B,j,H);return Y&&b(T,K(L,B,j,H)),Y}}function oe(T,P,L,B,j){var H=T.target,Y=H.controls[T.corner],Q=H.canvas.getZoom(),G=H.padding/Q,W=H.toLocalPoint(new i.Point(B,j),P,L);return W.x>=G&&(W.x-=G),W.x<=-G&&(W.x+=G),W.y>=G&&(W.y-=G),W.y<=G&&(W.y+=G),W.x-=Y.offsetX,W.y-=Y.offsetY,W}function se(T){return T.flipX!==T.flipY}function S(T,P,L,B,j){if(T[P]!==0){var H=T._getTransformedDimensions()[B],Y=j/H*T[L];T.set(L,Y)}}function F(T,P,L,B){var j=P.target,H=j._getTransformedDimensions(0,j.skewY),Y=oe(P,P.originX,P.originY,L,B),Q=Math.abs(Y.x*2)-H.x,G=j.skewX,W;Q<2?W=0:(W=g(Math.atan2(Q/j.scaleX,H.y/j.scaleY)),P.originX===s&&P.originY===f&&(W=-W),P.originX===a&&P.originY===n&&(W=-W),se(j)&&(W=-W));var Z=G!==W;if(Z){var ne=j._getTransformedDimensions().y;j.set("skewX",W),S(j,"skewY","scaleY","y",ne)}return Z}function I(T,P,L,B){var j=P.target,H=j._getTransformedDimensions(j.skewX,0),Y=oe(P,P.originX,P.originY,L,B),Q=Math.abs(Y.y*2)-H.y,G=j.skewY,W;Q<2?W=0:(W=g(Math.atan2(Q/j.scaleY,H.x/j.scaleX)),P.originX===s&&P.originY===f&&(W=-W),P.originX===a&&P.originY===n&&(W=-W),se(j)&&(W=-W));var Z=G!==W;if(Z){var ne=j._getTransformedDimensions().x;j.set("skewY",W),S(j,"skewX","scaleX","x",ne)}return Z}function D(T,P,L,B){var j=P.target,H=j.skewX,Y,Q=P.originY;if(j.lockSkewingX)return!1;if(H===0){var G=oe(P,o,o,L,B);G.x>0?Y=s:Y=a}else H>0&&(Y=Q===n?s:a),H<0&&(Y=Q===n?a:s),se(j)&&(Y=Y===s?a:s);P.originX=Y;var W=re("skewing",te(F));return W(T,P,L,B)}function U(T,P,L,B){var j=P.target,H=j.skewY,Y,Q=P.originX;if(j.lockSkewingY)return!1;if(H===0){var G=oe(P,o,o,L,B);G.y>0?Y=n:Y=f}else H>0&&(Y=Q===s?n:f),H<0&&(Y=Q===s?f:n),se(j)&&(Y=Y===n?f:n);P.originY=Y;var W=re("skewing",te(I));return W(T,P,L,B)}function k(T,P,L,B){var j=P,H=j.target,Y=H.translateToOriginPoint(H.getCenterPoint(),j.originX,j.originY);if(H.lockRotation)return!1;var Q=Math.atan2(j.ey-Y.y,j.ex-Y.x),G=Math.atan2(B-Y.y,L-Y.x),W=g(G-Q+j.theta),Z=!0;if(H.snapAngle>0){var ne=H.snapAngle,ae=H.snapThreshold||ne,ce=Math.ceil(W/ne)*ne,ue=Math.floor(W/ne)*ne;Math.abs(W-ue)<ae?W=ue:Math.abs(W-ce)<ae&&(W=ce)}return W<0&&(W=360+W),W%=360,Z=H.angle!==W,H.angle=W,Z}function O(T,P,L,B,j){j=j||{};var H=P.target,Y=H.lockScalingX,Q=H.lockScalingY,G=j.by,W,Z,ne,ae,ce=w(T,H),ue=A(H,G,ce),he,de,Se=P.gestureScale;if(ue)return!1;if(Se)Z=P.scaleX*Se,ne=P.scaleY*Se;else{if(W=oe(P,P.originX,P.originY,L,B),he=G!=="y"?v(W.x):1,de=G!=="x"?v(W.y):1,P.signX||(P.signX=he),P.signY||(P.signY=de),H.lockScalingFlip&&(P.signX!==he||P.signY!==de))return!1;if(ae=H._getTransformedDimensions(),ce&&!G){var ze=Math.abs(W.x)+Math.abs(W.y),Be=P.original,ft=Math.abs(ae.x*Be.scaleX/H.scaleX)+Math.abs(ae.y*Be.scaleY/H.scaleY),Rt=ze/ft;Z=Be.scaleX*Rt,ne=Be.scaleY*Rt}else Z=Math.abs(W.x*H.scaleX/ae.x),ne=Math.abs(W.y*H.scaleY/ae.y);x(P)&&(Z*=2,ne*=2),P.signX!==he&&G!=="y"&&(P.originX=d[P.originX],Z*=-1,P.signX=he),P.signY!==de&&G!=="x"&&(P.originY=d[P.originY],ne*=-1,P.signY=de)}var Ae=H.scaleX,He=H.scaleY;return G?(G==="x"&&H.set("scaleX",Z),G==="y"&&H.set("scaleY",ne)):(!Y&&H.set("scaleX",Z),!Q&&H.set("scaleY",ne)),Ae!==H.scaleX||He!==H.scaleY}function R(T,P,L,B){return O(T,P,L,B)}function N(T,P,L,B){return O(T,P,L,B,{by:"x"})}function J(T,P,L,B){return O(T,P,L,B,{by:"y"})}function V(T,P,L,B){return T[P.target.canvas.altActionKey]?r.skewHandlerX(T,P,L,B):r.scalingY(T,P,L,B)}function ee(T,P,L,B){return T[P.target.canvas.altActionKey]?r.skewHandlerY(T,P,L,B):r.scalingX(T,P,L,B)}function ie(T,P,L,B){var j=P.target,H=oe(P,P.originX,P.originY,L,B),Y=j.strokeWidth/(j.strokeUniform?j.scaleX:1),Q=x(P)?2:1,G=j.width,W=Math.abs(H.x*Q/j.scaleX)-Y;return j.set("width",Math.max(W,0)),G!==W}function E(T,P,L,B){var j=P.target,H=L-P.offsetX,Y=B-P.offsetY,Q=!j.get("lockMovementX")&&j.left!==H,G=!j.get("lockMovementY")&&j.top!==Y;return Q&&j.set("left",H),G&&j.set("top",Y),(Q||G)&&b("moving",K(T,P,L,B)),Q||G}r.scaleCursorStyleHandler=M,r.skewCursorStyleHandler=X,r.scaleSkewCursorStyleHandler=z,r.rotationWithSnapping=re("rotating",te(k)),r.scalingEqually=re("scaling",te(R)),r.scalingX=re("scaling",te(N)),r.scalingY=re("scaling",te(J)),r.scalingYOrSkewingX=V,r.scalingXOrSkewingY=ee,r.changeWidth=re("resizing",te(ie)),r.skewHandlerX=D,r.skewHandlerY=U,r.dragHandler=E,r.scaleOrSkewActionName=$,r.rotationStyleHandler=q,r.fireEvent=b,r.wrapWithFixedAnchor=te,r.wrapWithFireEvent=re,r.getLocalPoint=oe,i.controlsUtils=r}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.degreesToRadians,l=i.controlsUtils;function r(n,a,f,o,d){o=o||{};var g=this.sizeX||o.cornerSize||d.cornerSize,v=this.sizeY||o.cornerSize||d.cornerSize,_=typeof o.transparentCorners<"u"?o.transparentCorners:d.transparentCorners,b=_?"stroke":"fill",w=!_&&(o.cornerStrokeColor||d.cornerStrokeColor),x=a,A=f,M;n.save(),n.fillStyle=o.cornerColor||d.cornerColor,n.strokeStyle=o.cornerStrokeColor||d.cornerStrokeColor,g>v?(M=g,n.scale(1,v/g),A=f*g/v):v>g?(M=v,n.scale(g/v,1),x=a*v/g):M=g,n.lineWidth=1,n.beginPath(),n.arc(x,A,M/2,0,2*Math.PI,!1),n[b](),w&&n.stroke(),n.restore()}function s(n,a,f,o,d){o=o||{};var g=this.sizeX||o.cornerSize||d.cornerSize,v=this.sizeY||o.cornerSize||d.cornerSize,_=typeof o.transparentCorners<"u"?o.transparentCorners:d.transparentCorners,b=_?"stroke":"fill",w=!_&&(o.cornerStrokeColor||d.cornerStrokeColor),x=g/2,A=v/2;n.save(),n.fillStyle=o.cornerColor||d.cornerColor,n.strokeStyle=o.cornerStrokeColor||d.cornerStrokeColor,n.lineWidth=1,n.translate(a,f),n.rotate(c(d.angle)),n[b+"Rect"](-x,-A,g,v),w&&n.strokeRect(-x,-A,g,v),n.restore()}l.renderCircleControl=r,l.renderSquareControl=s}(t),function(u){var i=u.fabric||(u.fabric={});function c(l){for(var r in l)this[r]=l[r]}i.Control=c,i.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(l,r){return r.cursorStyle},getActionName:function(l,r){return r.actionName},getVisibility:function(l,r){var s=l._controlsVisibility;return s&&typeof s[r]<"u"?s[r]:this.visible},setVisibility:function(l){this.visible=l},positionHandler:function(l,r){var s=i.util.transformPoint({x:this.x*l.x+this.offsetX,y:this.y*l.y+this.offsetY},r);return s},calcCornerCoords:function(l,r,s,n,a){var f,o,d,g,v=a?this.touchSizeX:this.sizeX,_=a?this.touchSizeY:this.sizeY;if(v&&_&&v!==_){var b=Math.atan2(_,v),w=Math.sqrt(v*v+_*_)/2,x=b-i.util.degreesToRadians(l),A=Math.PI/2-b-i.util.degreesToRadians(l);f=w*i.util.cos(x),o=w*i.util.sin(x),d=w*i.util.cos(A),g=w*i.util.sin(A)}else{var M=v&&_?v:r;w=M*.7071067812;var x=i.util.degreesToRadians(45-l);f=d=w*i.util.cos(x),o=g=w*i.util.sin(x)}return{tl:{x:s-g,y:n-d},tr:{x:s+f,y:n-o},bl:{x:s-f,y:n+o},br:{x:s+g,y:n+d}}},render:function(l,r,s,n,a){switch(n=n||{},n.cornerStyle||a.cornerStyle){case"circle":i.controlsUtils.renderCircleControl.call(this,l,r,s,n,a);break;default:i.controlsUtils.renderSquareControl.call(this,l,r,s,n,a)}}}}(t),function(){function u(s,n){var a=s.getAttribute("style"),f=s.getAttribute("offset")||0,o,d,g,v;if(f=parseFloat(f)/(/%$/.test(f)?100:1),f=f<0?0:f>1?1:f,a){var _=a.split(/\s*;\s*/);for(_[_.length-1]===""&&_.pop(),v=_.length;v--;){var b=_[v].split(/\s*:\s*/),w=b[0].trim(),x=b[1].trim();w==="stop-color"?o=x:w==="stop-opacity"&&(g=x)}}return o||(o=s.getAttribute("stop-color")||"rgb(0,0,0)"),g||(g=s.getAttribute("stop-opacity")),o=new e.Color(o),d=o.getAlpha(),g=isNaN(parseFloat(g))?1:parseFloat(g),g*=d*n,{offset:f,color:o.toRgb(),opacity:g}}function i(s){return{x1:s.getAttribute("x1")||0,y1:s.getAttribute("y1")||0,x2:s.getAttribute("x2")||"100%",y2:s.getAttribute("y2")||0}}function c(s){return{x1:s.getAttribute("fx")||s.getAttribute("cx")||"50%",y1:s.getAttribute("fy")||s.getAttribute("cy")||"50%",r1:0,x2:s.getAttribute("cx")||"50%",y2:s.getAttribute("cy")||"50%",r2:s.getAttribute("r")||"50%"}}var l=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(s){s||(s={}),s.coords||(s.coords={});var n,a=this;Object.keys(s).forEach(function(f){a[f]=s[f]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,n={x1:s.coords.x1||0,y1:s.coords.y1||0,x2:s.coords.x2||0,y2:s.coords.y2||0},this.type==="radial"&&(n.r1=s.coords.r1||0,n.r2=s.coords.r2||0),this.coords=n,this.colorStops=s.colorStops.slice()},addColorStop:function(s){for(var n in s){var a=new e.Color(s[n]);this.colorStops.push({offset:parseFloat(n),color:a.toRgb(),opacity:a.getAlpha()})}return this},toObject:function(s){var n={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,n,s),n},toSVG:function(s,d){var a=l(this.coords,!0),f,o,d=d||{},g,v,_=l(this.colorStops,!0),b=a.r1>a.r2,w=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),x=-this.offsetX,A=-this.offsetY,M=!!d.additionalTransform,X=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(_.sort(function(te,re){return te.offset-re.offset}),X==="objectBoundingBox"?(x/=s.width,A/=s.height):(x+=s.width/2,A+=s.height/2),s.type==="path"&&this.gradientUnits!=="percentage"&&(x-=s.pathOffset.x,A-=s.pathOffset.y),w[4]-=x,w[5]-=A,v='id="SVGID_'+this.id+'" gradientUnits="'+X+'"',v+=' gradientTransform="'+(M?d.additionalTransform+" ":"")+e.util.matrixToSVG(w)+'" ',this.type==="linear"?g=["<linearGradient ",v,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,`">
`]:this.type==="radial"&&(g=["<radialGradient ",v,' cx="',b?a.x1:a.x2,'" cy="',b?a.y1:a.y2,'" r="',b?a.r1:a.r2,'" fx="',b?a.x2:a.x1,'" fy="',b?a.y2:a.y1,`">
`]),this.type==="radial"){if(b)for(_=_.concat(),_.reverse(),f=0,o=_.length;f<o;f++)_[f].offset=1-_[f].offset;var z=Math.min(a.r1,a.r2);if(z>0){var $=Math.max(a.r1,a.r2),q=z/$;for(f=0,o=_.length;f<o;f++)_[f].offset+=q*(1-_[f].offset)}}for(f=0,o=_.length;f<o;f++){var K=_[f];g.push("<stop ",'offset="',K.offset*100+"%",'" style="stop-color:',K.color,typeof K.opacity<"u"?";stop-opacity: "+K.opacity:";",`"/>
`)}return g.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),g.join("")},toLive:function(s){var n,a=e.util.object.clone(this.coords),f,o;if(this.type){for(this.type==="linear"?n=s.createLinearGradient(a.x1,a.y1,a.x2,a.y2):this.type==="radial"&&(n=s.createRadialGradient(a.x1,a.y1,a.r1,a.x2,a.y2,a.r2)),f=0,o=this.colorStops.length;f<o;f++){var d=this.colorStops[f].color,g=this.colorStops[f].opacity,v=this.colorStops[f].offset;typeof g<"u"&&(d=new e.Color(d).setAlpha(g).toRgba()),n.addColorStop(v,d)}return n}}}),e.util.object.extend(e.Gradient,{fromElement:function(s,n,a,f){var o=parseFloat(a)/(/%$/.test(a)?100:1);o=o<0?0:o>1?1:o,isNaN(o)&&(o=1);var d=s.getElementsByTagName("stop"),g,v=s.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",_=s.getAttribute("gradientTransform")||"",b=[],w,x,A=0,M=0,X;for(s.nodeName==="linearGradient"||s.nodeName==="LINEARGRADIENT"?(g="linear",w=i(s)):(g="radial",w=c(s)),x=d.length;x--;)b.push(u(d[x],o));X=e.parseTransformAttribute(_),r(n,w,f,v),v==="pixels"&&(A=-n.left,M=-n.top);var z=new e.Gradient({id:s.getAttribute("id"),type:g,coords:w,colorStops:b,gradientUnits:v,gradientTransform:X,offsetX:A,offsetY:M});return z}});function r(s,n,a,f){var o,d;Object.keys(n).forEach(function(g){o=n[g],o==="Infinity"?d=1:o==="-Infinity"?d=0:(d=parseFloat(n[g],10),typeof o=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(o)&&(d*=.01,f==="pixels"&&((g==="x1"||g==="x2"||g==="r2")&&(d*=a.viewBoxWidth||a.width),(g==="y1"||g==="y2")&&(d*=a.viewBoxHeight||a.height)))),n[g]=d})}}(),function(){var u=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,c){if(i||(i={}),this.id=e.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){c&&c(this);return}else{var l=this;this.source=e.util.createImage(),e.util.loadImage(i.source,function(r,s){l.source=r,c&&c(l,s)},null,this.crossOrigin)}},toObject:function(i){var c=e.Object.NUM_FRACTION_DIGITS,l,r;return typeof this.source.src=="string"?l=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(l=this.source.toDataURL()),r={type:"pattern",source:l,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:u(this.offsetX,c),offsetY:u(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,r,i),r},toSVG:function(i){var c=typeof this.source=="function"?this.source():this.source,l=c.width/i.width,r=c.height/i.height,s=this.offsetX/i.width,n=this.offsetY/i.height,a="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(r=1,n&&(r+=Math.abs(n))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(l=1,s&&(l+=Math.abs(s))),c.src?a=c.src:c.toDataURL&&(a=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+s+'" y="'+n+'" width="'+l+'" height="'+r+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+a+`"></image>
</pattern>
`},setOptions:function(i){for(var c in i)this[c]=i[c]},toLive:function(i){var c=this.source;return!c||typeof c.src<"u"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":i.createPattern(c,this.repeat)}})}(),function(u){var i=u.fabric||(u.fabric={}),c=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(l){typeof l=="string"&&(l=this._parseShadow(l));for(var r in l)this[r]=l[r];this.id=i.Object.__uid++},_parseShadow:function(l){var r=l.trim(),s=i.Shadow.reOffsetsAndBlur.exec(r)||[],n=r.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:n.trim(),offsetX:parseFloat(s[1],10)||0,offsetY:parseFloat(s[2],10)||0,blur:parseFloat(s[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(l){var r=40,s=40,n=i.Object.NUM_FRACTION_DIGITS,a=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-l.angle)),f=20,o=new i.Color(this.color);return l.width&&l.height&&(r=c((Math.abs(a.x)+this.blur)/l.width,n)*100+f,s=c((Math.abs(a.y)+this.blur)/l.height,n)*100+f),l.flipX&&(a.x*=-1),l.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+s+'%" height="'+(100+2*s)+'%" x="-'+r+'%" width="'+(100+2*r)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,n)+`"></feGaussianBlur>
	<feOffset dx="`+c(a.x,n)+'" dy="'+c(a.y,n)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+o.toRgb()+'" flood-opacity="'+o.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var l={},r=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(s){this[s]!==r[s]&&(l[s]=this[s])},this),l}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var u=e.util.object.extend,i=e.util.getElementOffset,c=e.util.removeFromArray,l=e.util.toFixed,r=e.util.transformPoint,s=e.util.invertTransform,n=e.util.getNodeCanvas,a=e.util.createCanvasElement,f=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(o,d){d||(d={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,d)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(o,d){var g=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(o),this._initOptions(d),this.interactive||this._initRetinaScaling(),d.overlayImage&&this.setOverlayImage(d.overlayImage,g),d.backgroundImage&&this.setBackgroundImage(d.backgroundImage,g),d.backgroundColor&&this.setBackgroundColor(d.backgroundColor,g),d.overlayColor&&this.setOverlayColor(d.overlayColor,g),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var o=e.devicePixelRatio;this.__initRetinaScaling(o,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(o,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(o,d,g){d.setAttribute("width",this.width*o),d.setAttribute("height",this.height*o),g.scale(o,o)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(o,d,g){return this.__setBgOverlayImage("overlayImage",o,d,g)},setBackgroundImage:function(o,d,g){return this.__setBgOverlayImage("backgroundImage",o,d,g)},setOverlayColor:function(o,d){return this.__setBgOverlayColor("overlayColor",o,d)},setBackgroundColor:function(o,d){return this.__setBgOverlayColor("backgroundColor",o,d)},__setBgOverlayImage:function(o,d,g,v){return typeof d=="string"?e.util.loadImage(d,function(_,b){if(_){var w=new e.Image(_,v);this[o]=w,w.canvas=this}g&&g(_,b)},this,v&&v.crossOrigin):(v&&d.setOptions(v),this[o]=d,d&&(d.canvas=this),g&&g(d,!1)),this},__setBgOverlayColor:function(o,d,g){return this[o]=d,this._initGradient(d,o),this._initPattern(d,o,g),this},_createCanvasElement:function(){var o=a();if(!o||(o.style||(o.style={}),typeof o.getContext>"u"))throw f;return o},_initOptions:function(o){var d=this.lowerCanvasEl;this._setOptions(o),this.width=this.width||parseInt(d.width,10)||0,this.height=this.height||parseInt(d.height,10)||0,this.lowerCanvasEl.style&&(d.width=this.width,d.height=this.height,d.style.width=this.width+"px",d.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(o){o&&o.getContext?this.lowerCanvasEl=o:this.lowerCanvasEl=e.util.getById(o)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(o,d){return this.setDimensions({width:o},d)},setHeight:function(o,d){return this.setDimensions({height:o},d)},setDimensions:function(o,d){var g;d=d||{};for(var v in o)g=o[v],d.cssOnly||(this._setBackstoreDimension(v,o[v]),g+="px",this.hasLostContext=!0),d.backstoreOnly||this._setCssDimension(v,g);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),d.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(o,d){return this.lowerCanvasEl[o]=d,this.upperCanvasEl&&(this.upperCanvasEl[o]=d),this.cacheCanvasEl&&(this.cacheCanvasEl[o]=d),this[o]=d,this},_setCssDimension:function(o,d){return this.lowerCanvasEl.style[o]=d,this.upperCanvasEl&&(this.upperCanvasEl.style[o]=d),this.wrapperEl&&(this.wrapperEl.style[o]=d),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(o){var d=this._activeObject,g=this.backgroundImage,v=this.overlayImage,_,b,w;for(this.viewportTransform=o,b=0,w=this._objects.length;b<w;b++)_=this._objects[b],_.group||_.setCoords(!0);return d&&d.setCoords(),g&&g.setCoords(!0),v&&v.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(o,d){var g=o,v=this.viewportTransform.slice(0);o=r(o,s(this.viewportTransform)),v[0]=d,v[3]=d;var _=r(o,v);return v[4]+=g.x-_.x,v[5]+=g.y-_.y,this.setViewportTransform(v)},setZoom:function(o){return this.zoomToPoint(new e.Point(0,0),o),this},absolutePan:function(o){var d=this.viewportTransform.slice(0);return d[4]=-o.x,d[5]=-o.y,this.setViewportTransform(d)},relativePan:function(o){return this.absolutePan(new e.Point(-o.x-this.viewportTransform[4],-o.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(o){this.stateful&&o.setupState(),o._set("canvas",this),o.setCoords(),this.fire("object:added",{target:o}),o.fire("added")},_onObjectRemoved:function(o){this.fire("object:removed",{target:o}),o.fire("removed"),delete o.canvas},clearContext:function(o){return o.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var o=this.contextContainer;return this.renderCanvas(o,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var o={},d=this.width,g=this.height,v=s(this.viewportTransform);return o.tl=r({x:0,y:0},v),o.br=r({x:d,y:g},v),o.tr=new e.Point(o.br.x,o.tl.y),o.bl=new e.Point(o.tl.x,o.br.y),this.vptCoords=o,o},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(o,d){var g=this.viewportTransform,v=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(o),e.util.setImageSmoothing(o,this.imageSmoothingEnabled),this.fire("before:render",{ctx:o}),this._renderBackground(o),o.save(),o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._renderObjects(o,d),o.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),v&&(v.canvas=this,v.shouldCache(),v._transformDone=!0,v.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(o)),this._renderOverlay(o),this.controlsAboveOverlay&&this.interactive&&this.drawControls(o),this.fire("after:render",{ctx:o})},drawClipPathOnCanvas:function(o){var d=this.viewportTransform,g=this.clipPath;o.save(),o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),o.globalCompositeOperation="destination-in",g.transform(o),o.scale(1/g.zoomX,1/g.zoomY),o.drawImage(g._cacheCanvas,-g.cacheTranslationX,-g.cacheTranslationY),o.restore()},_renderObjects:function(o,d){var g,v;for(g=0,v=d.length;g<v;++g)d[g]&&d[g].render(o)},_renderBackgroundOrOverlay:function(o,d){var g=this[d+"Color"],v=this[d+"Image"],_=this.viewportTransform,b=this[d+"Vpt"];if(!(!g&&!v)){if(g){o.save(),o.beginPath(),o.moveTo(0,0),o.lineTo(this.width,0),o.lineTo(this.width,this.height),o.lineTo(0,this.height),o.closePath(),o.fillStyle=g.toLive?g.toLive(o,this):g,b&&o.transform(_[0],_[1],_[2],_[3],_[4],_[5]),o.transform(1,0,0,1,g.offsetX||0,g.offsetY||0);var w=g.gradientTransform||g.patternTransform;w&&o.transform(w[0],w[1],w[2],w[3],w[4],w[5]),o.fill(),o.restore()}v&&(o.save(),b&&o.transform(_[0],_[1],_[2],_[3],_[4],_[5]),v.render(o),o.restore())}},_renderBackground:function(o){this._renderBackgroundOrOverlay(o,"background")},_renderOverlay:function(o){this._renderBackgroundOrOverlay(o,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(o){return this._centerObject(o,new e.Point(this.getCenterPoint().x,o.getCenterPoint().y))},centerObjectV:function(o){return this._centerObject(o,new e.Point(o.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(o){var d=this.getCenterPoint();return this._centerObject(o,d)},viewportCenterObject:function(o){var d=this.getVpCenter();return this._centerObject(o,d)},viewportCenterObjectH:function(o){var d=this.getVpCenter();return this._centerObject(o,new e.Point(d.x,o.getCenterPoint().y)),this},viewportCenterObjectV:function(o){var d=this.getVpCenter();return this._centerObject(o,new e.Point(o.getCenterPoint().x,d.y))},getVpCenter:function(){var o=this.getCenterPoint(),d=s(this.viewportTransform);return r(o,d)},_centerObject:function(o,d){return o.setPositionByOrigin(d,"center","center"),o.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(o){return this.toDatalessObject(o)},toObject:function(o){return this._toObjectMethod("toObject",o)},toDatalessObject:function(o){return this._toObjectMethod("toDatalessObject",o)},_toObjectMethod:function(o,d){var g=this.clipPath,v={version:e.version,objects:this._toObjects(o,d)};return g&&!g.excludeFromExport&&(v.clipPath=this._toObject(this.clipPath,o,d)),u(v,this.__serializeBgOverlay(o,d)),e.util.populateWithProperties(this,v,d),v},_toObjects:function(o,d){return this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){return this._toObject(g,o,d)},this)},_toObject:function(o,d,g){var v;this.includeDefaultValues||(v=o.includeDefaultValues,o.includeDefaultValues=!1);var _=o[d](g);return this.includeDefaultValues||(o.includeDefaultValues=v),_},__serializeBgOverlay:function(o,d){var g={},v=this.backgroundImage,_=this.overlayImage,b=this.backgroundColor,w=this.overlayColor;return b&&b.toObject?b.excludeFromExport||(g.background=b.toObject(d)):b&&(g.background=b),w&&w.toObject?w.excludeFromExport||(g.overlay=w.toObject(d)):w&&(g.overlay=w),v&&!v.excludeFromExport&&(g.backgroundImage=this._toObject(v,o,d)),_&&!_.excludeFromExport&&(g.overlayImage=this._toObject(_,o,d)),g},svgViewportTransformation:!0,toSVG:function(o,d){o||(o={}),o.reviver=d;var g=[];return this._setSVGPreamble(g,o),this._setSVGHeader(g,o),this.clipPath&&g.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(g,"background"),this._setSVGBgOverlayImage(g,"backgroundImage",d),this._setSVGObjects(g,d),this.clipPath&&g.push(`</g>
`),this._setSVGBgOverlayColor(g,"overlay"),this._setSVGBgOverlayImage(g,"overlayImage",d),g.push("</svg>"),g.join("")},_setSVGPreamble:function(o,d){d.suppressPreamble||o.push('<?xml version="1.0" encoding="',d.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(o,d){var g=d.width||this.width,v=d.height||this.height,_,b='viewBox="0 0 '+this.width+" "+this.height+'" ',w=e.Object.NUM_FRACTION_DIGITS;d.viewBox?b='viewBox="'+d.viewBox.x+" "+d.viewBox.y+" "+d.viewBox.width+" "+d.viewBox.height+'" ':this.svgViewportTransformation&&(_=this.viewportTransform,b='viewBox="'+l(-_[4]/_[0],w)+" "+l(-_[5]/_[3],w)+" "+l(this.width/_[0],w)+" "+l(this.height/_[3],w)+'" '),o.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',g,'" ','height="',v,'" ',b,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(d),`</defs>
`)},createSVGClipPathMarkup:function(o){var d=this.clipPath;return d?(d.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+d.clipPathId+`" >
`+this.clipPath.toClipPathSVG(o.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var o=this,d=["background","overlay"].map(function(g){var v=o[g+"Color"];if(v&&v.toLive){var _=o[g+"Vpt"],b=o.viewportTransform,w={width:o.width/(_?b[0]:1),height:o.height/(_?b[3]:1)};return v.toSVG(w,{additionalTransform:_?e.util.matrixToSVG(b):""})}});return d.join("")},createSVGFontFacesMarkup:function(){var o="",d={},g,v,_,b,w,x,A,M,X,z=e.fontPaths,$=[];for(this._objects.forEach(function K(te){$.push(te),te._objects&&te._objects.forEach(K)}),M=0,X=$.length;M<X;M++)if(g=$[M],v=g.fontFamily,!(g.type.indexOf("text")===-1||d[v]||!z[v])&&(d[v]=!0,!!g.styles)){_=g.styles;for(w in _){b=_[w];for(A in b)x=b[A],v=x.fontFamily,!d[v]&&z[v]&&(d[v]=!0)}}for(var q in d)o+=[`		@font-face {
`,"			font-family: '",q,`';
`,"			src: url('",z[q],`');
`,`		}
`].join("");return o&&(o=['	<style type="text/css">',`<![CDATA[
`,o,"]]>",`</style>
`].join("")),o},_setSVGObjects:function(o,d){var g,v,_,b=this._objects;for(v=0,_=b.length;v<_;v++)g=b[v],!g.excludeFromExport&&this._setSVGObject(o,g,d)},_setSVGObject:function(o,d,g){o.push(d.toSVG(g))},_setSVGBgOverlayImage:function(o,d,g){this[d]&&!this[d].excludeFromExport&&this[d].toSVG&&o.push(this[d].toSVG(g))},_setSVGBgOverlayColor:function(o,d){var g=this[d+"Color"],v=this.viewportTransform,_=this.width,b=this.height;if(g)if(g.toLive){var w=g.repeat,x=e.util.invertTransform(v),A=this[d+"Vpt"],M=A?e.util.matrixToSVG(x):"";o.push('<rect transform="'+M+" translate(",_/2,",",b/2,')"',' x="',g.offsetX-_/2,'" y="',g.offsetY-b/2,'" ','width="',w==="repeat-y"||w==="no-repeat"?g.source.width:_,'" height="',w==="repeat-x"||w==="no-repeat"?g.source.height:b,'" fill="url(#SVGID_'+g.id+')"',`></rect>
`)}else o.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',g,'"',`></rect>
`)},sendToBack:function(o){if(!o)return this;var d=this._activeObject,g,v,_;if(o===d&&o.type==="activeSelection")for(_=d._objects,g=_.length;g--;)v=_[g],c(this._objects,v),this._objects.unshift(v);else c(this._objects,o),this._objects.unshift(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(o){if(!o)return this;var d=this._activeObject,g,v,_;if(o===d&&o.type==="activeSelection")for(_=d._objects,g=0;g<_.length;g++)v=_[g],c(this._objects,v),this._objects.push(v);else c(this._objects,o),this._objects.push(o);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(o,d){if(!o)return this;var g=this._activeObject,v,_,b,w,x,A=0;if(o===g&&o.type==="activeSelection")for(x=g._objects,v=0;v<x.length;v++)_=x[v],b=this._objects.indexOf(_),b>0+A&&(w=b-1,c(this._objects,_),this._objects.splice(w,0,_)),A++;else b=this._objects.indexOf(o),b!==0&&(w=this._findNewLowerIndex(o,b,d),c(this._objects,o),this._objects.splice(w,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(o,d,g){var v,_;if(g)for(v=d,_=d-1;_>=0;--_){var b=o.intersectsWithObject(this._objects[_])||o.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(o);if(b){v=_;break}}else v=d-1;return v},bringForward:function(o,d){if(!o)return this;var g=this._activeObject,v,_,b,w,x,A=0;if(o===g&&o.type==="activeSelection")for(x=g._objects,v=x.length;v--;)_=x[v],b=this._objects.indexOf(_),b<this._objects.length-1-A&&(w=b+1,c(this._objects,_),this._objects.splice(w,0,_)),A++;else b=this._objects.indexOf(o),b!==this._objects.length-1&&(w=this._findNewUpperIndex(o,b,d),c(this._objects,o),this._objects.splice(w,0,o));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(o,d,g){var v,_,b;if(g)for(v=d,_=d+1,b=this._objects.length;_<b;++_){var w=o.intersectsWithObject(this._objects[_])||o.isContainedWithinObject(this._objects[_])||this._objects[_].isContainedWithinObject(o);if(w){v=_;break}}else v=d+1;return v},moveTo:function(o,d){return c(this._objects,o),this._objects.splice(d,0,o),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),u(e.StaticCanvas.prototype,e.Observable),u(e.StaticCanvas.prototype,e.Collection),u(e.StaticCanvas.prototype,e.DataURLExporter),u(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(o){var d=a();if(!d||!d.getContext)return null;var g=d.getContext("2d");if(!g)return null;switch(o){case"setLineDash":return typeof g.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var o=n(this.lowerCanvasEl);return o&&o.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(o){var d=n(this.lowerCanvasEl);return d&&d.createJPEGStream(o)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(u){u.strokeStyle=this.color,u.lineWidth=this.width,u.lineCap=this.strokeLineCap,u.miterLimit=this.strokeMiterLimit,u.lineJoin=this.strokeLineJoin,u.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(u){var i=this.canvas.viewportTransform;u.save(),u.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(this.shadow){var u=this.canvas,i=this.shadow,c=u.contextTop,l=u.getZoom();u&&u._isRetinaScaling()&&(l*=e.devicePixelRatio),c.shadowColor=i.color,c.shadowBlur=i.blur*l,c.shadowOffsetX=i.offsetX*l,c.shadowOffsetY=i.offsetY*l}},needsFullRender:function(){var u=new e.Color(this.color);return u.getAlpha()<1||!!this.shadow},_resetShadow:function(){var u=this.canvas.contextTop;u.shadowColor="",u.shadowBlur=u.shadowOffsetX=u.shadowOffsetY=0},_isOutSideCanvas:function(u){return u.x<0||u.x>this.canvas.getWidth()||u.y<0||u.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(u){this.canvas=u,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(u,i,c){var l=i.midPointFrom(c);return u.quadraticCurveTo(i.x,i.y,l.x,l.y),l},onMouseDown:function(u,i){this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],this._prepareForDrawing(u),this._captureDrawingPath(u),this._render())},onMouseMove:function(u,i){if(this.canvas._isMainEvent(i.e)&&(this.drawStraightLine=i.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u))&&this._captureDrawingPath(u)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,l=c.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,c[l-2],c[l-1],!0),r.stroke(),r.restore()}},onMouseUp:function(u){return this.canvas._isMainEvent(u.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(u){var i=new e.Point(u.x,u.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(u){return this._points.length>1&&u.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(u),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(u){var i=new e.Point(u.x,u.y);return this._addPoint(i)},_render:function(u){var i,c,l=this._points[0],r=this._points[1];if(u=u||this.canvas.contextTop,this._saveAndTransform(u),u.beginPath(),this._points.length===2&&l.x===r.x&&l.y===r.y){var s=this.width/1e3;l=new e.Point(l.x,l.y),r=new e.Point(r.x,r.y),l.x-=s,r.x+=s}for(u.moveTo(l.x,l.y),i=1,c=this._points.length;i<c;i++)this._drawSegment(u,l,r),l=this._points[i],r=this._points[i+1];u.lineTo(l.x,l.y),u.stroke(),u.restore()},convertPointsToSVGPath:function(u){var i=this.width/1e3;return e.util.getSmoothPathFromPoints(u,i)},_isEmptySVGPath:function(u){var i=e.util.joinPath(u);return i==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(u){var i=new e.Path(u,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.shadow=new e.Shadow(this.shadow)),i},decimatePoints:function(u,i){if(u.length<=2)return u;var c=this.canvas.getZoom(),l=Math.pow(i/c,2),r,s=u.length-1,n=u[0],a=[n],f;for(r=1;r<s-1;r++)f=Math.pow(n.x-u[r].x,2)+Math.pow(n.y-u[r].y,2),f>=l&&(n=u[r],a.push(n));return a.push(u[s]),a},_finalizeAndAddPath:function(){var u=this.canvas.contextTop;u.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(i)){this.canvas.requestRenderAll();return}var c=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(u){this.canvas=u,this.points=[]},drawDot:function(u){var i=this.addPoint(u),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,i),c.restore()},dot:function(u,i){u.fillStyle=i.fill,u.beginPath(),u.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),u.closePath(),u.fill()},onMouseDown:function(u){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(u)},_render:function(){var u=this.canvas.contextTop,i,c,l=this.points;for(this._saveAndTransform(u),i=0,c=l.length;i<c;i++)this.dot(u,l[i]);u.restore()},onMouseMove:function(u){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(u),this._render()):this.drawDot(u))},onMouseUp:function(){var u=this.canvas.renderOnAddRemove,i,c;this.canvas.renderOnAddRemove=!1;var l=[];for(i=0,c=this.points.length;i<c;i++){var r=this.points[i],s=new e.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(s.shadow=new e.Shadow(this.shadow)),l.push(s)}var n=new e.Group(l);n.canvas=this.canvas,this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.fire("path:created",{path:n}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},addPoint:function(u){var i=new e.Point(u.x,u.y),c=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,l=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return i.radius=c,i.fill=l,this.points.push(i),i}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(u){this.canvas=u,this.sprayChunks=[]},onMouseDown:function(u){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(u),this.render(this.sprayChunkPoints)},onMouseMove:function(u){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(u)||(this.addSprayChunk(u),this.render(this.sprayChunkPoints))},onMouseUp:function(){var u=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],c=0,l=this.sprayChunks.length;c<l;c++)for(var r=this.sprayChunks[c],s=0,n=r.length;s<n;s++){var a=new e.Rect({width:r[s].width,height:r[s].width,left:r[s].x+1,top:r[s].y+1,originX:"center",originY:"center",fill:this.color});i.push(a)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var f=new e.Group(i);this.shadow&&f.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:f}),this.canvas.add(f),this.canvas.fire("path:created",{path:f}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=u,this.canvas.requestRenderAll()},_getOptimizedRects:function(u){var i={},c,l,r;for(l=0,r=u.length;l<r;l++)c=u[l].left+""+u[l].top,i[c]||(i[c]=u[l]);var s=[];for(c in i)s.push(i[c]);return s},render:function(u){var i=this.canvas.contextTop,c,l;for(i.fillStyle=this.color,this._saveAndTransform(i),c=0,l=u.length;c<l;c++){var r=u[c];typeof r.opacity<"u"&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var u=this.canvas.contextTop,i,c;for(u.fillStyle=this.color,this._saveAndTransform(u),i=0,c=this.sprayChunks.length;i<c;i++)this.render(this.sprayChunks[i]);u.restore()},addSprayChunk:function(u){this.sprayChunkPoints=[];var i,c,l,r=this.width/2,s;for(s=0;s<this.density;s++){i=e.util.getRandomInt(u.x-r,u.x+r),c=e.util.getRandomInt(u.y-r,u.y+r),this.dotWidthVariance?l=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):l=this.dotWidth;var n=new e.Point(i,c);n.width=l,this.randomOpacity&&(n.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(n)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var u=20,i=5,c=e.util.createCanvasElement(),l=c.getContext("2d");return c.width=c.height=u+i,l.fillStyle=this.color,l.beginPath(),l.arc(u/2,u/2,u/2,0,Math.PI*2,!1),l.closePath(),l.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(u){return u.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(u){this.callSuper("_setBrushStyles",u),u.strokeStyle=this.getPattern(u)},createPath:function(u){var i=this.callSuper("createPath",u),c=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),i}}),function(){var u=e.util.getPointer,i=e.util.degreesToRadians,c=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(r,s){s||(s={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(r,s),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var r=this.getActiveObjects(),s,n,a;if(r.length>0&&!this.preserveObjectStacking){n=[],a=[];for(var f=0,o=this._objects.length;f<o;f++)s=this._objects[f],r.indexOf(s)===-1?n.push(s):a.push(s);r.length>1&&(this._activeObject._objects=a),n.push.apply(n,a)}else n=this._objects;return n},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var r=this.contextContainer;return this.renderCanvas(r,this._chooseObjectsToRender()),this},renderTopLayer:function(r){r.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(r),this.contextTopDirty=!0),r.restore()},renderTop:function(){var r=this.contextTop;return this.clearContext(r),this.renderTopLayer(r),this.fire("after:render"),this},_normalizePointer:function(r,s){var n=r.calcTransformMatrix(),a=e.util.invertTransform(n),f=this.restorePointerVpt(s);return e.util.transformPoint(f,a)},isTargetTransparent:function(r,s,n){if(r.shouldCache()&&r._cacheCanvas&&r!==this._activeObject){var a=this._normalizePointer(r,{x:s,y:n}),f=Math.max(r.cacheTranslationX+a.x*r.zoomX,0),o=Math.max(r.cacheTranslationY+a.y*r.zoomY,0),_=e.util.isTransparent(r._cacheContext,Math.round(f),Math.round(o),this.targetFindTolerance);return _}var d=this.contextCache,g=r.selectionBackgroundColor,v=this.viewportTransform;r.selectionBackgroundColor="",this.clearContext(d),d.save(),d.transform(v[0],v[1],v[2],v[3],v[4],v[5]),r.render(d),d.restore(),r.selectionBackgroundColor=g;var _=e.util.isTransparent(d,s,n,this.targetFindTolerance);return _},_isSelectionKeyPressed:function(r){var s=!1;return Array.isArray(this.selectionKey)?s=!!this.selectionKey.find(function(n){return r[n]===!0}):s=r[this.selectionKey],s},_shouldClearSelection:function(r,s){var n=this.getActiveObjects(),a=this._activeObject;return!s||s&&a&&n.length>1&&n.indexOf(s)===-1&&a!==s&&!this._isSelectionKeyPressed(r)||s&&!s.evented||s&&!s.selectable&&a&&a!==s},_shouldCenterTransform:function(r,s,n){if(r){var a;return s==="scale"||s==="scaleX"||s==="scaleY"||s==="resizing"?a=this.centeredScaling||r.centeredScaling:s==="rotate"&&(a=this.centeredRotation||r.centeredRotation),a?!n:n}},_getOriginFromCorner:function(r,s){var n={x:r.originX,y:r.originY};return s==="ml"||s==="tl"||s==="bl"?n.x="right":(s==="mr"||s==="tr"||s==="br")&&(n.x="left"),s==="tl"||s==="mt"||s==="tr"?n.y="bottom":(s==="bl"||s==="mb"||s==="br")&&(n.y="top"),n},_getActionFromCorner:function(r,s,n,a){if(!s||!r)return"drag";var f=a.controls[s];return f.getActionName(n,f,a)},_setupCurrentTransform:function(r,s,n){if(s){var a=this.getPointer(r),f=s.__corner,o=s.controls[f],d=n&&f?o.getActionHandler(r,s,o):e.controlsUtils.dragHandler,g=this._getActionFromCorner(n,f,r,s),v=this._getOriginFromCorner(s,f),_=r[this.centeredKey],b={target:s,action:g,actionHandler:d,corner:f,scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,offsetX:a.x-s.left,offsetY:a.y-s.top,originX:v.x,originY:v.y,ex:a.x,ey:a.y,lastX:a.x,lastY:a.y,theta:i(s.angle),width:s.width*s.scaleX,shiftKey:r.shiftKey,altKey:_,original:e.util.saveObjectTransform(s)};this._shouldCenterTransform(s,g,_)&&(b.originX="center",b.originY="center"),b.original.originX=v.x,b.original.originY=v.y,this._currentTransform=b,this._beforeTransform(r)}},setCursor:function(r){this.upperCanvasEl.style.cursor=r},_drawSelection:function(r){var s=this._groupSelector,n=new e.Point(s.ex,s.ey),a=e.util.transformPoint(n,this.viewportTransform),f=new e.Point(s.ex+s.left,s.ey+s.top),o=e.util.transformPoint(f,this.viewportTransform),d=Math.min(a.x,o.x),g=Math.min(a.y,o.y),v=Math.max(a.x,o.x),_=Math.max(a.y,o.y),b=this.selectionLineWidth/2;this.selectionColor&&(r.fillStyle=this.selectionColor,r.fillRect(d,g,v-d,_-g)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(r.lineWidth=this.selectionLineWidth,r.strokeStyle=this.selectionBorderColor,d+=b,g+=b,v-=b,_-=b,e.Object.prototype._setLineDash.call(this,r,this.selectionDashArray),r.strokeRect(d,g,v-d,_-g))},findTarget:function(r,s){if(!this.skipTargetFind){var n=!0,a=this.getPointer(r,n),f=this._activeObject,o=this.getActiveObjects(),d,g,v=c(r),_=o.length>1&&!s||o.length===1;if(this.targets=[],_&&f._findTargetCorner(a,v)||o.length>1&&!s&&f===this._searchPossibleTargets([f],a))return f;if(o.length===1&&f===this._searchPossibleTargets([f],a))if(this.preserveObjectStacking)d=f,g=this.targets,this.targets=[];else return f;var b=this._searchPossibleTargets(this._objects,a);return r[this.altSelectionKey]&&b&&d&&b!==d&&(b=d,this.targets=g),b}},_checkTarget:function(r,s,n){if(s&&s.visible&&s.evented&&s.containsPoint(r))if((this.perPixelTargetFind||s.perPixelTargetFind)&&!s.isEditing){var a=this.isTargetTransparent(s,n.x,n.y);if(!a)return!0}else return!0},_searchPossibleTargets:function(r,s){for(var n,a=r.length,f;a--;){var o=r[a],d=o.group?this._normalizePointer(o.group,s):s;if(this._checkTarget(d,o,s)){n=r[a],n.subTargetCheck&&n instanceof e.Group&&(f=this._searchPossibleTargets(n._objects,s),f&&this.targets.push(f));break}}return n},restorePointerVpt:function(r){return e.util.transformPoint(r,e.util.invertTransform(this.viewportTransform))},getPointer:function(r,s){if(this._absolutePointer&&!s)return this._absolutePointer;if(this._pointer&&s)return this._pointer;var n=u(r),a=this.upperCanvasEl,f=a.getBoundingClientRect(),o=f.width||0,d=f.height||0,g;(!o||!d)&&("top"in f&&"bottom"in f&&(d=Math.abs(f.top-f.bottom)),"right"in f&&"left"in f&&(o=Math.abs(f.right-f.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,s||(n=this.restorePointerVpt(n));var v=this.getRetinaScaling();return v!==1&&(n.x/=v,n.y/=v),o===0||d===0?g={width:1,height:1}:g={width:a.width/o,height:a.height/d},{x:n.x*g.width,y:n.y*g.height}},_createUpperCanvas:function(){var r=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),s=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),e.util.addClass(n,"upper-canvas "+r),this.wrapperEl.appendChild(n),this._copyCanvasStyle(s,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(r){var s=this.width||r.width,n=this.height||r.height;e.util.setStyle(r,{position:"absolute",width:s+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),r.width=s,r.height=n,e.util.makeElementUnselectable(r)},_copyCanvasStyle:function(r,s){s.style.cssText=r.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var r=this._activeObject;return r?r.type==="activeSelection"&&r._objects?r._objects.slice(0):[r]:[]},_onObjectRemoved:function(r){r===this._activeObject&&(this.fire("before:selection:cleared",{target:r}),this._discardActiveObject(),this.fire("selection:cleared",{target:r}),r.fire("deselected")),r===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",r)},_fireSelectionEvents:function(r,s){var n=!1,a=this.getActiveObjects(),f=[],o=[];r.forEach(function(d){a.indexOf(d)===-1&&(n=!0,d.fire("deselected",{e:s,target:d}),o.push(d))}),a.forEach(function(d){r.indexOf(d)===-1&&(n=!0,d.fire("selected",{e:s,target:d}),f.push(d))}),r.length>0&&a.length>0?n&&this.fire("selection:updated",{e:s,selected:f,deselected:o}):a.length>0?this.fire("selection:created",{e:s,selected:f}):r.length>0&&this.fire("selection:cleared",{e:s,deselected:o})},setActiveObject:function(r,s){var n=this.getActiveObjects();return this._setActiveObject(r,s),this._fireSelectionEvents(n,s),this},_setActiveObject:function(r,s){return this._activeObject===r||!this._discardActiveObject(s,r)||r.onSelect({e:s})?!1:(this._activeObject=r,!0)},_discardActiveObject:function(r,s){var n=this._activeObject;if(n){if(n.onDeselect({e:r,object:s}))return!1;this._activeObject=null}return!0},discardActiveObject:function(r){var s=this.getActiveObjects(),n=this.getActiveObject();return s.length&&this.fire("before:selection:cleared",{target:n,e:r}),this._discardActiveObject(r),this._fireSelectionEvents(s,r),this},dispose:function(){var r=this.wrapperEl;return this.removeListeners(),r.removeChild(this.upperCanvasEl),r.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(s){e.util.cleanUpJsdomNode(this[s]),this[s]=void 0}).bind(this)),r.parentNode&&r.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(r){var s=this._activeObject;s&&s._renderControls(r)},_toObject:function(r,s,n){var a=this._realizeGroupTransformOnObject(r),f=this.callSuper("_toObject",r,s,n);return this._unwindGroupTransformOnObject(r,a),f},_realizeGroupTransformOnObject:function(r){if(r.group&&r.group.type==="activeSelection"&&this._activeObject===r.group){var s=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return s.forEach(function(a){n[a]=r[a]}),e.util.addTransformToObject(r,this._activeObject.calcOwnMatrix()),n}else return null},_unwindGroupTransformOnObject:function(r,s){s&&r.set(s)},_setSVGObject:function(r,s,n){var a=this._realizeGroupTransformOnObject(s);this.callSuper("_setSVGObject",r,s,n),this._unwindGroupTransformOnObject(s,a)},setViewportTransform:function(r){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,r)}});for(var l in e.StaticCanvas)l!=="prototype"&&(e.Canvas[l]=e.StaticCanvas[l])}(),function(){var u=e.util.addListener,i=e.util.removeListener,c=3,l=2,r=1,s={passive:!1};function n(a,f){return a.button&&a.button===f-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(u,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(a,f){var o=this.upperCanvasEl,d=this._getEventPrefix();a(e.window,"resize",this._onResize),a(o,d+"down",this._onMouseDown),a(o,d+"move",this._onMouseMove,s),a(o,d+"out",this._onMouseOut),a(o,d+"enter",this._onMouseEnter),a(o,"wheel",this._onMouseWheel),a(o,"contextmenu",this._onContextMenu),a(o,"dblclick",this._onDoubleClick),a(o,"dragover",this._onDragOver),a(o,"dragenter",this._onDragEnter),a(o,"dragleave",this._onDragLeave),a(o,"drop",this._onDrop),this.enablePointerEvents||a(o,"touchstart",this._onTouchStart,s),typeof eventjs<"u"&&f in eventjs&&(eventjs[f](o,"gesture",this._onGesture),eventjs[f](o,"drag",this._onDrag),eventjs[f](o,"orientation",this._onOrientationChange),eventjs[f](o,"shake",this._onShake),eventjs[f](o,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(i,"remove");var a=this._getEventPrefix();i(e.document,a+"up",this._onMouseUp),i(e.document,"touchend",this._onTouchEnd,s),i(e.document,a+"move",this._onMouseMove,s),i(e.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(a,f){this.__onTransformGesture&&this.__onTransformGesture(a,f)},_onDrag:function(a,f){this.__onDrag&&this.__onDrag(a,f)},_onMouseWheel:function(a){this.__onMouseWheel(a)},_onMouseOut:function(a){var f=this._hoveredTarget;this.fire("mouse:out",{target:f,e:a}),this._hoveredTarget=null,f&&f.fire("mouseout",{e:a});var o=this;this._hoveredTargets.forEach(function(d){o.fire("mouse:out",{target:f,e:a}),d&&f.fire("mouseout",{e:a})}),this._hoveredTargets=[]},_onMouseEnter:function(a){!this._currentTransform&&!this.findTarget(a)&&(this.fire("mouse:over",{target:null,e:a}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(a,f){this.__onOrientationChange&&this.__onOrientationChange(a,f)},_onShake:function(a,f){this.__onShake&&this.__onShake(a,f)},_onLongPress:function(a,f){this.__onLongPress&&this.__onLongPress(a,f)},_onDragOver:function(a){a.preventDefault();var f=this._simpleEventHandler("dragover",a);this._fireEnterLeaveEvents(f,a)},_onDrop:function(a){return this._simpleEventHandler("drop:before",a),this._simpleEventHandler("drop",a)},_onContextMenu:function(a){return this.stopContextMenu&&(a.stopPropagation(),a.preventDefault()),!1},_onDoubleClick:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"dblclick"),this._resetTransformEventData(a)},getPointerId:function(a){var f=a.changedTouches;return f?f[0]&&f[0].identifier:this.enablePointerEvents?a.pointerId:-1},_isMainEvent:function(a){return a.isPrimary===!0?!0:a.isPrimary===!1?!1:a.type==="touchend"&&a.touches.length===0?!0:a.changedTouches?a.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(a){a.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(a)),this.__onMouseDown(a),this._resetTransformEventData();var f=this.upperCanvasEl,o=this._getEventPrefix();u(e.document,"touchend",this._onTouchEnd,s),u(e.document,"touchmove",this._onMouseMove,s),i(f,o+"down",this._onMouseDown)},_onMouseDown:function(a){this.__onMouseDown(a),this._resetTransformEventData();var f=this.upperCanvasEl,o=this._getEventPrefix();i(f,o+"move",this._onMouseMove,s),u(e.document,o+"up",this._onMouseUp),u(e.document,o+"move",this._onMouseMove,s)},_onTouchEnd:function(a){if(!(a.touches.length>0)){this.__onMouseUp(a),this._resetTransformEventData(),this.mainTouchId=null;var f=this._getEventPrefix();i(e.document,"touchend",this._onTouchEnd,s),i(e.document,"touchmove",this._onMouseMove,s);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){u(o.upperCanvasEl,f+"down",o._onMouseDown),o._willAddMouseDown=0},400)}},_onMouseUp:function(a){this.__onMouseUp(a),this._resetTransformEventData();var f=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(a)&&(i(e.document,o+"up",this._onMouseUp),i(e.document,o+"move",this._onMouseMove,s),u(f,o+"move",this._onMouseMove,s))},_onMouseMove:function(a){!this.allowTouchScrolling&&a.preventDefault&&a.preventDefault(),this.__onMouseMove(a)},_onResize:function(){this.calcOffset()},_shouldRender:function(a){var f=this._activeObject;return!!f!=!!a||f&&a&&f!==a?!0:(f&&f.isEditing,!1)},__onMouseUp:function(a){var f,o=this._currentTransform,d=this._groupSelector,g=!1,v=!d||d.left===0&&d.top===0;if(this._cacheTransformEventData(a),f=this._target,this._handleEvent(a,"up:before"),n(a,c)){this.fireRightClick&&this._handleEvent(a,"up",c,v);return}if(n(a,l)){this.fireMiddleClick&&this._handleEvent(a,"up",l,v),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(a);return}if(this._isMainEvent(a)){if(o&&(this._finalizeCurrentTransform(a),g=o.actionPerformed),!v){var _=f===this._activeObject;this._maybeGroupObjects(a),g||(g=this._shouldRender(f)||!_&&f===this._activeObject)}var b,w;if(f){if(b=f._findTargetCorner(this.getPointer(a,!0),e.util.isTouchEvent(a)),f.selectable&&f!==this._activeObject&&f.activeOn==="up")this.setActiveObject(f,a),g=!0;else{var x=f.controls[b],A=x&&x.getMouseUpHandler(a,f,x);A&&(w=this.getPointer(a),A(a,o,w.x,w.y))}f.isMoving=!1}if(o&&(o.target!==f||o.corner!==b)){var M=o.target&&o.target.controls[o.corner],X=M&&M.getMouseUpHandler(a,f,x);w=w||this.getPointer(a),X&&X(a,o,w.x,w.y)}this._setCursorFromEvent(a,f),this._handleEvent(a,"up",r,v),this._groupSelector=null,this._currentTransform=null,f&&(f.__corner=0),g?this.requestRenderAll():v||this.renderTop()}},_simpleEventHandler:function(a,f){var o=this.findTarget(f),d=this.targets,g={e:f,target:o,subTargets:d};if(this.fire(a,g),o&&o.fire(a,g),!d)return o;for(var v=0;v<d.length;v++)d[v].fire(a,g);return o},_handleEvent:function(a,f,o,d){var g=this._target,v=this.targets||[],_={e:a,target:g,subTargets:v,button:o||r,isClick:d||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};f==="up"&&(_.currentTarget=this.findTarget(a),_.currentSubTargets=this.targets),this.fire("mouse:"+f,_),g&&g.fire("mouse"+f,_);for(var b=0;b<v.length;b++)v[b].fire("mouse"+f,_)},_finalizeCurrentTransform:function(a){var f=this._currentTransform,o=f.target,d={e:a,target:o,transform:f,action:f.action};o._scaling&&(o._scaling=!1),o.setCoords(),(f.actionPerformed||this.stateful&&o.hasStateChanged())&&this._fire("modified",d)},_onMouseDownInDrawingMode:function(a){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(a).requestRenderAll();var f=this.getPointer(a);this.freeDrawingBrush.onMouseDown(f,{e:a,pointer:f}),this._handleEvent(a,"down")},_onMouseMoveInDrawingMode:function(a){if(this._isCurrentlyDrawing){var f=this.getPointer(a);this.freeDrawingBrush.onMouseMove(f,{e:a,pointer:f})}this.setCursor(this.freeDrawingCursor),this._handleEvent(a,"move")},_onMouseUpInDrawingMode:function(a){var f=this.getPointer(a);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:a,pointer:f}),this._handleEvent(a,"up")},__onMouseDown:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"down:before");var f=this._target;if(n(a,c)){this.fireRightClick&&this._handleEvent(a,"down",c);return}if(n(a,l)){this.fireMiddleClick&&this._handleEvent(a,"down",l);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(a);return}if(this._isMainEvent(a)&&!this._currentTransform){var o=this._pointer;this._previousPointer=o;var d=this._shouldRender(f),g=this._shouldGroup(a,f);if(this._shouldClearSelection(a,f)?this.discardActiveObject(a):g&&(this._handleGrouping(a,f),f=this._activeObject),this.selection&&(!f||!f.selectable&&!f.isEditing&&f!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),f){var v=f===this._activeObject;f.selectable&&f.activeOn==="down"&&this.setActiveObject(f,a);var _=f._findTargetCorner(this.getPointer(a,!0),e.util.isTouchEvent(a));if(f.__corner=_,f===this._activeObject&&(_||!g)){this._setupCurrentTransform(a,f,v);var b=f.controls[_],o=this.getPointer(a),w=b&&b.getMouseDownHandler(a,f,b);w&&w(a,this._currentTransform,o.x,o.y)}}this._handleEvent(a,"down"),(d||g)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(a){this._resetTransformEventData(),this._pointer=this.getPointer(a,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(a)||null},_beforeTransform:function(a){var f=this._currentTransform;this.stateful&&f.target.saveState(),this.fire("before:transform",{e:a,transform:f})},__onMouseMove:function(a){this._handleEvent(a,"move:before"),this._cacheTransformEventData(a);var f,o;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(a);return}if(this._isMainEvent(a)){var d=this._groupSelector;d?(o=this._absolutePointer,d.left=o.x-d.ex,d.top=o.y-d.ey,this.renderTop()):this._currentTransform?this._transformObject(a):(f=this.findTarget(a)||null,this._setCursorFromEvent(a,f),this._fireOverOutEvents(f,a)),this._handleEvent(a,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(a,f){var o=this._hoveredTarget,d=this._hoveredTargets,g=this.targets,v=Math.max(d.length,g.length);this.fireSyntheticInOutEvents(a,f,{oldTarget:o,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var _=0;_<v;_++)this.fireSyntheticInOutEvents(g[_],f,{oldTarget:d[_],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=a,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(a,f){var o=this._draggedoverTarget,d=this._hoveredTargets,g=this.targets,v=Math.max(d.length,g.length);this.fireSyntheticInOutEvents(a,f,{oldTarget:o,evtOut:"dragleave",evtIn:"dragenter"});for(var _=0;_<v;_++)this.fireSyntheticInOutEvents(g[_],f,{oldTarget:d[_],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=a},fireSyntheticInOutEvents:function(a,f,o){var d,g,v=o.oldTarget,_,b,w=v!==a,x=o.canvasEvtIn,A=o.canvasEvtOut;w&&(d={e:f,target:a,previousTarget:v},g={e:f,target:v,nextTarget:a}),b=a&&w,_=v&&w,_&&(A&&this.fire(A,g),v.fire(o.evtOut,g)),b&&(x&&this.fire(x,d),a.fire(o.evtIn,d))},__onMouseWheel:function(a){this._cacheTransformEventData(a),this._handleEvent(a,"wheel"),this._resetTransformEventData()},_transformObject:function(a){var f=this.getPointer(a),o=this._currentTransform;o.reset=!1,o.shiftKey=a.shiftKey,o.altKey=a[this.centeredKey],this._performTransformAction(a,o,f),o.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(a,f,o){var d=o.x,g=o.y,v=f.action,_=!1,b=f.actionHandler;b&&(_=b(a,f,d,g)),v==="drag"&&_&&(f.target.isMoving=!0,this.setCursor(f.target.moveCursor||this.moveCursor)),f.actionPerformed=f.actionPerformed||_},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(a,f){if(!f)return this.setCursor(this.defaultCursor),!1;var o=f.hoverCursor||this.hoverCursor,d=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,g=(!d||!d.contains(f))&&f._findTargetCorner(this.getPointer(a,!0));g?this.setCursor(this.getCornerCursor(g,f,a)):(f.subTargetCheck&&this.targets.concat().reverse().map(function(v){o=v.hoverCursor||o}),this.setCursor(o))},getCornerCursor:function(a,f,o){var d=f.controls[a];return d.cursorStyleHandler(o,d,f)}})}(),function(){var u=Math.min,i=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(c,l){var r=this._activeObject;return r&&this._isSelectionKeyPressed(c)&&l&&l.selectable&&this.selection&&(r!==l||r.type==="activeSelection")&&!l.onSelect({e:c})},_handleGrouping:function(c,l){var r=this._activeObject;r.__corner||l===r&&(l=this.findTarget(c,!0),!l||!l.selectable)||(r&&r.type==="activeSelection"?this._updateActiveSelection(l,c):this._createActiveSelection(l,c))},_updateActiveSelection:function(c,l){var r=this._activeObject,s=r._objects.slice(0);r.contains(c)?(r.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),r.size()===1&&this._setActiveObject(r.item(0),l)):(r.addWithUpdate(c),this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(s,l)},_createActiveSelection:function(c,l){var r=this.getActiveObjects(),s=this._createGroup(c);this._hoveredTarget=s,this._setActiveObject(s,l),this._fireSelectionEvents(r,l)},_createGroup:function(c){var l=this._objects,r=l.indexOf(this._activeObject)<l.indexOf(c),s=r?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(s,{canvas:this})},_groupSelectedObjects:function(c){var l=this._collectObjects(c),r;l.length===1?this.setActiveObject(l[0],c):l.length>1&&(r=new e.ActiveSelection(l.reverse(),{canvas:this}),this.setActiveObject(r,c))},_collectObjects:function(c){for(var l=[],r,s=this._groupSelector.ex,n=this._groupSelector.ey,a=s+this._groupSelector.left,f=n+this._groupSelector.top,o=new e.Point(u(s,a),u(n,f)),d=new e.Point(i(s,a),i(n,f)),g=!this.selectionFullyContained,v=s===a&&n===f,_=this._objects.length;_--&&(r=this._objects[_],!(!(!r||!r.selectable||!r.visible)&&(g&&r.intersectsWithRect(o,d,!0)||r.isContainedWithinRect(o,d,!0)||g&&r.containsPoint(o,null,!0)||g&&r.containsPoint(d,null,!0))&&(l.push(r),v))););return l.length>1&&(l=l.filter(function(b){return!b.onSelect({e:c})})),l},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(u){u||(u={});var i=u.format||"png",c=u.quality||1,l=(u.multiplier||1)*(u.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(l,u);return e.util.toDataURL(r,i,c)},toCanvasElement:function(u,i){u=u||1,i=i||{};var c=(i.width||this.width)*u,l=(i.height||this.height)*u,r=this.getZoom(),s=this.width,n=this.height,a=r*u,f=this.viewportTransform,o=(f[4]-(i.left||0))*u,d=(f[5]-(i.top||0))*u,g=this.interactive,v=[a,0,0,a,o,d],_=this.enableRetinaScaling,b=e.util.createCanvasElement(),w=this.contextTop;return b.width=c,b.height=l,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=v,this.width=c,this.height=l,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),this._objects),this.viewportTransform=f,this.width=s,this.height=n,this.calcViewportBoundaries(),this.interactive=g,this.enableRetinaScaling=_,this.contextTop=w,b}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(u,i,c){if(u){var l=typeof u=="string"?JSON.parse(u):e.util.object.clone(u),r=this,s=l.clipPath,n=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete l.clipPath,this._enlivenObjects(l.objects,function(a){r.clear(),r._setBgOverlay(l,function(){s?r._enlivenObjects([s],function(f){r.clipPath=f[0],r.__setupCanvas.call(r,l,a,n,i)}):r.__setupCanvas.call(r,l,a,n,i)})},c),this}},__setupCanvas:function(u,i,c,l){var r=this;i.forEach(function(s,n){r.insertAt(s,n)}),this.renderOnAddRemove=c,delete u.objects,delete u.backgroundImage,delete u.overlayImage,delete u.background,delete u.overlay,this._setOptions(u),this.renderAll(),l&&l()},_setBgOverlay:function(u,i){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!u.backgroundImage&&!u.overlayImage&&!u.background&&!u.overlay){i&&i();return}var l=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",u.backgroundImage,c,l),this.__setBgOverlay("overlayImage",u.overlayImage,c,l),this.__setBgOverlay("backgroundColor",u.background,c,l),this.__setBgOverlay("overlayColor",u.overlay,c,l)},__setBgOverlay:function(u,i,c,l){var r=this;if(!i){c[u]=!0,l&&l();return}u==="backgroundImage"||u==="overlayImage"?e.util.enlivenObjects([i],function(s){r[u]=s[0],c[u]=!0,l&&l()}):this["set"+e.util.string.capitalize(u,!0)](i,function(){c[u]=!0,l&&l()})},_enlivenObjects:function(u,i,c){if(!u||u.length===0){i&&i([]);return}e.util.enlivenObjects(u,function(l){i&&i(l)},null,c)},_toDataURL:function(u,i){this.clone(function(c){i(c.toDataURL(u))})},_toDataURLWithMultiplier:function(u,i,c){this.clone(function(l){c(l.toDataURLWithMultiplier(u,i))})},clone:function(u,i){var c=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(l){l.loadFromJSON(c,function(){u&&u(l)})})},cloneWithoutData:function(u){var i=e.util.createCanvasElement();i.width=this.width,i.height=this.height;var c=new e.Canvas(i);this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),u&&u(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):u&&u(c)}}),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.extend,l=i.util.object.clone,r=i.util.toFixed,s=i.util.string.capitalize,n=i.util.degreesToRadians,a=!i.isLikelyNode,f=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(o){o&&this.setOptions(o)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(o){var d=i.perfLimitSizeTotal,g=o.width,v=o.height,_=i.maxCacheSideLimit,b=i.minCacheSideLimit;if(g<=_&&v<=_&&g*v<=d)return g<b&&(o.width=b),v<b&&(o.height=b),o;var w=g/v,x=i.util.limitDimsByArea(w,d),A=i.util.capValue,M=A(b,x.x,_),X=A(b,x.y,_);return g>M&&(o.zoomX/=g/M,o.width=M,o.capped=!0),v>X&&(o.zoomY/=v/X,o.height=X,o.capped=!0),o},_getCacheCanvasDimensions:function(){var o=this.getTotalObjectScaling(),d=this._getTransformedDimensions(0,0),g=d.x*o.scaleX/this.scaleX,v=d.y*o.scaleY/this.scaleY;return{width:g+f,height:v+f,zoomX:o.scaleX,zoomY:o.scaleY,x:g,y:v}},_updateCacheCanvas:function(){var o=this.canvas;if(this.noScaleCache&&o&&o._currentTransform){var d=o._currentTransform.target,g=o._currentTransform.action;if(this===d&&g.slice&&g.slice(0,5)==="scale")return!1}var v=this._cacheCanvas,_=this._limitCacheSize(this._getCacheCanvasDimensions()),b=i.minCacheSideLimit,w=_.width,x=_.height,A,M,X=_.zoomX,z=_.zoomY,$=w!==this.cacheWidth||x!==this.cacheHeight,q=this.zoomX!==X||this.zoomY!==z,K=$||q,te=0,re=0,oe=!1;if($){var se=this._cacheCanvas.width,S=this._cacheCanvas.height,F=w>se||x>S,I=(w<se*.9||x<S*.9)&&se>b&&S>b;oe=F||I,F&&!_.capped&&(w>b||x>b)&&(te=w*.1,re=x*.1)}return this instanceof i.Text&&this.path&&(K=!0,oe=!0,te+=this.getHeightOfLine(0)*this.zoomX,re+=this.getHeightOfLine(0)*this.zoomY),K?(oe?(v.width=Math.ceil(w+te),v.height=Math.ceil(x+re)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,v.width,v.height)),A=_.x/2,M=_.y/2,this.cacheTranslationX=Math.round(v.width/2-A)+A,this.cacheTranslationY=Math.round(v.height/2-M)+M,this.cacheWidth=w,this.cacheHeight=x,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(X,z),this.zoomX=X,this.zoomY=z,!0):!1},setOptions:function(o){this._setOptions(o),this._initGradient(o.fill,"fill"),this._initGradient(o.stroke,"stroke"),this._initPattern(o.fill,"fill"),this._initPattern(o.stroke,"stroke")},transform:function(o){var d=this.group&&!this.group._transformDone||this.group&&this.canvas&&o===this.canvas.contextTop,g=this.calcTransformMatrix(!d);o.transform(g[0],g[1],g[2],g[3],g[4],g[5])},toObject:function(o){var d=i.Object.NUM_FRACTION_DIGITS,g={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:r(this.left,d),top:r(this.top,d),width:r(this.width,d),height:r(this.height,d),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,d),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,d),scaleX:r(this.scaleX,d),scaleY:r(this.scaleY,d),angle:r(this.angle,d),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,d),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,d),skewY:r(this.skewY,d)};return this.clipPath&&!this.clipPath.excludeFromExport&&(g.clipPath=this.clipPath.toObject(o),g.clipPath.inverted=this.clipPath.inverted,g.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,g,o),this.includeDefaultValues||(g=this._removeDefaultValues(g)),g},toDatalessObject:function(o){return this.toObject(o)},_removeDefaultValues:function(o){var d=i.util.getKlass(o.type).prototype,g=d.stateProperties;return g.forEach(function(v){v==="left"||v==="top"||(o[v]===d[v]&&delete o[v],Array.isArray(o[v])&&Array.isArray(d[v])&&o[v].length===0&&d[v].length===0&&delete o[v])}),o},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var o=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(o.scaleX),scaleY:Math.abs(o.scaleY)}},getTotalObjectScaling:function(){var o=this.getObjectScaling(),d=o.scaleX,g=o.scaleY;if(this.canvas){var v=this.canvas.getZoom(),_=this.canvas.getRetinaScaling();d*=v*_,g*=v*_}return{scaleX:d,scaleY:g}},getObjectOpacity:function(){var o=this.opacity;return this.group&&(o*=this.group.getObjectOpacity()),o},_set:function(o,d){var g=o==="scaleX"||o==="scaleY",v=this[o]!==d,_=!1;return g&&(d=this._constrainScale(d)),o==="scaleX"&&d<0?(this.flipX=!this.flipX,d*=-1):o==="scaleY"&&d<0?(this.flipY=!this.flipY,d*=-1):o==="shadow"&&d&&!(d instanceof i.Shadow)?d=new i.Shadow(d):o==="dirty"&&this.group&&this.group.set("dirty",d),this[o]=d,v&&(_=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(o)>-1?(this.dirty=!0,_&&this.group.set("dirty",!0)):_&&this.stateProperties.indexOf(o)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(o){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(o.save(),this._setupCompositeOperation(o),this.drawSelectionBackground(o),this.transform(o),this._setOpacity(o),this._setShadow(o,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(o)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(o),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),o.restore())},renderCache:function(o){o=o||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,o.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(o,d){if(o.save(),d.inverted?o.globalCompositeOperation="destination-out":o.globalCompositeOperation="destination-in",d.absolutePositioned){var g=i.util.invertTransform(this.calcTransformMatrix());o.transform(g[0],g[1],g[2],g[3],g[4],g[5])}d.transform(o),o.scale(1/d.zoomX,1/d.zoomY),o.drawImage(d._cacheCanvas,-d.cacheTranslationX,-d.cacheTranslationY),o.restore()},drawObject:function(o,d){var g=this.fill,v=this.stroke;d?(this.fill="black",this.stroke="",this._setClippingProperties(o)):this._renderBackground(o),this._render(o),this._drawClipPath(o,this.clipPath),this.fill=g,this.stroke=v},_drawClipPath:function(o,d){d&&(d.canvas=this.canvas,d.shouldCache(),d._transformDone=!0,d.renderCache({forClipping:!0}),this.drawClipPathOnCache(o,d))},drawCacheOnCanvas:function(o){o.scale(1/this.zoomX,1/this.zoomY),o.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(o){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!o&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!o){var d=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-g/2,d,g)}return!0}return!1},_renderBackground:function(o){if(this.backgroundColor){var d=this._getNonTransformedDimensions();o.fillStyle=this.backgroundColor,o.fillRect(-d.x/2,-d.y/2,d.x,d.y),this._removeShadow(o)}},_setOpacity:function(o){this.group&&!this.group._transformDone?o.globalAlpha=this.getObjectOpacity():o.globalAlpha*=this.opacity},_setStrokeStyles:function(o,d){var g=d.stroke;g&&(o.lineWidth=d.strokeWidth,o.lineCap=d.strokeLineCap,o.lineDashOffset=d.strokeDashOffset,o.lineJoin=d.strokeLineJoin,o.miterLimit=d.strokeMiterLimit,g.toLive?g.gradientUnits==="percentage"||g.gradientTransform||g.patternTransform?this._applyPatternForTransformedGradient(o,g):(o.strokeStyle=g.toLive(o,this),this._applyPatternGradientTransform(o,g)):o.strokeStyle=d.stroke)},_setFillStyles:function(o,d){var g=d.fill;g&&(g.toLive?(o.fillStyle=g.toLive(o,this),this._applyPatternGradientTransform(o,d.fill)):o.fillStyle=g)},_setClippingProperties:function(o){o.globalAlpha=1,o.strokeStyle="transparent",o.fillStyle="#000000"},_setLineDash:function(o,d){!d||d.length===0||(1&d.length&&d.push.apply(d,d),o.setLineDash(d))},_renderControls:function(o,d){var g=this.getViewportTransform(),v=this.calcTransformMatrix(),_,b,w;d=d||{},b=typeof d.hasBorders<"u"?d.hasBorders:this.hasBorders,w=typeof d.hasControls<"u"?d.hasControls:this.hasControls,v=i.util.multiplyTransformMatrices(g,v),_=i.util.qrDecompose(v),o.save(),o.translate(_.translateX,_.translateY),o.lineWidth=1*this.borderScaleFactor,this.group||(o.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(_.angle-=180),o.rotate(n(this.group?_.angle:this.angle)),d.forActiveSelection||this.group?b&&this.drawBordersInGroup(o,_,d):b&&this.drawBorders(o,d),w&&this.drawControls(o,d),o.restore()},_setShadow:function(o){if(this.shadow){var d=this.shadow,g=this.canvas,v,_=g&&g.viewportTransform[0]||1,b=g&&g.viewportTransform[3]||1;d.nonScaling?v={scaleX:1,scaleY:1}:v=this.getObjectScaling(),g&&g._isRetinaScaling()&&(_*=i.devicePixelRatio,b*=i.devicePixelRatio),o.shadowColor=d.color,o.shadowBlur=d.blur*i.browserShadowBlurConstant*(_+b)*(v.scaleX+v.scaleY)/4,o.shadowOffsetX=d.offsetX*_*v.scaleX,o.shadowOffsetY=d.offsetY*b*v.scaleY}},_removeShadow:function(o){this.shadow&&(o.shadowColor="",o.shadowBlur=o.shadowOffsetX=o.shadowOffsetY=0)},_applyPatternGradientTransform:function(o,d){if(!d||!d.toLive)return{offsetX:0,offsetY:0};var g=d.gradientTransform||d.patternTransform,v=-this.width/2+d.offsetX||0,_=-this.height/2+d.offsetY||0;return d.gradientUnits==="percentage"?o.transform(this.width,0,0,this.height,v,_):o.transform(1,0,0,1,v,_),g&&o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),{offsetX:v,offsetY:_}},_renderPaintInOrder:function(o){this.paintFirst==="stroke"?(this._renderStroke(o),this._renderFill(o)):(this._renderFill(o),this._renderStroke(o))},_render:function(){},_renderFill:function(o){this.fill&&(o.save(),this._setFillStyles(o,this),this.fillRule==="evenodd"?o.fill("evenodd"):o.fill(),o.restore())},_renderStroke:function(o){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this.strokeUniform&&this.group){var d=this.getObjectScaling();o.scale(1/d.scaleX,1/d.scaleY)}else this.strokeUniform&&o.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(o,this.strokeDashArray),this._setStrokeStyles(o,this),o.stroke(),o.restore()}},_applyPatternForTransformedGradient:function(o,d){var g=this._limitCacheSize(this._getCacheCanvasDimensions()),v=i.util.createCanvasElement(),_,b=this.canvas.getRetinaScaling(),w=g.x/this.scaleX/b,x=g.y/this.scaleY/b;v.width=w,v.height=x,_=v.getContext("2d"),_.beginPath(),_.moveTo(0,0),_.lineTo(w,0),_.lineTo(w,x),_.lineTo(0,x),_.closePath(),_.translate(w/2,x/2),_.scale(g.zoomX/this.scaleX/b,g.zoomY/this.scaleY/b),this._applyPatternGradientTransform(_,d),_.fillStyle=d.toLive(o),_.fill(),o.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),o.scale(b*this.scaleX/g.zoomX,b*this.scaleY/g.zoomY),o.strokeStyle=_.createPattern(v,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var o=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",o.scaleX),this.set("scaleY",o.scaleY),this.angle=o.angle,this.skewX=o.skewX,this.skewY=0}},_removeTransformMatrix:function(o){var d=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),d=i.util.transformPoint(d,this.transformMatrix)),this.transformMatrix=null,o&&(this.scaleX*=o.scaleX,this.scaleY*=o.scaleY,this.cropX=o.cropX,this.cropY=o.cropY,d.x+=o.offsetLeft,d.y+=o.offsetTop,this.width=o.width,this.height=o.height),this.setPositionByOrigin(d,"center","center")},clone:function(o,d){var g=this.toObject(d);this.constructor.fromObject?this.constructor.fromObject(g,o):i.Object._fromObject("Object",g,o)},cloneAsImage:function(o,d){var g=this.toCanvasElement(d);return o&&o(new i.Image(g)),this},toCanvasElement:function(o){o||(o={});var d=i.util,g=d.saveObjectTransform(this),v=this.group,_=this.shadow,b=Math.abs,w=(o.multiplier||1)*(o.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,o.withoutTransform&&d.resetObjectTransform(this),o.withoutShadow&&(this.shadow=null);var x=i.util.createCanvasElement(),A=this.getBoundingRect(!0,!0),M=this.shadow,X,z={x:0,y:0},$,q,K;M&&($=M.blur,M.nonScaling?X={scaleX:1,scaleY:1}:X=this.getObjectScaling(),z.x=2*Math.round(b(M.offsetX)+$)*b(X.scaleX),z.y=2*Math.round(b(M.offsetY)+$)*b(X.scaleY)),q=A.width+z.x,K=A.height+z.y,x.width=Math.ceil(q),x.height=Math.ceil(K);var te=new i.StaticCanvas(x,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});o.format==="jpeg"&&(te.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(te.width/2,te.height/2),"center","center");var re=this.canvas;te.add(this);var oe=te.toCanvasElement(w||1,o);return this.shadow=_,this.set("canvas",re),v&&(this.group=v),this.set(g).setCoords(),te._objects=[],te.dispose(),te=null,oe},toDataURL:function(o){return o||(o={}),i.util.toDataURL(this.toCanvasElement(o),o.format||"png",o.quality||1)},isType:function(o){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===o},complexity:function(){return 1},toJSON:function(o){return this.toObject(o)},rotate:function(o){var d=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return d&&this._setOriginToCenter(),this.set("angle",o),d&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(o,d){d=d||this.canvas.getPointer(o);var g=new i.Point(d.x,d.y),v=this._getLeftTopCoords();return this.angle&&(g=i.util.rotatePoint(g,v,n(-this.angle))),{x:g.x-v.x,y:g.y-v.y}},_setupCompositeOperation:function(o){this.globalCompositeOperation&&(o.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){i.runningAnimations&&i.runningAnimations.cancelByTarget(this)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),c(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object.ENLIVEN_PROPS=["clipPath"],i.Object._fromObject=function(o,d,g,v){var _=i[o];d=l(d,!0),i.util.enlivenPatterns([d.fill,d.stroke],function(b){typeof b[0]<"u"&&(d.fill=b[0]),typeof b[1]<"u"&&(d.stroke=b[1]),i.util.enlivenObjectEnlivables(d,d,function(){var w=v?new _(d[v],d):new _(d);g&&g(w)})})},i.Object.__uid=0)}(t),function(){var u=e.util.degreesToRadians,i={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(l,r,s,n,a){var f=l.x,o=l.y,d,g,v;return typeof r=="string"?r=i[r]:r-=.5,typeof n=="string"?n=i[n]:n-=.5,d=n-r,typeof s=="string"?s=c[s]:s-=.5,typeof a=="string"?a=c[a]:a-=.5,g=a-s,(d||g)&&(v=this._getTransformedDimensions(),f=l.x+d*v.x,o=l.y+g*v.y),new e.Point(f,o)},translateToCenterPoint:function(l,r,s){var n=this.translateToGivenOrigin(l,r,s,"center","center");return this.angle?e.util.rotatePoint(n,l,u(this.angle)):n},translateToOriginPoint:function(l,r,s){var n=this.translateToGivenOrigin(l,"center","center",r,s);return this.angle?e.util.rotatePoint(n,l,u(this.angle)):n},getCenterPoint:function(){var l=new e.Point(this.left,this.top);return this.translateToCenterPoint(l,this.originX,this.originY)},getPointByOrigin:function(l,r){var s=this.getCenterPoint();return this.translateToOriginPoint(s,l,r)},toLocalPoint:function(l,r,s){var n=this.getCenterPoint(),a,f;return typeof r<"u"&&typeof s<"u"?a=this.translateToGivenOrigin(n,"center","center",r,s):a=new e.Point(this.left,this.top),f=new e.Point(l.x,l.y),this.angle&&(f=e.util.rotatePoint(f,n,-u(this.angle))),f.subtractEquals(a)},setPositionByOrigin:function(l,r,s){var n=this.translateToCenterPoint(l,r,s),a=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",a.x),this.set("top",a.y)},adjustPosition:function(l){var r=u(this.angle),s=this.getScaledWidth(),n=e.util.cos(r)*s,a=e.util.sin(r)*s,f,o;typeof this.originX=="string"?f=i[this.originX]:f=this.originX-.5,typeof l=="string"?o=i[l]:o=l-.5,this.left+=n*(o-f),this.top+=a*(o-f),this.setCoords(),this.originX=l},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var l=this.getCenterPoint();this.originX="center",this.originY="center",this.left=l.x,this.top=l.y},_resetOrigin:function(){var l=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=l.x,this.top=l.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function u(s){return[new e.Point(s.tl.x,s.tl.y),new e.Point(s.tr.x,s.tr.y),new e.Point(s.br.x,s.br.y),new e.Point(s.bl.x,s.bl.y)]}var i=e.util,c=i.degreesToRadians,l=i.multiplyTransformMatrices,r=i.transformPoint;i.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(s,n){return n?s?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),s?this.aCoords:this.lineCoords)},getCoords:function(s,n){return u(this._getCoords(s,n))},intersectsWithRect:function(s,n,a,f){var o=this.getCoords(a,f),d=e.Intersection.intersectPolygonRectangle(o,s,n);return d.status==="Intersection"},intersectsWithObject:function(s,n,a){var f=e.Intersection.intersectPolygonPolygon(this.getCoords(n,a),s.getCoords(n,a));return f.status==="Intersection"||s.isContainedWithinObject(this,n,a)||this.isContainedWithinObject(s,n,a)},isContainedWithinObject:function(s,n,a){for(var f=this.getCoords(n,a),o=n?s.aCoords:s.lineCoords,d=0,g=s._getImageLines(o);d<4;d++)if(!s.containsPoint(f[d],g))return!1;return!0},isContainedWithinRect:function(s,n,a,f){var o=this.getBoundingRect(a,f);return o.left>=s.x&&o.left+o.width<=n.x&&o.top>=s.y&&o.top+o.height<=n.y},containsPoint:function(s,d,a,f){var o=this._getCoords(a,f),d=d||this._getImageLines(o),g=this._findCrossPoints(s,d);return g!==0&&g%2===1},isOnScreen:function(s){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br,f=this.getCoords(!0,s);return f.some(function(o){return o.x<=a.x&&o.x>=n.x&&o.y<=a.y&&o.y>=n.y})||this.intersectsWithRect(n,a,!0,s)?!0:this._containsCenterOfCanvas(n,a,s)},_containsCenterOfCanvas:function(s,n,a){var f={x:(s.x+n.x)/2,y:(s.y+n.y)/2};return!!this.containsPoint(f,null,!0,a)},isPartiallyOnScreen:function(s){if(!this.canvas)return!1;var n=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;if(this.intersectsWithRect(n,a,!0,s))return!0;var f=this.getCoords(!0,s).every(function(o){return(o.x>=a.x||o.x<=n.x)&&(o.y>=a.y||o.y<=n.y)});return f&&this._containsCenterOfCanvas(n,a,s)},_getImageLines:function(s){var n={topline:{o:s.tl,d:s.tr},rightline:{o:s.tr,d:s.br},bottomline:{o:s.br,d:s.bl},leftline:{o:s.bl,d:s.tl}};return n},_findCrossPoints:function(s,n){var a,f,o,d,g,v=0,_;for(var b in n)if(_=n[b],!(_.o.y<s.y&&_.d.y<s.y)&&!(_.o.y>=s.y&&_.d.y>=s.y)&&(_.o.x===_.d.x&&_.o.x>=s.x?g=_.o.x:(a=0,f=(_.d.y-_.o.y)/(_.d.x-_.o.x),o=s.y-a*s.x,d=_.o.y-f*_.o.x,g=-(o-d)/(a-f)),g>=s.x&&(v+=1),v===2))break;return v},getBoundingRect:function(s,n){var a=this.getCoords(s,n);return i.makeBoundingBoxFromPoints(a)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(s){return Math.abs(s)<this.minScaleLimit?s<0?-this.minScaleLimit:this.minScaleLimit:s===0?1e-4:s},scale:function(s){return this._set("scaleX",s),this._set("scaleY",s),this.setCoords()},scaleToWidth:function(s,n){var a=this.getBoundingRect(n).width/this.getScaledWidth();return this.scale(s/this.width/a)},scaleToHeight:function(s,n){var a=this.getBoundingRect(n).height/this.getScaledHeight();return this.scale(s/this.height/a)},calcLineCoords:function(){var s=this.getViewportTransform(),n=this.padding,a=c(this.angle),f=i.cos(a),o=i.sin(a),d=f*n,g=o*n,v=d+g,_=d-g,b=this.calcACoords(),w={tl:r(b.tl,s),tr:r(b.tr,s),bl:r(b.bl,s),br:r(b.br,s)};return n&&(w.tl.x-=_,w.tl.y-=v,w.tr.x+=v,w.tr.y-=_,w.bl.x-=v,w.bl.y+=_,w.br.x+=_,w.br.y+=v),w},calcOCoords:function(){var s=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),a=this.getViewportTransform(),f=l(a,n),o=l(f,s),o=l(o,[1/a[0],0,0,1/a[3],0,0]),d=this._calculateCurrentDimensions(),g={};return this.forEachControl(function(v,_,b){g[_]=v.positionHandler(d,o,b)}),g},calcACoords:function(){var s=this._calcRotateMatrix(),n=this._calcTranslateMatrix(),a=l(n,s),f=this._getTransformedDimensions(),o=f.x/2,d=f.y/2;return{tl:r({x:-o,y:-d},a),tr:r({x:o,y:-d},a),bl:r({x:-o,y:d},a),br:r({x:o,y:d},a)}},setCoords:function(s){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),s?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return i.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var s=this.getCenterPoint();return[1,0,0,1,s.x,s.y]},transformMatrixKey:function(s){var n="_",a="";return!s&&this.group&&(a=this.group.transformMatrixKey(s)+n),a+this.top+n+this.left+n+this.scaleX+n+this.scaleY+n+this.skewX+n+this.skewY+n+this.angle+n+this.originX+n+this.originY+n+this.width+n+this.height+n+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(s){var n=this.calcOwnMatrix();if(s||!this.group)return n;var a=this.transformMatrixKey(s),f=this.matrixCache||(this.matrixCache={});return f.key===a?f.value:(this.group&&(n=l(this.group.calcTransformMatrix(!1),n)),f.key=a,f.value=n,n)},calcOwnMatrix:function(){var s=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===s)return n.value;var a=this._calcTranslateMatrix(),f={angle:this.angle,translateX:a[4],translateY:a[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=s,n.value=i.composeMatrix(f),n.value},_getNonTransformedDimensions:function(){var s=this.strokeWidth,n=this.width+s,a=this.height+s;return{x:n,y:a}},_getTransformedDimensions:function(s,n){typeof s>"u"&&(s=this.skewX),typeof n>"u"&&(n=this.skewY);var a,f,o,d=s===0&&n===0;if(this.strokeUniform?(f=this.width,o=this.height):(a=this._getNonTransformedDimensions(),f=a.x,o=a.y),d)return this._finalizeDimensions(f*this.scaleX,o*this.scaleY);var g=i.sizeAfterTransform(f,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:s,skewY:n});return this._finalizeDimensions(g.x,g.y)},_finalizeDimensions:function(s,n){return this.strokeUniform?{x:s+this.strokeWidth,y:n+this.strokeWidth}:{x:s,y:n}},_calculateCurrentDimensions:function(){var s=this.getViewportTransform(),n=this._getTransformedDimensions(),a=r(n,s,!0);return a.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(u){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,u):this.canvas&&this.canvas.sendBackwards(this,u),this},bringForward:function(u){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,u):this.canvas&&this.canvas.bringForward(this,u),this},moveTo:function(u){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,u):this.canvas&&this.canvas.moveTo(this,u),this}}),function(){function u(c,l){if(l){if(l.toLive)return c+": url(#SVGID_"+l.id+"); ";var r=new e.Color(l),s=c+": "+r.toRgb()+"; ",n=r.getAlpha();return n!==1&&(s+=c+"-opacity: "+n.toString()+"; "),s}else return c+": none; "}var i=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(c){var l=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):"none",n=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",f=this.strokeLineJoin?this.strokeLineJoin:"miter",o=this.strokeMiterLimit?this.strokeMiterLimit:"4",d=typeof this.opacity<"u"?this.opacity:"1",g=this.visible?"":" visibility: hidden;",v=c?"":this.getSvgFilter(),_=u("fill",this.fill),b=u("stroke",this.stroke);return[b,"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",n,"; ","stroke-linejoin: ",f,"; ","stroke-miterlimit: ",o,"; ",_,"fill-rule: ",l,"; ","opacity: ",d,";",v,g].join("")},getSvgSpanStyles:function(c,l){var r="; ",n=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+r:"",s=c.strokeWidth?"stroke-width: "+c.strokeWidth+r:"",n=n,a=c.fontSize?"font-size: "+c.fontSize+"px"+r:"",f=c.fontStyle?"font-style: "+c.fontStyle+r:"",o=c.fontWeight?"font-weight: "+c.fontWeight+r:"",d=c.fill?u("fill",c.fill):"",g=c.stroke?u("stroke",c.stroke):"",v=this.getSvgTextDecoration(c),_=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return v&&(v="text-decoration: "+v+r),[g,s,n,a,f,o,v,d,_,l?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(l){return c[l.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,l){var r=c?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'+e.util.matrixToSVG(r);return s+(l||"")+'" '},_setSVGBg:function(c){if(this.backgroundColor){var l=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,l),'" y="',i(-this.height/2,l),'" width="',i(this.width,l),'" height="',i(this.height,l),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,l){l=l||{};var r=l.reviver,s=l.additionalTransform||"",n=[this.getSvgTransform(!0,s),this.getSvgCommons()].join(""),a=c.indexOf("COMMON_PARTS");return c[a]=n,r?r(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,l){l=l||{};var r=l.noStyle,s=l.reviver,n=r?"":'style="'+this.getSvgStyles()+'" ',a=l.withShadow?'style="'+this.getSvgFilter()+'" ':"",f=this.clipPath,o=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=f&&f.absolutePositioned,g=this.stroke,v=this.fill,_=this.shadow,b,w=[],x,A=c.indexOf("COMMON_PARTS"),M=l.additionalTransform;return f&&(f.clipPathId="CLIPPATH_"+e.Object.__uid++,x='<clipPath id="'+f.clipPathId+`" >
`+f.toClipPathSVG(s)+`</clipPath>
`),d&&w.push("<g ",a,this.getSvgCommons(),` >
`),w.push("<g ",this.getSvgTransform(!1),d?"":a+this.getSvgCommons(),` >
`),b=[n,o,r?"":this.addPaintOrder()," ",M?'transform="'+M+'" ':""].join(""),c[A]=b,v&&v.toLive&&w.push(v.toSVG(this)),g&&g.toLive&&w.push(g.toSVG(this)),_&&w.push(_.toSVG(this)),f&&w.push(x),w.push(c.join("")),w.push(`</g>
`),d&&w.push(`</g>
`),s?s(w.join("")):w.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var u=e.util.object.extend,i="stateProperties";function c(r,s,n){var a={},f=!0;n.forEach(function(o){a[o]=r[o]}),u(r[s],a,f)}function l(r,s,n){if(r===s)return!0;if(Array.isArray(r)){if(!Array.isArray(s)||r.length!==s.length)return!1;for(var a=0,f=r.length;a<f;a++)if(!l(r[a],s[a]))return!1;return!0}else if(r&&typeof r=="object"){var o=Object.keys(r),d;if(!s||typeof s!="object"||!n&&o.length!==Object.keys(s).length)return!1;for(var a=0,f=o.length;a<f;a++)if(d=o[a],!(d==="canvas"||d==="group")&&!l(r[d],s[d]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(r){r=r||i;var s="_"+r;return Object.keys(this[s]).length<this[r].length?!0:!l(this[s],this,!0)},saveState:function(r){var s=r&&r.propertySet||i,n="_"+s;return this[n]?(c(this,n,this[s]),r&&r.stateProperties&&c(this,n,r.stateProperties),this):this.setupState(r)},setupState:function(r){r=r||{};var s=r.propertySet||i;return r.propertySet=s,this["_"+s]={},this.saveState(r),this}})}(),function(){var u=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(i,c){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var l=i.x,r=i.y,s,n,a=Object.keys(this.oCoords),f=a.length-1,o;for(this.__corner=0;f>=0;f--)if(o=a[f],!!this.isControlVisible(o)&&(n=this._getImageLines(c?this.oCoords[o].touchCorner:this.oCoords[o].corner),s=this._findCrossPoints({x:l,y:r},n),s!==0&&s%2===1))return this.__corner=o,o;return!1},forEachControl:function(i){for(var c in this.controls)i(this.controls[c],c,this)},_setCornerCoords:function(){var i=this.oCoords;for(var c in i){var l=this.controls[c];i[c].corner=l.calcCornerCoords(this.angle,this.cornerSize,i[c].x,i[c].y,!1),i[c].touchCorner=l.calcCornerCoords(this.angle,this.touchCornerSize,i[c].x,i[c].y,!0)}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var c=this.getCenterPoint(),l=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return i.translate(c.x,c.y),i.scale(1/r[0],1/r[3]),i.rotate(u(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-l.x/2,-l.y/2,l.x,l.y),i.restore(),this},drawBorders:function(i,c){c=c||{};var l=this._calculateCurrentDimensions(),r=this.borderScaleFactor,s=l.x+r,n=l.y+r,a=typeof c.hasControls<"u"?c.hasControls:this.hasControls,f=!1;return i.save(),i.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(i,c.borderDashArray||this.borderDashArray),i.strokeRect(-s/2,-n/2,s,n),a&&(i.beginPath(),this.forEachControl(function(o,d,g){o.withConnection&&o.getVisibility(g,d)&&(f=!0,i.moveTo(o.x*s,o.y*n),i.lineTo(o.x*s+o.offsetX,o.y*n+o.offsetY))}),f&&i.stroke()),i.restore(),this},drawBordersInGroup:function(i,c,l){l=l||{};var r=e.util.sizeAfterTransform(this.width,this.height,c),s=this.strokeWidth,n=this.strokeUniform,a=this.borderScaleFactor,f=r.x+s*(n?this.canvas.getZoom():c.scaleX)+a,o=r.y+s*(n?this.canvas.getZoom():c.scaleY)+a;return i.save(),this._setLineDash(i,l.borderDashArray||this.borderDashArray),i.strokeStyle=l.borderColor||this.borderColor,i.strokeRect(-f/2,-o/2,f,o),i.restore(),this},drawControls:function(i,c){c=c||{},i.save();var l=this.canvas.getRetinaScaling(),r,s;return i.setTransform(l,0,0,l,0,0),i.strokeStyle=i.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,c.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(r=this.group.calcTransformMatrix()),this.forEachControl(function(n,a,f){s=f.oCoords[a],n.getVisibility(f,a)&&(r&&(s=e.util.transformPoint(s,r)),n.render(i,s.x,s.y,c,f))}),i.restore(),this},isControlVisible:function(i){return this.controls[i]&&this.controls[i].getVisibility(this,i)},setControlVisible:function(i,c){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[i]=c,this},setControlsVisibility:function(i){i||(i={});for(var c in i)this.setControlVisible(c,i[c]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(u,i){i=i||{};var c=function(){},l=i.onComplete||c,r=i.onChange||c,s=this;return e.util.animate({target:this,startValue:u.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(n){u.set("left",n),s.requestRenderAll(),r()},onComplete:function(){u.setCoords(),l()}})},fxCenterObjectV:function(u,i){i=i||{};var c=function(){},l=i.onComplete||c,r=i.onChange||c,s=this;return e.util.animate({target:this,startValue:u.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(n){u.set("top",n),s.requestRenderAll(),r()},onComplete:function(){u.setCoords(),l()}})},fxRemove:function(u,i){i=i||{};var c=function(){},l=i.onComplete||c,r=i.onChange||c,s=this;return e.util.animate({target:this,startValue:u.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(n){u.set("opacity",n),s.requestRenderAll(),r()},onComplete:function(){s.remove(u),l()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var u=[],i,c,l=[];for(i in arguments[0])u.push(i);for(var r=0,s=u.length;r<s;r++)i=u[r],c=r!==s-1,l.push(this._animate(i,arguments[0][i],arguments[1],c));return l}else return this._animate.apply(this,arguments)},_animate:function(u,i,c,l){var r=this,s;i=i.toString(),c?c=e.util.object.clone(c):c={},~u.indexOf(".")&&(s=u.split("."));var n=r.colorProperties.indexOf(u)>-1||s&&r.colorProperties.indexOf(s[1])>-1,a=s?this.get(s[0])[s[1]]:this.get(u);"from"in c||(c.from=a),n||(~i.indexOf("=")?i=a+parseFloat(i.replace("=","")):i=parseFloat(i));var f={target:this,startValue:c.from,endValue:i,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(o,d,g){return c.abort.call(r,o,d,g)},onChange:function(o,d,g){s?r[s[0]][s[1]]=o:r.set(u,o),!l&&c.onChange&&c.onChange(o,d,g)},onComplete:function(o,d,g){l||(r.setCoords(),c.onComplete&&c.onComplete(o,d,g))}};return n?e.util.animateColor(f.startValue,f.endValue,f.duration,f):e.util.animate(f)}}),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.extend,l=i.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(n,a){n||(n=[0,0,0,0]),this.callSuper("initialize",a),this.set("x1",n[0]),this.set("y1",n[1]),this.set("x2",n[2]),this.set("y2",n[3]),this._setWidthHeight(a)},_setWidthHeight:function(n){n||(n={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in n?n.left:this._getLeftToOriginX(),this.top="top"in n?n.top:this._getTopToOriginY()},_set:function(n,a){return this.callSuper("_set",n,a),typeof r[n]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(n){n.beginPath();var a=this.calcLinePoints();n.moveTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineWidth=this.strokeWidth;var f=n.strokeStyle;n.strokeStyle=this.stroke||n.fillStyle,this.stroke&&this._renderStroke(n),n.strokeStyle=f},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(n){return c(this.callSuper("toObject",n),this.calcLinePoints())},_getNonTransformedDimensions:function(){var n=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(n.y-=this.strokeWidth),this.height===0&&(n.x-=this.strokeWidth)),n},calcLinePoints:function(){var n=this.x1<=this.x2?-1:1,a=this.y1<=this.y2?-1:1,f=n*this.width*.5,o=a*this.height*.5,d=n*this.width*-.5,g=a*this.height*-.5;return{x1:f,x2:d,y1:o,y2:g}},_toSVG:function(){var n=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(n,a,f){f=f||{};var o=i.parseAttributes(n,i.Line.ATTRIBUTE_NAMES),d=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];a(new i.Line(d,c(o,f)))},i.Line.fromObject=function(n,a){function f(d){delete d.points,a&&a(d)}var o=l(n,!0);o.points=[n.x1,n.y1,n.x2,n.y2],i.Object._fromObject("Line",o,f,"points")};function s(n,a){var f=n.origin,o=n.axis1,d=n.axis2,g=n.dimension,v=a.nearest,_=a.center,b=a.farthest;return function(){switch(this.get(f)){case v:return Math.min(this.get(o),this.get(d));case _:return Math.min(this.get(o),this.get(d))+.5*this.get(g);case b:return Math.max(this.get(o),this.get(d))}}}}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.degreesToRadians;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(r,s){return this.callSuper("_set",r,s),r==="radius"&&this.setRadius(s),this},toObject:function(r){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(r))},_toSVG:function(){var r,s=0,n=0,a=(this.endAngle-this.startAngle)%360;if(a===0)r=["<circle ","COMMON_PARTS",'cx="'+s+'" cy="'+n+'" ','r="',this.radius,`" />
`];else{var f=c(this.startAngle),o=c(this.endAngle),d=this.radius,g=i.util.cos(f)*d,v=i.util.sin(f)*d,_=i.util.cos(o)*d,b=i.util.sin(o)*d,w=a>180?"1":"0";r=['<path d="M '+g+" "+v," A "+d+" "+d," 0 ",+w+" 1"," "+_+" "+b,'" ',"COMMON_PARTS",` />
`]}return r},_render:function(r){r.beginPath(),r.arc(0,0,this.radius,c(this.startAngle),c(this.endAngle),!1),this._renderPaintInOrder(r)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(r){return this.radius=r,this.set("width",r*2).set("height",r*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(r,s){var n=i.parseAttributes(r,i.Circle.ATTRIBUTE_NAMES);if(!l(n))throw new Error("value of `r` attribute is required and can not be negative");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,s(new i.Circle(n))};function l(r){return"radius"in r&&r.radius>=0}i.Circle.fromObject=function(r,s){i.Object._fromObject("Circle",r,s)}}(t),function(u){var i=u.fabric||(u.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(c){var l=this.width/2,r=this.height/2;c.beginPath(),c.moveTo(-l,r),c.lineTo(0,-r),c.lineTo(l,r),c.closePath(),this._renderPaintInOrder(c)},_toSVG:function(){var c=this.width/2,l=this.height/2,r=[-c+" "+l,"0 "+-l,c+" "+l].join(",");return["<polygon ","COMMON_PARTS",'points="',r,'" />']}}),i.Triangle.fromObject=function(c,l){return i.Object._fromObject("Triangle",c,l)}}(t),function(u){var i=u.fabric||(u.fabric={}),c=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this.set("rx",l&&l.rx||0),this.set("ry",l&&l.ry||0)},_set:function(l,r){switch(this.callSuper("_set",l,r),l){case"rx":this.rx=r,this.set("width",r*2);break;case"ry":this.ry=r,this.set("height",r*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(l){l.beginPath(),l.save(),l.transform(1,0,0,this.ry/this.rx,0,0),l.arc(0,0,this.rx,0,c,!1),l.restore(),this._renderPaintInOrder(l)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(l,r){var s=i.parseAttributes(l,i.Ellipse.ATTRIBUTE_NAMES);s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,r(new i.Ellipse(s))},i.Ellipse.fromObject=function(l,r){i.Object._fromObject("Ellipse",l,r)}}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(l){this.callSuper("initialize",l),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(l){var r=this.rx?Math.min(this.rx,this.width/2):0,s=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,a=this.height,f=-this.width/2,o=-this.height/2,d=r!==0||s!==0,g=1-.5522847498;l.beginPath(),l.moveTo(f+r,o),l.lineTo(f+n-r,o),d&&l.bezierCurveTo(f+n-g*r,o,f+n,o+g*s,f+n,o+s),l.lineTo(f+n,o+a-s),d&&l.bezierCurveTo(f+n,o+a-g*s,f+n-g*r,o+a,f+n-r,o+a),l.lineTo(f+r,o+a),d&&l.bezierCurveTo(f+g*r,o+a,f,o+a-g*s,f,o+a-s),l.lineTo(f,o+s),d&&l.bezierCurveTo(f,o+g*s,f+g*r,o,f+r,o),l.closePath(),this._renderPaintInOrder(l)},toObject:function(l){return this.callSuper("toObject",["rx","ry"].concat(l))},_toSVG:function(){var l=-this.width/2,r=-this.height/2;return["<rect ","COMMON_PARTS",'x="',l,'" y="',r,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(l,r,s){if(!l)return r(null);s=s||{};var n=i.parseAttributes(l,i.Rect.ATTRIBUTE_NAMES);n.left=n.left||0,n.top=n.top||0,n.height=n.height||0,n.width=n.width||0;var a=new i.Rect(c(s?i.util.object.clone(s):{},n));a.visible=a.visible&&a.width>0&&a.height>0,r(a)},i.Rect.fromObject=function(l,r){return i.Object._fromObject("Rect",l,r)}}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.extend,l=i.util.array.min,r=i.util.array.max,s=i.util.toFixed,n=i.util.projectStrokeOnPoints;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(a,f){f=f||{},this.points=a||[],this.callSuper("initialize",f),this._setPositionDimensions(f)},_projectStrokeOnPoints:function(){return n(this.points,this,!0)},_setPositionDimensions:function(a){var f=this._calcDimensions(a),o,d=this.exactBoundingBox?this.strokeWidth:0;this.width=f.width-d,this.height=f.height-d,a.fromSVG||(o=this.translateToGivenOrigin({x:f.left-this.strokeWidth/2+d/2,y:f.top-this.strokeWidth/2+d/2},"left","top",this.originX,this.originY)),typeof a.left>"u"&&(this.left=a.fromSVG?f.left:o.x),typeof a.top>"u"&&(this.top=a.fromSVG?f.top:o.y),this.pathOffset={x:f.left+this.width/2+d/2,y:f.top+this.height/2+d/2}},_calcDimensions:function(){var a=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,f=l(a,"x")||0,o=l(a,"y")||0,d=r(a,"x")||0,g=r(a,"y")||0,v=d-f,_=g-o;return{left:f,top:o,width:v,height:_}},toObject:function(a){return c(this.callSuper("toObject",a),{points:this.points.concat()})},_toSVG:function(){for(var a=[],f=this.pathOffset.x,o=this.pathOffset.y,d=i.Object.NUM_FRACTION_DIGITS,g=0,v=this.points.length;g<v;g++)a.push(s(this.points[g].x-f,d),",",s(this.points[g].y-o,d)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',a.join(""),`" />
`]},commonRender:function(a){var f,o=this.points.length,d=this.pathOffset.x,g=this.pathOffset.y;if(!o||isNaN(this.points[o-1].y))return!1;a.beginPath(),a.moveTo(this.points[0].x-d,this.points[0].y-g);for(var v=0;v<o;v++)f=this.points[v],a.lineTo(f.x-d,f.y-g);return!0},_render:function(a){this.commonRender(a)&&this._renderPaintInOrder(a)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(a){return function(f,o,d){if(!f)return o(null);d||(d={});var g=i.parsePointsAttribute(f.getAttribute("points")),v=i.parseAttributes(f,i[a].ATTRIBUTE_NAMES);v.fromSVG=!0,o(new i[a](g,c(v,d)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(a,f){return i.Object._fromObject("Polyline",a,f,"points")}}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.projectStrokeOnPoints;if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return c(this.points,this)},_render:function(l){this.commonRender(l)&&(l.closePath(),this._renderPaintInOrder(l))}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(l,r){i.Object._fromObject("Polygon",l,r,"points")}}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.array.min,l=i.util.array.max,r=i.util.object.extend,s=i.util.object.clone,n=i.util.toFixed;if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(a,f){f=s(f||{}),delete f.path,this.callSuper("initialize",f),this._setPath(a||[],f)},_setPath:function(a,f){this.path=i.util.makePathSimpler(Array.isArray(a)?a:i.util.parsePath(a)),i.Polyline.prototype._setPositionDimensions.call(this,f||{})},_renderPathCommands:function(a){var f,o=0,d=0,g=0,v=0,_=0,b=0,w=-this.pathOffset.x,x=-this.pathOffset.y;a.beginPath();for(var A=0,M=this.path.length;A<M;++A)switch(f=this.path[A],f[0]){case"L":g=f[1],v=f[2],a.lineTo(g+w,v+x);break;case"M":g=f[1],v=f[2],o=g,d=v,a.moveTo(g+w,v+x);break;case"C":g=f[5],v=f[6],_=f[3],b=f[4],a.bezierCurveTo(f[1]+w,f[2]+x,_+w,b+x,g+w,v+x);break;case"Q":a.quadraticCurveTo(f[1]+w,f[2]+x,f[3]+w,f[4]+x),g=f[3],v=f[4],_=f[1],b=f[2];break;case"z":case"Z":g=o,v=d,a.closePath();break}},_render:function(a){this._renderPathCommands(a),this._renderPaintInOrder(a)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(a){return r(this.callSuper("toObject",a),{path:this.path.map(function(f){return f.slice()})})},toDatalessObject:function(a){var f=this.toObject(["sourcePath"].concat(a));return f.sourcePath&&delete f.path,f},_toSVG:function(){var a=i.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',a,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var a=i.Object.NUM_FRACTION_DIGITS;return" translate("+n(-this.pathOffset.x,a)+", "+n(-this.pathOffset.y,a)+")"},toClipPathSVG:function(a){var f=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:f})},toSVG:function(a){var f=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:a,additionalTransform:f})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var a=[],f=[],o,d=0,g=0,v=0,_=0,b,w=0,x=this.path.length;w<x;++w){switch(o=this.path[w],o[0]){case"L":v=o[1],_=o[2],b=[];break;case"M":v=o[1],_=o[2],d=v,g=_,b=[];break;case"C":b=i.util.getBoundsOfCurve(v,_,o[1],o[2],o[3],o[4],o[5],o[6]),v=o[5],_=o[6];break;case"Q":b=i.util.getBoundsOfCurve(v,_,o[1],o[2],o[1],o[2],o[3],o[4]),v=o[3],_=o[4];break;case"z":case"Z":v=d,_=g;break}b.forEach(function(K){a.push(K.x),f.push(K.y)}),a.push(v),f.push(_)}var A=c(a)||0,M=c(f)||0,X=l(a)||0,z=l(f)||0,$=X-A,q=z-M;return{left:A,top:M,width:$,height:q}}}),i.Path.fromObject=function(a,f){if(typeof a.sourcePath=="string"){var o=a.sourcePath;i.loadSVGFromURL(o,function(d){var g=d[0];g.setOptions(a),a.clipPath?i.util.enlivenObjects([a.clipPath],function(v){g.clipPath=v[0],f&&f(g)}):f&&f(g)})}else i.Object._fromObject("Path",a,f,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(a,f,o){var d=i.parseAttributes(a,i.Path.ATTRIBUTE_NAMES);d.fromSVG=!0,f(new i.Path(d.d,r(d,o)))}}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.array.min,l=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(r,s,n){s=s||{},this._objects=[],n&&this.callSuper("initialize",s),this._objects=r||[];for(var a=this._objects.length;a--;)this._objects[a].group=this;if(n)this._updateObjectsACoords();else{var f=s&&s.centerPoint;s.originX!==void 0&&(this.originX=s.originX),s.originY!==void 0&&(this.originY=s.originY),f||this._calcBounds(),this._updateObjectsCoords(f),delete s.centerPoint,this.callSuper("initialize",s)}this.setCoords()},_updateObjectsACoords:function(){for(var r=!0,s=this._objects.length;s--;)this._objects[s].setCoords(r)},_updateObjectsCoords:function(s){for(var s=s||this.getCenterPoint(),n=this._objects.length;n--;)this._updateObjectCoords(this._objects[n],s)},_updateObjectCoords:function(r,s){var n=r.left,a=r.top,f=!0;r.set({left:n-s.x,top:a-s.y}),r.group=this,r.setCoords(f)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(r){var s=!!this.group;return this._restoreObjectsState(),i.util.resetObjectTransform(this),r&&(s&&i.util.removeTransformFromObject(r,this.group.calcTransformMatrix()),this._objects.push(r),r.group=this,r._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,s?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(r){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(r),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(r){this.dirty=!0,r.group=this,r._set("canvas",this.canvas)},_onObjectRemoved:function(r){this.dirty=!0,delete r.group},_set:function(r,s){var n=this._objects.length;if(this.useSetOnGroup)for(;n--;)this._objects[n].setOnGroup(r,s);if(r==="canvas")for(;n--;)this._objects[n]._set(r,s);i.Object.prototype._set.call(this,r,s)},toObject:function(r){var s=this.includeDefaultValues,n=this._objects.filter(function(f){return!f.excludeFromExport}).map(function(f){var o=f.includeDefaultValues;f.includeDefaultValues=s;var d=f.toObject(r);return f.includeDefaultValues=o,d}),a=i.Object.prototype.toObject.call(this,r);return a.objects=n,a},toDatalessObject:function(r){var s,n=this.sourcePath;if(n)s=n;else{var a=this.includeDefaultValues;s=this._objects.map(function(o){var d=o.includeDefaultValues;o.includeDefaultValues=a;var g=o.toDatalessObject(r);return o.includeDefaultValues=d,g})}var f=i.Object.prototype.toDatalessObject.call(this,r);return f.objects=s,f},render:function(r){this._transformDone=!0,this.callSuper("render",r),this._transformDone=!1},shouldCache:function(){var r=i.Object.prototype.shouldCache.call(this);if(r){for(var s=0,n=this._objects.length;s<n;s++)if(this._objects[s].willDrawShadow())return this.ownCaching=!1,!1}return r},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var r=0,s=this._objects.length;r<s;r++)if(this._objects[r].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(r){for(var s=0,n=this._objects.length;s<n;s++)this._objects[s].render(r);this._drawClipPath(r,this.clipPath)},isCacheDirty:function(r){if(this.callSuper("isCacheDirty",r))return!0;if(!this.statefullCache)return!1;for(var s=0,n=this._objects.length;s<n;s++)if(this._objects[s].isCacheDirty(!0)){if(this._cacheCanvas){var a=this.cacheWidth/this.zoomX,f=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-a/2,-f/2,a,f)}return!0}return!1},_restoreObjectsState:function(){var r=this.calcOwnMatrix();return this._objects.forEach(function(s){i.util.addTransformToObject(s,r),delete s.group,s.setCoords()}),this},destroy:function(){return this._objects.forEach(function(r){r.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(r){r.dispose&&r.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var r=this._objects,s=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var a=new i.ActiveSelection([]);return a.set(n),a.type="activeSelection",s.remove(this),r.forEach(function(f){f.group=a,f.dirty=!0,s.add(f)}),a.canvas=s,a._objects=r,s._activeObject=a,a.setCoords(),a}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var r=!0;return this.forEachObject(function(s){s.setCoords(r)}),this},_calcBounds:function(r){for(var s=[],n=[],a,f,o,d=["tr","br","bl","tl"],g=0,v=this._objects.length,_,b=d.length;g<v;++g){for(a=this._objects[g],o=a.calcACoords(),_=0;_<b;_++)f=d[_],s.push(o[f].x),n.push(o[f].y);a.aCoords=o}this._getBounds(s,n,r)},_getBounds:function(r,s,n){var a=new i.Point(c(r),c(s)),f=new i.Point(l(r),l(s)),o=a.y||0,d=a.x||0,g=f.x-a.x||0,v=f.y-a.y||0;this.width=g,this.height=v,n||this.setPositionByOrigin({x:d,y:o},"left","top")},_toSVG:function(r){for(var s=["<g ","COMMON_PARTS",` >
`],n=0,a=this._objects.length;n<a;n++)s.push("		",this._objects[n].toSVG(r));return s.push(`</g>
`),s},getSvgStyles:function(){var r=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",s=this.visible?"":" visibility: hidden;";return[r,this.getSvgFilter(),s].join("")},toClipPathSVG:function(r){for(var s=[],n=0,a=this._objects.length;n<a;n++)s.push("	",this._objects[n].toClipPathSVG(r));return this._createBaseClipPathSVGMarkup(s,{reviver:r})}}),i.Group.fromObject=function(r,s){var n=r.objects,a=i.util.object.clone(r,!0);if(delete a.objects,typeof n=="string"){i.loadSVGFromURL(n,function(f){var o=i.util.groupSVGElements(f,r,n),d=a.clipPath;delete a.clipPath,o.set(a),d?i.util.enlivenObjects([d],function(g){o.clipPath=g[0],s&&s(o)}):s&&s(o)});return}i.util.enlivenObjects(n,function(f){i.util.enlivenObjectEnlivables(r,a,function(){s&&s(new i.Group(f,a,!0))})})})}(t),function(u){var i=u.fabric||(u.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(c,l){l=l||{},this._objects=c||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;l.originX&&(this.originX=l.originX),l.originY&&(this.originY=l.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,l),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var l=i.Object.prototype.toObject.call(this),r=new i.Group([]);if(delete l.type,r.set(l),c.forEach(function(n){n.canvas.remove(n),n.group=r}),r._objects=c,!this.canvas)return r;var s=this.canvas;return s.add(r),s._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,l,r){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,l),r=r||{},typeof r.hasControls>"u"&&(r.hasControls=!1),r.forActiveSelection=!0;for(var s=0,n=this._objects.length;s<n;s++)this._objects[s]._renderControls(c,r);c.restore()}}),i.ActiveSelection.fromObject=function(c,l){i.util.enlivenObjects(c.objects,function(r){delete c.objects,l&&l(new i.ActiveSelection(r,c,!0))})})}(t),function(u){var i=e.util.object.extend;if(u.fabric||(u.fabric={}),u.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(c,l){l||(l={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",l),this._initElement(c,l)},getElement:function(){return this._element||{}},setElement:function(c,l){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(l),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var l=e.filterBackend;l&&l.evictCachesForKey&&l.evictCachesForKey(c)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(c){e.util.cleanUpJsdomNode(this[c]),this[c]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var l=this.width/2,r=this.height/2;c.beginPath(),c.moveTo(-l,-r),c.lineTo(l,-r),c.lineTo(l,r),c.lineTo(-l,r),c.lineTo(-l,-r),c.closePath()}},toObject:function(c){var l=[];this.filters.forEach(function(s){s&&l.push(s.toObject())});var r=i(this.callSuper("toObject",["cropX","cropY"].concat(c)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:l});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],l=[],r,s=this._element,n=-this.width/2,a=-this.height/2,f="",o="";if(!s)return[];if(this.hasCrop()){var d=e.Object.__uid++;c.push('<clipPath id="imageCrop_'+d+`">
`,'	<rect x="'+n+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),f=' clip-path="url(#imageCrop_'+d+')" '}if(this.imageSmoothing||(o='" image-rendering="optimizeSpeed'),l.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',n-this.cropX,'" y="',a-this.cropY,'" width="',s.width||s.naturalWidth,'" height="',s.height||s.height,o,'"',f,`></image>
`),this.stroke||this.strokeDashArray){var g=this.fill;this.fill=null,r=["	<rect ",'x="',n,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=g}return this.paintFirst!=="fill"?c=c.concat(r,l):c=c.concat(l,r),c},getSrc:function(c){var l=c?this._element:this._originalElement;return l?l.toDataURL?l.toDataURL():this.srcFromAttribute?l.getAttribute("src"):l.src:this.src||""},setSrc:function(c,l,r){return e.util.loadImage(c,function(s,n){this.setElement(s,r),this._setWidthHeight(),l&&l(this,n)},this,r&&r.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,l=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.scaleX,n=r.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||s>l&&n>l){this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,this._lastScaleY=n;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var f=e.util.createCanvasElement(),o=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,d=a.width,g=a.height;f.width=d,f.height=g,this._element=f,this._lastScaleX=c.scaleX=s,this._lastScaleY=c.scaleY=n,e.filterBackend.applyFilters([c],a,d,g,this._element,o),this._filterScalingX=f.width/this._originalElement.width,this._filterScalingY=f.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(a){return a&&!a.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var l=this._originalElement,r=l.naturalWidth||l.width,s=l.naturalHeight||l.height;if(this._element===this._originalElement){var n=e.util.createCanvasElement();n.width=r,n.height=s,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(c,this._originalElement,r,s,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},drawCacheOnCanvas:function(c){e.util.setImageSmoothing(c,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var l=this._element;if(l){var r=this._filterScalingX,s=this._filterScalingY,n=this.width,a=this.height,f=Math.min,o=Math.max,d=o(this.cropX,0),g=o(this.cropY,0),v=l.naturalWidth||l.width,_=l.naturalHeight||l.height,b=d*r,w=g*s,x=f(n*r,v-b),A=f(a*s,_-w),M=-n/2,X=-a/2,z=f(n,v/r-d),$=f(a,_/s-g);l&&c.drawImage(l,b,w,x,A,M,X,z,$)}},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,l){this.setElement(e.util.getById(c),l),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c)},_initFilters:function(c,l){c&&c.length?e.util.enlivenObjects(c,function(r){l&&l(r)},"fabric.Image.filters"):l&&l()},_setWidthHeight:function(c){c||(c={});var l=this.getElement();this.width=c.width||l.naturalWidth||l.width||0,this.height=c.height||l.naturalHeight||l.height||0},parsePreserveAspectRatioAttribute:function(){var c=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),l=this._element.width,r=this._element.height,s=1,n=1,a=0,f=0,o=0,d=0,g,v=this.width,_=this.height,b={width:v,height:_};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(s=n=e.util.findScaleToFit(this._element,b),g=(v-l*s)/2,c.alignX==="Min"&&(a=-g),c.alignX==="Max"&&(a=g),g=(_-r*n)/2,c.alignY==="Min"&&(f=-g),c.alignY==="Max"&&(f=g)),c.meetOrSlice==="slice"&&(s=n=e.util.findScaleToCover(this._element,b),g=l-v/s,c.alignX==="Mid"&&(o=g/2),c.alignX==="Max"&&(o=g),g=r-_/n,c.alignY==="Mid"&&(d=g/2),c.alignY==="Max"&&(d=g),l=v/s,r=_/n)):(s=v/l,n=_/r),{width:l,height:r,scaleX:s,scaleY:n,offsetLeft:a,offsetTop:f,cropX:o,cropY:d}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(c,l){var r=e.util.object.clone(c);e.util.loadImage(r.src,function(s,n){if(n){l&&l(null,!0);return}e.Image.prototype._initFilters.call(r,r.filters,function(a){r.filters=a||[],e.Image.prototype._initFilters.call(r,[r.resizeFilter],function(f){r.resizeFilter=f[0],e.util.enlivenObjectEnlivables(r,r,function(){var o=new e.Image(s,r);l(o,!1)})})})},null,r.crossOrigin)},e.Image.fromURL=function(c,l,r){e.util.loadImage(c,function(s,n){l&&l(new e.Image(s,r),n)},null,r&&r.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(c,l,r){var s=e.parseAttributes(c,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(s["xlink:href"],l,i(r?e.util.object.clone(r):{},s))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var u=this.angle%360;return u>0?Math.round((u-1)/90)*90:Math.round(u/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(u){u=u||{};var i=function(){},c=u.onComplete||i,l=u.onChange||i,r=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(s){r.rotate(s),l()},onComplete:function(){r.setCoords(),c()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(u){return u.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(u){return u.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function u(c,l){var r="precision "+l+` float;
void main(){}`,s=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(s,r),c.compileShader(s),!!c.getShaderParameter(s,c.COMPILE_STATUS)}e.isWebglSupported=function(c){if(e.isLikelyNode)return!1;c=c||e.WebglFilterBackend.prototype.tileSize;var l=document.createElement("canvas"),r=l.getContext("webgl")||l.getContext("experimental-webgl"),s=!1;if(r){e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),s=e.maxTextureSize>=c;for(var n=["highp","mediump","lowp"],a=0;a<3;a++)if(u(r,n[a])){e.webGlPrecision=n[a];break}}return this.isSupported=s,s},e.WebglFilterBackend=i;function i(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(c,l){this.dispose(),this.createWebGLCanvas(c,l),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,l)},chooseFastestCopyGLTo2DMethod:function(c,l){var r=typeof window.performance<"u",s;try{new ImageData(1,1),s=!0}catch{s=!1}var n=typeof ArrayBuffer<"u",a=typeof Uint8ClampedArray<"u";if(r&&s&&n&&a){var f=e.util.createCanvasElement(),o=new ArrayBuffer(c*l*4);if(e.forceGLPutImageData){this.imageBuffer=o,this.copyGLTo2D=C;return}var d={imageBuffer:o,destinationWidth:c,destinationHeight:l,targetCanvas:f},g,v,_;f.width=c,f.height=l,g=window.performance.now(),y.call(d,this.gl,d),v=window.performance.now()-g,g=window.performance.now(),C.call(d,this.gl,d),_=window.performance.now()-g,v>_?(this.imageBuffer=o,this.copyGLTo2D=C):this.copyGLTo2D=y}},createWebGLCanvas:function(c,l){var r=e.util.createCanvasElement();r.width=c,r.height=l;var s={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=r.getContext("webgl",s);n||(n=r.getContext("experimental-webgl",s)),n&&(n.clearColor(0,0,0,0),this.canvas=r,this.gl=n)},applyFilters:function(c,l,r,s,n,a){var f=this.gl,o;a&&(o=this.getCachedTexture(a,l));var d={originalWidth:l.width||l.originalWidth,originalHeight:l.height||l.originalHeight,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:f,sourceTexture:this.createTexture(f,r,s,!o&&l),targetTexture:this.createTexture(f,r,s),originalTexture:o||this.createTexture(f,r,s,!o&&l),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},g=f.createFramebuffer();return f.bindFramebuffer(f.FRAMEBUFFER,g),c.forEach(function(v){v&&v.applyTo(d)}),m(d),this.copyGLTo2D(f,d),f.bindTexture(f.TEXTURE_2D,null),f.deleteTexture(d.sourceTexture),f.deleteTexture(d.targetTexture),f.deleteFramebuffer(g),n.getContext("2d").setTransform(1,0,0,1,0,0),d},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,l,r,s,n){var a=c.createTexture();return c.bindTexture(c.TEXTURE_2D,a),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,n||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,n||c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),s?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,s):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,l,r,0,c.RGBA,c.UNSIGNED_BYTE,null),a},getCachedTexture:function(c,l){if(this.textureCache[c])return this.textureCache[c];var r=this.createTexture(this.gl,l.width,l.height,l);return this.textureCache[c]=r,r},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:y,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,l={renderer:"",vendor:""};if(!c)return l;var r=c.getExtension("WEBGL_debug_renderer_info");if(r){var s=c.getParameter(r.UNMASKED_RENDERER_WEBGL),n=c.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(l.renderer=s.toLowerCase()),n&&(l.vendor=n.toLowerCase())}return this.gpuInfo=l,l}}}();function m(u){var i=u.targetCanvas,c=i.width,l=i.height,r=u.destinationWidth,s=u.destinationHeight;(c!==r||l!==s)&&(i.width=r,i.height=s)}function y(u,i){var c=u.canvas,l=i.targetCanvas,r=l.getContext("2d");r.translate(0,l.height),r.scale(1,-1);var s=c.height-l.height;r.drawImage(c,0,s,l.width,l.height,0,0,l.width,l.height)}function C(u,i){var c=i.targetCanvas,l=c.getContext("2d"),r=i.destinationWidth,s=i.destinationHeight,n=r*s*4,a=new Uint8Array(this.imageBuffer,0,n),f=new Uint8ClampedArray(this.imageBuffer,0,n);u.readPixels(0,0,r,s,u.RGBA,u.UNSIGNED_BYTE,a);var o=new ImageData(f,r,s);l.putImageData(o,0,0)}(function(){var u=function(){};e.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:u,dispose:u,clearWebGLCaches:u,resources:{},applyFilters:function(c,l,r,s,n){var a=n.getContext("2d");a.drawImage(l,0,0,r,s);var f=a.getImageData(0,0,r,s),o=a.getImageData(0,0,r,s),d={sourceWidth:r,sourceHeight:s,imageData:f,originalEl:l,originalImageData:o,canvasEl:n,ctx:a,filterBackend:this};return c.forEach(function(g){g.applyTo(d)}),(d.imageData.width!==r||d.imageData.height!==s)&&(n.width=d.imageData.width,n.height=d.imageData.height),a.putImageData(d.imageData,0,0),d}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(u){u&&this.setOptions(u)},setOptions:function(u){for(var i in u)this[i]=u[i]},createProgram:function(u,i,c){i=i||this.fragmentSource,c=c||this.vertexSource,e.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var l=u.createShader(u.VERTEX_SHADER);if(u.shaderSource(l,c),u.compileShader(l),!u.getShaderParameter(l,u.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+u.getShaderInfoLog(l));var r=u.createShader(u.FRAGMENT_SHADER);if(u.shaderSource(r,i),u.compileShader(r),!u.getShaderParameter(r,u.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+u.getShaderInfoLog(r));var s=u.createProgram();if(u.attachShader(s,l),u.attachShader(s,r),u.linkProgram(s),!u.getProgramParameter(s,u.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+u.getProgramInfoLog(s));var n=this.getAttributeLocations(u,s),a=this.getUniformLocations(u,s)||{};return a.uStepW=u.getUniformLocation(s,"uStepW"),a.uStepH=u.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:n,uniformLocations:a}},getAttributeLocations:function(u,i){return{aPosition:u.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(u,i,c){var l=i.aPosition,r=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,r),u.enableVertexAttribArray(l),u.vertexAttribPointer(l,2,u.FLOAT,!1,0,0),u.bufferData(u.ARRAY_BUFFER,c,u.STATIC_DRAW)},_setupFrameBuffer:function(u){var i=u.context,c,l;u.passes>1?(c=u.destinationWidth,l=u.destinationHeight,(u.sourceWidth!==c||u.sourceHeight!==l)&&(i.deleteTexture(u.targetTexture),u.targetTexture=u.filterBackend.createTexture(i,c,l)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,u.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(u){u.passes--,u.pass++;var i=u.targetTexture;u.targetTexture=u.sourceTexture,u.sourceTexture=i},isNeutralState:function(){var u=this.mainParameter,i=e.Image.filters[this.type].prototype;if(u)if(Array.isArray(i[u])){for(var c=i[u].length;c--;)if(this[u][c]!==i[u][c])return!1;return!0}else return i[u]===this[u];else return!1},applyTo:function(u){u.webgl?(this._setupFrameBuffer(u),this.applyToWebGL(u),this._swapTextures(u)):this.applyTo2d(u)},retrieveShader:function(u){return u.programCache.hasOwnProperty(this.type)||(u.programCache[this.type]=this.createProgram(u.context)),u.programCache[this.type]},applyToWebGL:function(u){var i=u.context,c=this.retrieveShader(u);u.pass===0&&u.originalTexture?i.bindTexture(i.TEXTURE_2D,u.originalTexture):i.bindTexture(i.TEXTURE_2D,u.sourceTexture),i.useProgram(c.program),this.sendAttributeData(i,c.attributeLocations,u.aPosition),i.uniform1f(c.uniformLocations.uStepW,1/u.sourceWidth),i.uniform1f(c.uniformLocations.uStepH,1/u.sourceHeight),this.sendUniformData(i,c.uniformLocations),i.viewport(0,0,u.destinationWidth,u.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(u,i,c){u.activeTexture(c),u.bindTexture(u.TEXTURE_2D,i),u.activeTexture(u.TEXTURE0)},unbindAdditionalTexture:function(u,i){u.activeTexture(i),u.bindTexture(u.TEXTURE_2D,null),u.activeTexture(u.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(u){this[this.mainParameter]=u},sendUniformData:function(){},createHelpLayer:function(u){if(!u.helpLayer){var i=document.createElement("canvas");i.width=u.sourceWidth,i.height=u.sourceHeight,u.helpLayer=i}},toObject:function(){var u={type:this.type},i=this.mainParameter;return i&&(u[i]=this[i]),u},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(u,i){var c=new e.Image.filters[u.type](u);return i&&i(c),c},function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.ColorMatrix=l(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(r){this.callSuper("initialize",r),this.matrix=this.matrix.slice(0)},applyTo2d:function(r){var s=r.imageData,n=s.data,a=n.length,f=this.matrix,o,d,g,v,_,b=this.colorsOnly;for(_=0;_<a;_+=4)o=n[_],d=n[_+1],g=n[_+2],b?(n[_]=o*f[0]+d*f[1]+g*f[2]+f[4]*255,n[_+1]=o*f[5]+d*f[6]+g*f[7]+f[9]*255,n[_+2]=o*f[10]+d*f[11]+g*f[12]+f[14]*255):(v=n[_+3],n[_]=o*f[0]+d*f[1]+g*f[2]+v*f[3]+f[4]*255,n[_+1]=o*f[5]+d*f[6]+g*f[7]+v*f[8]+f[9]*255,n[_+2]=o*f[10]+d*f[11]+g*f[12]+v*f[13]+f[14]*255,n[_+3]=o*f[15]+d*f[16]+g*f[17]+v*f[18]+f[19]*255)},getUniformLocations:function(r,s){return{uColorMatrix:r.getUniformLocation(s,"uColorMatrix"),uConstants:r.getUniformLocation(s,"uConstants")}},sendUniformData:function(r,s){var n=this.matrix,a=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],f=[n[4],n[9],n[14],n[19]];r.uniformMatrix4fv(s.uColorMatrix,!1,a),r.uniform4fv(s.uConstants,f)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Brightness=l(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(r){if(this.brightness!==0){var s=r.imageData,n=s.data,a,f=n.length,o=Math.round(this.brightness*255);for(a=0;a<f;a+=4)n[a]=n[a]+o,n[a+1]=n[a+1]+o,n[a+2]=n[a+2]+o}},getUniformLocations:function(r,s){return{uBrightness:r.getUniformLocation(s,"uBrightness")}},sendUniformData:function(r,s){r.uniform1f(s.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.extend,l=i.Image.filters,r=i.util.createClass;l.Convolute=r(l.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(s){var n=Math.sqrt(this.matrix.length),a=this.type+"_"+n+"_"+(this.opaque?1:0),f=this.fragmentSource[a];return s.programCache.hasOwnProperty(a)||(s.programCache[a]=this.createProgram(s.context,f)),s.programCache[a]},applyTo2d:function(s){var n=s.imageData,a=n.data,f=this.matrix,o=Math.round(Math.sqrt(f.length)),d=Math.floor(o/2),g=n.width,v=n.height,_=s.ctx.createImageData(g,v),b=_.data,w=this.opaque?1:0,x,A,M,X,z,$,q,K,te,re,oe,se,S;for(oe=0;oe<v;oe++)for(re=0;re<g;re++){for(z=(oe*g+re)*4,x=0,A=0,M=0,X=0,S=0;S<o;S++)for(se=0;se<o;se++)q=oe+S-d,$=re+se-d,!(q<0||q>=v||$<0||$>=g)&&(K=(q*g+$)*4,te=f[S*o+se],x+=a[K]*te,A+=a[K+1]*te,M+=a[K+2]*te,w||(X+=a[K+3]*te));b[z]=x,b[z+1]=A,b[z+2]=M,w?b[z+3]=a[z+3]:b[z+3]=X}s.imageData=_},getUniformLocations:function(s,n){return{uMatrix:s.getUniformLocation(n,"uMatrix"),uOpaque:s.getUniformLocation(n,"uOpaque"),uHalfSize:s.getUniformLocation(n,"uHalfSize"),uSize:s.getUniformLocation(n,"uSize")}},sendUniformData:function(s,n){s.uniform1fv(n.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Grayscale=l(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(r){var s=r.imageData,n=s.data,a,f=n.length,o,d=this.mode;for(a=0;a<f;a+=4)d==="average"?o=(n[a]+n[a+1]+n[a+2])/3:d==="lightness"?o=(Math.min(n[a],n[a+1],n[a+2])+Math.max(n[a],n[a+1],n[a+2]))/2:d==="luminosity"&&(o=.21*n[a]+.72*n[a+1]+.07*n[a+2]),n[a]=o,n[a+1]=o,n[a+2]=o},retrieveShader:function(r){var s=this.type+"_"+this.mode;if(!r.programCache.hasOwnProperty(s)){var n=this.fragmentSource[this.mode];r.programCache[s]=this.createProgram(r.context,n)}return r.programCache[s]},getUniformLocations:function(r,s){return{uMode:r.getUniformLocation(s,"uMode")}},sendUniformData:function(r,s){var n=1;r.uniform1i(s.uMode,n)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Invert=l(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(r){var s=r.imageData,n=s.data,a,f=n.length;for(a=0;a<f;a+=4)n[a]=255-n[a],n[a+1]=255-n[a+1],n[a+2]=255-n[a+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(r,s){return{uInvert:r.getUniformLocation(s,"uInvert")}},sendUniformData:function(r,s){r.uniform1i(s.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.extend,l=i.Image.filters,r=i.util.createClass;l.Noise=r(l.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(s){if(this.noise!==0){var n=s.imageData,a=n.data,f,o=a.length,d=this.noise,g;for(f=0,o=a.length;f<o;f+=4)g=(.5-Math.random())*d,a[f]+=g,a[f+1]+=g,a[f+2]+=g}},getUniformLocations:function(s,n){return{uNoise:s.getUniformLocation(n,"uNoise"),uSeed:s.getUniformLocation(n,"uSeed")}},sendUniformData:function(s,n){s.uniform1f(n.uNoise,this.noise/255),s.uniform1f(n.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Pixelate=l(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(r){var s=r.imageData,n=s.data,a=s.height,f=s.width,o,d,g,v,_,b,w,x,A,M,X;for(d=0;d<a;d+=this.blocksize)for(g=0;g<f;g+=this.blocksize)for(o=d*4*f+g*4,v=n[o],_=n[o+1],b=n[o+2],w=n[o+3],M=Math.min(d+this.blocksize,a),X=Math.min(g+this.blocksize,f),x=d;x<M;x++)for(A=g;A<X;A++)o=x*4*f+A*4,n[o]=v,n[o+1]=_,n[o+2]=b,n[o+3]=w},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(r,s){return{uBlocksize:r.getUniformLocation(s,"uBlocksize"),uStepW:r.getUniformLocation(s,"uStepW"),uStepH:r.getUniformLocation(s,"uStepH")}},sendUniformData:function(r,s){r.uniform1f(s.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.extend,l=i.Image.filters,r=i.util.createClass;l.RemoveColor=r(l.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(s){var n=s.imageData,a=n.data,f,o=this.distance*255,d,g,v,_=new i.Color(this.color).getSource(),b=[_[0]-o,_[1]-o,_[2]-o],w=[_[0]+o,_[1]+o,_[2]+o];for(f=0;f<a.length;f+=4)d=a[f],g=a[f+1],v=a[f+2],d>b[0]&&g>b[1]&&v>b[2]&&d<w[0]&&g<w[1]&&v<w[2]&&(a[f+3]=0)},getUniformLocations:function(s,n){return{uLow:s.getUniformLocation(n,"uLow"),uHigh:s.getUniformLocation(n,"uHigh")}},sendUniformData:function(s,n){var a=new i.Color(this.color).getSource(),f=parseFloat(this.distance),o=[0+a[0]/255-f,0+a[1]/255-f,0+a[2]/255-f,1],d=[a[0]/255+f,a[1]/255+f,a[2]/255+f,1];s.uniform4fv(n.uLow,o),s.uniform4fv(n.uHigh,d)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in r)c[s]=l(c.ColorMatrix,{type:s,matrix:r[s],mainParameter:!1,colorsOnly:!0}),i.Image.filters[s].fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric,c=i.Image.filters,l=i.util.createClass;c.BlendColor=l(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(r){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[r]+`}
}`},retrieveShader:function(r){var s=this.type+"_"+this.mode,n;return r.programCache.hasOwnProperty(s)||(n=this.buildSource(this.mode),r.programCache[s]=this.createProgram(r.context,n)),r.programCache[s]},applyTo2d:function(r){var s=r.imageData,n=s.data,a=n.length,f,o,d,g,v,_,b,w=1-this.alpha;b=new i.Color(this.color).getSource(),f=b[0]*this.alpha,o=b[1]*this.alpha,d=b[2]*this.alpha;for(var x=0;x<a;x+=4)switch(g=n[x],v=n[x+1],_=n[x+2],this.mode){case"multiply":n[x]=g*f/255,n[x+1]=v*o/255,n[x+2]=_*d/255;break;case"screen":n[x]=255-(255-g)*(255-f)/255,n[x+1]=255-(255-v)*(255-o)/255,n[x+2]=255-(255-_)*(255-d)/255;break;case"add":n[x]=g+f,n[x+1]=v+o,n[x+2]=_+d;break;case"diff":case"difference":n[x]=Math.abs(g-f),n[x+1]=Math.abs(v-o),n[x+2]=Math.abs(_-d);break;case"subtract":n[x]=g-f,n[x+1]=v-o,n[x+2]=_-d;break;case"darken":n[x]=Math.min(g,f),n[x+1]=Math.min(v,o),n[x+2]=Math.min(_,d);break;case"lighten":n[x]=Math.max(g,f),n[x+1]=Math.max(v,o),n[x+2]=Math.max(_,d);break;case"overlay":n[x]=f<128?2*g*f/255:255-2*(255-g)*(255-f)/255,n[x+1]=o<128?2*v*o/255:255-2*(255-v)*(255-o)/255,n[x+2]=d<128?2*_*d/255:255-2*(255-_)*(255-d)/255;break;case"exclusion":n[x]=f+g-2*f*g/255,n[x+1]=o+v-2*o*v/255,n[x+2]=d+_-2*d*_/255;break;case"tint":n[x]=f+g*w,n[x+1]=o+v*w,n[x+2]=d+_*w}},getUniformLocations:function(r,s){return{uColor:r.getUniformLocation(s,"uColor")}},sendUniformData:function(r,s){var n=new i.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,r.uniform4fv(s.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric,c=i.Image.filters,l=i.util.createClass;c.BlendImage=l(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(r){var s=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return r.programCache.hasOwnProperty(s)||(r.programCache[s]=this.createProgram(r.context,n)),r.programCache[s]},applyToWebGL:function(r){var s=r.context,n=this.createTexture(r.filterBackend,this.image);this.bindAdditionalTexture(s,n,s.TEXTURE1),this.callSuper("applyToWebGL",r),this.unbindAdditionalTexture(s,s.TEXTURE1)},createTexture:function(r,s){return r.getCachedTexture(s.cacheKey,s._element)},calculateMatrix:function(){var r=this.image,s=r._element.width,n=r._element.height;return[1/r.scaleX,0,0,0,1/r.scaleY,0,-r.left/s,-r.top/n,1]},applyTo2d:function(r){var s=r.imageData,n=r.filterBackend.resources,a=s.data,f=a.length,o=s.width,d=s.height,g,v,_,b,w,x,A,M,X,z,$=this.image,q;n.blendImage||(n.blendImage=i.util.createCanvasElement()),X=n.blendImage,z=X.getContext("2d"),X.width!==o||X.height!==d?(X.width=o,X.height=d):z.clearRect(0,0,o,d),z.setTransform($.scaleX,0,0,$.scaleY,$.left,$.top),z.drawImage($._element,0,0,o,d),q=z.getImageData(0,0,o,d).data;for(var K=0;K<f;K+=4)switch(w=a[K],x=a[K+1],A=a[K+2],M=a[K+3],g=q[K],v=q[K+1],_=q[K+2],b=q[K+3],this.mode){case"multiply":a[K]=w*g/255,a[K+1]=x*v/255,a[K+2]=A*_/255,a[K+3]=M*b/255;break;case"mask":a[K+3]=b;break}},getUniformLocations:function(r,s){return{uTransformMatrix:r.getUniformLocation(s,"uTransformMatrix"),uImage:r.getUniformLocation(s,"uImage")}},sendUniformData:function(r,s){var n=this.calculateMatrix();r.uniform1i(s.uImage,1),r.uniformMatrix3fv(s.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(r,s){i.Image.fromObject(r.image,function(n){var a=i.util.object.clone(r);a.image=n,s(new i.Image.filters.BlendImage(a))})}}(t),function(u){var i=u.fabric||(u.fabric={}),c=Math.pow,l=Math.floor,r=Math.sqrt,s=Math.abs,n=Math.round,a=Math.sin,f=Math.ceil,o=i.Image.filters,d=i.util.createClass;o.Resize=d(o.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(g,v){return{uDelta:g.getUniformLocation(v,"uDelta"),uTaps:g.getUniformLocation(v,"uTaps")}},sendUniformData:function(g,v){g.uniform2fv(v.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),g.uniform1fv(v.uTaps,this.taps)},retrieveShader:function(g){var v=this.getFilterWindow(),_=this.type+"_"+v;if(!g.programCache.hasOwnProperty(_)){var b=this.generateShader(v);g.programCache[_]=this.createProgram(g.context,b)}return g.programCache[_]},getFilterWindow:function(){var g=this.tempScale;return Math.ceil(this.lanczosLobes/g)},getTaps:function(){for(var g=this.lanczosCreate(this.lanczosLobes),v=this.tempScale,_=this.getFilterWindow(),b=new Array(_),w=1;w<=_;w++)b[w-1]=g(w*v);return b},generateShader:function(b){for(var v=new Array(b),_=this.fragmentSourceTOP,b,w=1;w<=b;w++)v[w-1]=w+".0 * uDelta";return _+="uniform float uTaps["+b+`];
`,_+=`void main() {
`,_+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,_+=`  float sum = 1.0;
`,v.forEach(function(x,A){_+="  color += texture2D(uTexture, vTexCoord + "+x+") * uTaps["+A+`];
`,_+="  color += texture2D(uTexture, vTexCoord - "+x+") * uTaps["+A+`];
`,_+="  sum += 2.0 * uTaps["+A+`];
`}),_+=`  gl_FragColor = color / sum;
`,_+="}",_},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(g){g.webgl?(g.passes++,this.width=g.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=g.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),g.destinationWidth=this.dW,this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g),g.sourceWidth=g.destinationWidth,this.height=g.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),g.destinationHeight=this.dH,this._setupFrameBuffer(g),this.applyToWebGL(g),this._swapTextures(g),g.sourceHeight=g.destinationHeight):this.applyTo2d(g)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(g){return function(v){if(v>=g||v<=-g)return 0;if(v<11920929e-14&&v>-11920929e-14)return 1;v*=Math.PI;var _=v/g;return a(v)/v*a(_)/_}},applyTo2d:function(g){var v=g.imageData,_=this.scaleX,b=this.scaleY;this.rcpScaleX=1/_,this.rcpScaleY=1/b;var w=v.width,x=v.height,A=n(w*_),M=n(x*b),X;this.resizeType==="sliceHack"?X=this.sliceByTwo(g,w,x,A,M):this.resizeType==="hermite"?X=this.hermiteFastResize(g,w,x,A,M):this.resizeType==="bilinear"?X=this.bilinearFiltering(g,w,x,A,M):this.resizeType==="lanczos"&&(X=this.lanczosResize(g,w,x,A,M)),g.imageData=X},sliceByTwo:function(g,v,_,b,w){var x=g.imageData,A=.5,M=!1,X=!1,z=v*A,$=_*A,q=i.filterBackend.resources,K,te,re=0,oe=0,se=v,S=0;for(q.sliceByTwo||(q.sliceByTwo=document.createElement("canvas")),K=q.sliceByTwo,(K.width<v*1.5||K.height<_)&&(K.width=v*1.5,K.height=_),te=K.getContext("2d"),te.clearRect(0,0,v*1.5,_),te.putImageData(x,0,0),b=l(b),w=l(w);!M||!X;)v=z,_=$,b<l(z*A)?z=l(z*A):(z=b,M=!0),w<l($*A)?$=l($*A):($=w,X=!0),te.drawImage(K,re,oe,v,_,se,S,z,$),re=se,oe=S,S+=$;return te.getImageData(re,oe,b,w)},lanczosResize:function(g,v,_,b,w){function x(I){var D,U,k,O,R,N,J,V,ee,ie,E;for(S.x=(I+.5)*$,F.x=l(S.x),D=0;D<w;D++){for(S.y=(D+.5)*q,F.y=l(S.y),R=0,N=0,J=0,V=0,ee=0,U=F.x-re;U<=F.x+re;U++)if(!(U<0||U>=v)){ie=l(1e3*s(U-S.x)),se[ie]||(se[ie]={});for(var T=F.y-oe;T<=F.y+oe;T++)T<0||T>=_||(E=l(1e3*s(T-S.y)),se[ie][E]||(se[ie][E]=z(r(c(ie*K,2)+c(E*te,2))/1e3)),k=se[ie][E],k>0&&(O=(T*v+U)*4,R+=k,N+=k*A[O],J+=k*A[O+1],V+=k*A[O+2],ee+=k*A[O+3]))}O=(D*b+I)*4,X[O]=N/R,X[O+1]=J/R,X[O+2]=V/R,X[O+3]=ee/R}return++I<b?x(I):M}var A=g.imageData.data,M=g.ctx.createImageData(b,w),X=M.data,z=this.lanczosCreate(this.lanczosLobes),$=this.rcpScaleX,q=this.rcpScaleY,K=2/this.rcpScaleX,te=2/this.rcpScaleY,re=f($*this.lanczosLobes/2),oe=f(q*this.lanczosLobes/2),se={},S={},F={};return x(0)},bilinearFiltering:function(g,v,_,b,w){var x,A,M,X,z,$,q,K,te,re,oe,se,S=0,F,I=this.rcpScaleX,D=this.rcpScaleY,U=4*(v-1),k=g.imageData,O=k.data,R=g.ctx.createImageData(b,w),N=R.data;for(q=0;q<w;q++)for(K=0;K<b;K++)for(z=l(I*K),$=l(D*q),te=I*K-z,re=D*q-$,F=4*($*v+z),oe=0;oe<4;oe++)x=O[F+oe],A=O[F+4+oe],M=O[F+U+oe],X=O[F+U+4+oe],se=x*(1-te)*(1-re)+A*te*(1-re)+M*re*(1-te)+X*te*re,N[S++]=se;return R},hermiteFastResize:function(g,v,_,b,w){for(var x=this.rcpScaleX,A=this.rcpScaleY,M=f(x/2),X=f(A/2),z=g.imageData,$=z.data,q=g.ctx.createImageData(b,w),K=q.data,te=0;te<w;te++)for(var re=0;re<b;re++){for(var oe=(re+te*b)*4,se=0,S=0,F=0,I=0,D=0,U=0,k=0,O=(te+.5)*A,R=l(te*A);R<(te+1)*A;R++)for(var N=s(O-(R+.5))/X,J=(re+.5)*x,V=N*N,ee=l(re*x);ee<(re+1)*x;ee++){var ie=s(J-(ee+.5))/M,E=r(V+ie*ie);E>1&&E<-1||(se=2*E*E*E-3*E*E+1,se>0&&(ie=4*(ee+R*v),k+=se*$[ie+3],F+=se,$[ie+3]<255&&(se=se*$[ie+3]/250),I+=se*$[ie],D+=se*$[ie+1],U+=se*$[ie+2],S+=se))}K[oe]=I/S,K[oe+1]=D/S,K[oe+2]=U/S,K[oe+3]=k/F}return q},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Contrast=l(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(r){if(this.contrast!==0){var s=r.imageData,n,f,a=s.data,f=a.length,o=Math.floor(this.contrast*255),d=259*(o+255)/(255*(259-o));for(n=0;n<f;n+=4)a[n]=d*(a[n]-128)+128,a[n+1]=d*(a[n+1]-128)+128,a[n+2]=d*(a[n+2]-128)+128}},getUniformLocations:function(r,s){return{uContrast:r.getUniformLocation(s,"uContrast")}},sendUniformData:function(r,s){r.uniform1f(s.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Saturation=l(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(r){if(this.saturation!==0){var s=r.imageData,n=s.data,a=n.length,f=-this.saturation,o,d;for(o=0;o<a;o+=4)d=Math.max(n[o],n[o+1],n[o+2]),n[o]+=d!==n[o]?(d-n[o])*f:0,n[o+1]+=d!==n[o+1]?(d-n[o+1])*f:0,n[o+2]+=d!==n[o+2]?(d-n[o+2])*f:0}},getUniformLocations:function(r,s){return{uSaturation:r.getUniformLocation(s,"uSaturation")}},sendUniformData:function(r,s){r.uniform1f(s.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Vibrance=l(c.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(r){if(this.vibrance!==0){var s=r.imageData,n=s.data,a=n.length,f=-this.vibrance,o,d,g,v;for(o=0;o<a;o+=4)d=Math.max(n[o],n[o+1],n[o+2]),g=(n[o]+n[o+1]+n[o+2])/3,v=Math.abs(d-g)*2/255*f,n[o]+=d!==n[o]?(d-n[o])*v:0,n[o+1]+=d!==n[o+1]?(d-n[o+1])*v:0,n[o+2]+=d!==n[o+2]?(d-n[o+2])*v:0}},getUniformLocations:function(r,s){return{uVibrance:r.getUniformLocation(s,"uVibrance")}},sendUniformData:function(r,s){r.uniform1f(s.uVibrance,-this.vibrance)}}),i.Image.filters.Vibrance.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Blur=l(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(r){r.webgl?(this.aspectRatio=r.sourceWidth/r.sourceHeight,r.passes++,this._setupFrameBuffer(r),this.horizontal=!0,this.applyToWebGL(r),this._swapTextures(r),this._setupFrameBuffer(r),this.horizontal=!1,this.applyToWebGL(r),this._swapTextures(r)):this.applyTo2d(r)},applyTo2d:function(r){r.imageData=this.simpleBlur(r)},simpleBlur:function(r){var s=r.filterBackend.resources,n,a,f=r.imageData.width,o=r.imageData.height;s.blurLayer1||(s.blurLayer1=i.util.createCanvasElement(),s.blurLayer2=i.util.createCanvasElement()),n=s.blurLayer1,a=s.blurLayer2,(n.width!==f||n.height!==o)&&(a.width=n.width=f,a.height=n.height=o);var d=n.getContext("2d"),g=a.getContext("2d"),v=15,_,b,w,x,A=this.blur*.06*.5;for(d.putImageData(r.imageData,0,0),g.clearRect(0,0,f,o),x=-v;x<=v;x++)_=(Math.random()-.5)/4,b=x/v,w=A*b*f+_,g.globalAlpha=1-Math.abs(b),g.drawImage(n,w,_),d.drawImage(a,0,0),g.globalAlpha=1,g.clearRect(0,0,a.width,a.height);for(x=-v;x<=v;x++)_=(Math.random()-.5)/4,b=x/v,w=A*b*o+_,g.globalAlpha=1-Math.abs(b),g.drawImage(n,_,w),d.drawImage(a,0,0),g.globalAlpha=1,g.clearRect(0,0,a.width,a.height);r.ctx.drawImage(n,0,0);var M=r.ctx.getImageData(0,0,n.width,n.height);return d.globalAlpha=1,d.clearRect(0,0,n.width,n.height),M},getUniformLocations:function(r,s){return{delta:r.getUniformLocation(s,"uDelta")}},sendUniformData:function(r,s){var n=this.chooseRightDelta();r.uniform2fv(s.delta,n)},chooseRightDelta:function(){var r=1,s=[0,0],n;return this.horizontal?this.aspectRatio>1&&(r=1/this.aspectRatio):this.aspectRatio<1&&(r=this.aspectRatio),n=r*this.blur*.12,this.horizontal?s[0]=n:s[1]=n,s}}),c.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Gamma=l(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(r){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,r)},applyTo2d:function(r){var s=r.imageData,n=s.data,a=this.gamma,f=n.length,o=1/a[0],d=1/a[1],g=1/a[2],v;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),v=0,f=256;v<f;v++)this.rVals[v]=Math.pow(v/255,o)*255,this.gVals[v]=Math.pow(v/255,d)*255,this.bVals[v]=Math.pow(v/255,g)*255;for(v=0,f=n.length;v<f;v+=4)n[v]=this.rVals[n[v]],n[v+1]=this.gVals[n[v+1]],n[v+2]=this.bVals[n[v+2]]},getUniformLocations:function(r,s){return{uGamma:r.getUniformLocation(s,"uGamma")}},sendUniformData:function(r,s){r.uniform3fv(s.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.Composed=l(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(r){this.callSuper("initialize",r),this.subFilters=this.subFilters.slice(0)},applyTo:function(r){r.passes+=this.subFilters.length-1,this.subFilters.forEach(function(s){s.applyTo(r)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(r){return r.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(r){return!r.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(r,s){var n=r.subFilters||[],a=n.map(function(o){return new i.Image.filters[o.type](o)}),f=new i.Image.filters.Composed({subFilters:a});return s&&s(f),f}}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.Image.filters,l=i.util.createClass;c.HueRotation=l(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var r=this.rotation*Math.PI,s=i.util.cos(r),n=i.util.sin(r),a=1/3,f=Math.sqrt(a)*n,o=1-s;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=s+o/3,this.matrix[1]=a*o-f,this.matrix[2]=a*o+f,this.matrix[5]=a*o+f,this.matrix[6]=s+a*o,this.matrix[7]=a*o-f,this.matrix[10]=a*o-f,this.matrix[11]=a*o+f,this.matrix[12]=s+a*o},isNeutralState:function(r){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,r)},applyTo:function(r){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,r)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(t),function(u){var i=u.fabric||(u.fabric={}),c=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}var l="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat(l),cacheProperties:i.Object.prototype.cacheProperties.concat(l),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,s){this.styles=s?s.styles||{}:{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",s),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var r=this.path;r&&(r.segmentsInfo=i.util.getPathSegmentsInfo(r.path))},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,s,n,a,f,o,d,g=0,v=this._textLines.length;g<v;g++)if(!(this.textAlign!=="justify"&&(g===v-1||this.isEndOfWrapping(g)))&&(a=0,f=this._textLines[g],s=this.getLineWidth(g),s<this.width&&(d=this.textLines[g].match(this._reSpacesAndTabs)))){n=d.length,r=(this.width-s)/n;for(var _=0,b=f.length;_<=b;_++)o=this.__charBounds[g][_],this._reSpaceAndTab.test(f[_])?(o.width+=r,o.kernedWidth+=r,o.left+=a,a+=r):o.left+=a}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),s=this.fontSize;return r.width+=s*r.zoomX,r.height+=s*r.zoomY,r},_render:function(r){var s=this.path;s&&!s.isNotVisible()&&s._render(r),this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,s,n){if(r.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":r.textBaseline="middle";break;case"ascender":r.textBaseline="top";break;case"descender":r.textBaseline="bottom";break}r.font=this._getFontDeclaration(s,n)},calcTextWidth:function(){for(var r=this.getLineWidth(0),s=1,n=this._textLines.length;s<n;s++){var a=this.getLineWidth(s);a>r&&(r=a)}return r},_renderTextLine:function(r,s,n,a,f,o){this._renderChars(r,s,n,a,f,o)},_renderTextLinesBackground:function(r){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var s,n,a=r.fillStyle,f,o,d=this._getLeftOffset(),g=this._getTopOffset(),v=0,_=0,b,w,x=this.path,A,M=0,X=this._textLines.length;M<X;M++){if(s=this.getHeightOfLine(M),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",M)){g+=s;continue}f=this._textLines[M],n=this._getLineLeftOffset(M),_=0,v=0,o=this.getValueOfPropertyAt(M,0,"textBackgroundColor");for(var z=0,$=f.length;z<$;z++)b=this.__charBounds[M][z],w=this.getValueOfPropertyAt(M,z,"textBackgroundColor"),x?(r.save(),r.translate(b.renderLeft,b.renderTop),r.rotate(b.angle),r.fillStyle=w,w&&r.fillRect(-b.width/2,-s/this.lineHeight*(1-this._fontSizeFraction),b.width,s/this.lineHeight),r.restore()):w!==o?(A=d+n+v,this.direction==="rtl"&&(A=this.width-A-_),r.fillStyle=o,o&&r.fillRect(A,g,_,s/this.lineHeight),v=b.left,_=b.width,o=w):_+=b.kernedWidth;w&&!x&&(A=d+n+v,this.direction==="rtl"&&(A=this.width-A-_),r.fillStyle=w,r.fillRect(A,g,_,s/this.lineHeight)),g+=s}r.fillStyle=a,this._removeShadow(r)}},getFontCache:function(r){var s=r.fontFamily.toLowerCase();i.charWidthsCache[s]||(i.charWidthsCache[s]={});var n=i.charWidthsCache[s],a=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return n[a]||(n[a]={}),n[a]},_measureChar:function(r,s,n,a){var f=this.getFontCache(s),o=this._getFontDeclaration(s),d=this._getFontDeclaration(a),g=n+r,v=o===d,_,b,w,x=s.fontSize/this.CACHE_FONT_SIZE,A;if(n&&f[n]!==void 0&&(w=f[n]),f[r]!==void 0&&(A=_=f[r]),v&&f[g]!==void 0&&(b=f[g],A=b-w),_===void 0||w===void 0||b===void 0){var M=this.getMeasuringContext();this._setTextStyles(M,s,!0)}return _===void 0&&(A=_=M.measureText(r).width,f[r]=_),w===void 0&&v&&n&&(w=M.measureText(n).width,f[n]=w),v&&b===void 0&&(b=M.measureText(g).width,f[g]=b,A=b-w),{width:_*x,kernedWidth:A*x}},getHeightOfChar:function(r,s){return this.getValueOfPropertyAt(r,s,"fontSize")},measureLine:function(r){var s=this._measureLine(r);return this.charSpacing!==0&&(s.width-=this._getWidthOfCharSpacing()),s.width<0&&(s.width=0),s},_measureLine:function(r){var s=0,n,a,f=this._textLines[r],o,d,g=0,v=new Array(f.length),_=0,b,w,x=this.path,A=this.pathSide==="right";for(this.__charBounds[r]=v,n=0;n<f.length;n++)a=f[n],d=this._getGraphemeBox(a,r,n,o),v[n]=d,s+=d.kernedWidth,o=a;if(v[n]={left:d?d.left+d.width:0,width:0,kernedWidth:0,height:this.fontSize},x){switch(w=x.segmentsInfo[x.segmentsInfo.length-1].length,b=i.util.getPointOnPath(x.path,0,x.segmentsInfo),b.x+=x.pathOffset.x,b.y+=x.pathOffset.y,this.textAlign){case"left":_=A?w-s:0;break;case"center":_=(w-s)/2;break;case"right":_=A?0:w-s;break}for(_+=this.pathStartOffset*(A?-1:1),n=A?f.length-1:0;A?n>=0:n<f.length;A?n--:n++)d=v[n],_>w?_%=w:_<0&&(_+=w),this._setGraphemeOnPath(_,d,b),_+=d.kernedWidth}return{width:s,numOfSpaces:g}},_setGraphemeOnPath:function(r,s,n){var a=r+s.kernedWidth/2,f=this.path,o=i.util.getPointOnPath(f.path,a,f.segmentsInfo);s.renderLeft=o.x-n.x,s.renderTop=o.y-n.y,s.angle=o.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(r,s,n,a,f){var o=this.getCompleteStyleDeclaration(s,n),d=a?this.getCompleteStyleDeclaration(s,n-1):{},g=this._measureChar(r,o,a,d),v=g.kernedWidth,_=g.width,b;this.charSpacing!==0&&(b=this._getWidthOfCharSpacing(),_+=b,v+=b);var w={width:_,left:0,height:o.fontSize,kernedWidth:v,deltaY:o.deltaY};if(n>0&&!f){var x=this.__charBounds[s][n-1];w.left=x.left+x.width+g.kernedWidth-g.width}return w},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var s=this._textLines[r],n=this.getHeightOfChar(r,0),a=1,f=s.length;a<f;a++)n=Math.max(this.getHeightOfChar(r,a),n);return this.__lineHeights[r]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,s=0,n=0,a=this._textLines.length;n<a;n++)r=this.getHeightOfLine(n),s+=n===a-1?r/this.lineHeight:r;return s},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(r,s){r.save();for(var n=0,a=this._getLeftOffset(),f=this._getTopOffset(),o=0,d=this._textLines.length;o<d;o++){var g=this.getHeightOfLine(o),v=g/this.lineHeight,_=this._getLineLeftOffset(o);this._renderTextLine(s,r,this._textLines[o],a+_,f+n+v,o),n+=g}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,s,n,a,f,o){var d=this.getHeightOfLine(o),g=this.textAlign.indexOf("justify")!==-1,v,_,b="",w,x=0,A,M=this.path,X=!g&&this.charSpacing===0&&this.isEmptyStyles(o)&&!M,z=this.direction==="ltr",$=this.direction==="ltr"?1:-1,q,K=s.canvas.getAttribute("dir");if(s.save(),K!==this.direction&&(s.canvas.setAttribute("dir",z?"ltr":"rtl"),s.direction=z?"ltr":"rtl",s.textAlign=z?"left":"right"),f-=d*this._fontSizeFraction/this.lineHeight,X){this._renderChar(r,s,o,0,n.join(""),a,f,d),s.restore();return}for(var te=0,re=n.length-1;te<=re;te++)A=te===re||this.charSpacing||M,b+=n[te],w=this.__charBounds[o][te],x===0?(a+=$*(w.kernedWidth-w.width),x+=w.width):x+=w.kernedWidth,g&&!A&&this._reSpaceAndTab.test(n[te])&&(A=!0),A||(v=v||this.getCompleteStyleDeclaration(o,te),_=this.getCompleteStyleDeclaration(o,te+1),A=i.util.hasStyleChanged(v,_,!1)),A&&(M?(s.save(),s.translate(w.renderLeft,w.renderTop),s.rotate(w.angle),this._renderChar(r,s,o,te,b,-x/2,0,d),s.restore()):(q=a,this._renderChar(r,s,o,te,b,q,f,d)),b="",v=_,a+=$*x,x=0);s.restore()},_applyPatternGradientTransformText:function(r){var s=i.util.createCanvasElement(),n,a=this.width+this.strokeWidth,f=this.height+this.strokeWidth;return s.width=a,s.height=f,n=s.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(a,0),n.lineTo(a,f),n.lineTo(0,f),n.closePath(),n.translate(a/2,f/2),n.fillStyle=r.toLive(n),this._applyPatternGradientTransform(n,r),n.fill(),n.createPattern(s,"no-repeat")},handleFiller:function(r,s,n){var a,f;return n.toLive?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(a=-this.width/2,f=-this.height/2,r.translate(a,f),r[s]=this._applyPatternGradientTransformText(n),{offsetX:a,offsetY:f}):(r[s]=n.toLive(r,this),this._applyPatternGradientTransform(r,n)):(r[s]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(r,s){return r.lineWidth=s.strokeWidth,r.lineCap=this.strokeLineCap,r.lineDashOffset=this.strokeDashOffset,r.lineJoin=this.strokeLineJoin,r.miterLimit=this.strokeMiterLimit,this.handleFiller(r,"strokeStyle",s.stroke)},_setFillStyles:function(r,s){return this.handleFiller(r,"fillStyle",s.fill)},_renderChar:function(r,s,n,a,f,o,d){var g=this._getStyleDeclaration(n,a),v=this.getCompleteStyleDeclaration(n,a),_=r==="fillText"&&v.fill,b=r==="strokeText"&&v.stroke&&v.strokeWidth,w,x;!b&&!_||(s.save(),_&&(w=this._setFillStyles(s,v)),b&&(x=this._setStrokeStyles(s,v)),s.font=this._getFontDeclaration(v),g&&g.textBackgroundColor&&this._removeShadow(s),g&&g.deltaY&&(d+=g.deltaY),_&&s.fillText(f,o-w.offsetX,d-w.offsetY),b&&s.strokeText(f,o-x.offsetX,d-x.offsetY),s.restore())},setSuperscript:function(r,s){return this._setScript(r,s,this.superscript)},setSubscript:function(r,s){return this._setScript(r,s,this.subscript)},_setScript:function(r,s,n){var a=this.get2DCursorLocation(r,!0),f=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),o=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),d={fontSize:f*n.size,deltaY:o+f*n.baseline};return this.setSelectionStyles(d,r,s),this},_getLineLeftOffset:function(r){var s=this.getLineWidth(r),n=this.width-s,a=this.textAlign,f=this.direction,d,o=0,d=this.isEndOfWrapping(r);return a==="justify"||a==="justify-center"&&!d||a==="justify-right"&&!d||a==="justify-left"&&!d?0:(a==="center"&&(o=n/2),a==="right"&&(o=n),a==="justify-center"&&(o=n/2),a==="justify-right"&&(o=n),f==="rtl"&&(o-=n),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r]!==void 0)return this.__lineWidths[r];var s=this.measureLine(r),n=s.width;return this.__lineWidths[r]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,s,n){var a=this._getStyleDeclaration(r,s);return a&&typeof a[n]<"u"?a[n]:this[n]},_renderTextDecoration:function(r,s){if(!(!this[s]&&!this.styleHas(s))){for(var n,a,f,o,d,g,v,_,b=this._getLeftOffset(),w=this._getTopOffset(),x,A,M,X,z,$,q,K,te=this.path,re=this._getWidthOfCharSpacing(),oe=this.offsets[s],se=0,S=this._textLines.length;se<S;se++){if(n=this.getHeightOfLine(se),!this[s]&&!this.styleHas(s,se)){w+=n;continue}v=this._textLines[se],$=n/this.lineHeight,o=this._getLineLeftOffset(se),A=0,M=0,_=this.getValueOfPropertyAt(se,0,s),K=this.getValueOfPropertyAt(se,0,"fill"),x=w+$*(1-this._fontSizeFraction),a=this.getHeightOfChar(se,0),d=this.getValueOfPropertyAt(se,0,"deltaY");for(var F=0,I=v.length;F<I;F++)if(X=this.__charBounds[se][F],z=this.getValueOfPropertyAt(se,F,s),q=this.getValueOfPropertyAt(se,F,"fill"),f=this.getHeightOfChar(se,F),g=this.getValueOfPropertyAt(se,F,"deltaY"),te&&z&&q)r.save(),r.fillStyle=K,r.translate(X.renderLeft,X.renderTop),r.rotate(X.angle),r.fillRect(-X.kernedWidth/2,oe*f+g,X.kernedWidth,this.fontSize/15),r.restore();else if((z!==_||q!==K||f!==a||g!==d)&&M>0){var D=b+o+A;this.direction==="rtl"&&(D=this.width-D-M),_&&K&&(r.fillStyle=K,r.fillRect(D,x+oe*a+d,M,this.fontSize/15)),A=X.left,M=X.width,_=z,K=q,a=f,d=g}else M+=X.kernedWidth;var D=b+o+A;this.direction==="rtl"&&(D=this.width-D-M),r.fillStyle=q,z&&q&&r.fillRect(D,x+oe*a+d,M-re,this.fontSize/15),w+=n}this._removeShadow(r)}},_getFontDeclaration:function(r,s){var n=r||this,a=this.fontFamily,f=i.Text.genericFonts.indexOf(a.toLowerCase())>-1,o=a===void 0||a.indexOf("'")>-1||a.indexOf(",")>-1||a.indexOf('"')>-1||f?n.fontFamily:'"'+n.fontFamily+'"';return[i.isLikelyNode?n.fontWeight:n.fontStyle,i.isLikelyNode?n.fontStyle:n.fontWeight,s?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",o].join(" ")},render:function(r){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r)))},_splitTextIntoLines:function(r){for(var s=r.split(this._reNewline),n=new Array(s.length),a=[`
`],f=[],o=0;o<s.length;o++)n[o]=i.util.string.graphemeSplit(s[o]),f=f.concat(n[o],a);return f.pop(),{_unwrappedLines:n,lines:s,graphemeText:f,graphemeLines:n}},toObject:function(r){var s=l.concat(r),n=this.callSuper("toObject",s);return n.styles=i.util.stylesToArray(this.styles,this.text),n.path&&(n.path=this.path.toObject()),n},set:function(r,s){this.callSuper("set",r,s);var n=!1,a=!1;if(typeof r=="object")for(var f in r)f==="path"&&this.setPathInfo(),n=n||this._dimensionAffectingProps.indexOf(f)!==-1,a=a||f==="path";else n=this._dimensionAffectingProps.indexOf(r)!==-1,a=r==="path";return a&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(r,s,n){if(!r)return s(null);var a=i.parseAttributes(r,i.Text.ATTRIBUTE_NAMES),f=a.textAnchor||"left";if(n=i.util.object.extend(n?c(n):{},a),n.top=n.top||0,n.left=n.left||0,a.textDecoration){var o=a.textDecoration;o.indexOf("underline")!==-1&&(n.underline=!0),o.indexOf("overline")!==-1&&(n.overline=!0),o.indexOf("line-through")!==-1&&(n.linethrough=!0),delete n.textDecoration}"dx"in a&&(n.left+=a.dx),"dy"in a&&(n.top+=a.dy),"fontSize"in n||(n.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var d="";"textContent"in r?d=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(d=r.firstChild.data),d=d.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var g=n.strokeWidth;n.strokeWidth=0;var v=new i.Text(d,n),_=v.getScaledHeight()/v.height,b=(v.height+v.strokeWidth)*v.lineHeight-v.height,w=b*_,x=v.getScaledHeight()+w,A=0;f==="center"&&(A=v.getScaledWidth()/2),f==="right"&&(A=v.getScaledWidth()),v.set({left:v.left-A,top:v.top-(x-v.fontSize*(.07+v._fontSizeFraction))/v.lineHeight,strokeWidth:typeof g<"u"?g:1}),s(v)},i.Text.fromObject=function(r,s){var n=c(r),a=r.path;return delete n.path,i.Object._fromObject("Text",n,function(f){f.styles=i.util.stylesFromArray(r.styles,r.text),a?i.Object._fromObject("Path",a,function(o){f.set("path",o),s(f)},"path"):s(f)},"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(u){if(!this.styles||typeof u<"u"&&!this.styles[u])return!0;var i=typeof u>"u"?this.styles:{line:this.styles[u]};for(var c in i)for(var l in i[c])for(var r in i[c][l])return!1;return!0},styleHas:function(u,i){if(!this.styles||!u||u===""||typeof i<"u"&&!this.styles[i])return!1;var c=typeof i>"u"?this.styles:{0:this.styles[i]};for(var l in c)for(var r in c[l])if(typeof c[l][r][u]<"u")return!0;return!1},cleanStyle:function(u){if(!this.styles||!u||u==="")return!1;var i=this.styles,c=0,l,r,s=!0,n=0,a;for(var f in i){l=0;for(var o in i[f]){var a=i[f][o],d=a.hasOwnProperty(u);c++,d?(r?a[u]!==r&&(s=!1):r=a[u],a[u]===this[u]&&delete a[u]):s=!1,Object.keys(a).length!==0?l++:delete i[f][o]}l===0&&delete i[f]}for(var g=0;g<this._textLines.length;g++)n+=this._textLines[g].length;s&&c===n&&(this[u]=r,this.removeStyle(u))},removeStyle:function(u){if(!(!this.styles||!u||u==="")){var i=this.styles,c,l,r;for(l in i){c=i[l];for(r in c)delete c[r][u],Object.keys(c[r]).length===0&&delete c[r];Object.keys(c).length===0&&delete i[l]}}},_extendStyles:function(u,i){var c=this.get2DCursorLocation(u);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),i)},get2DCursorLocation:function(u,i){typeof u>"u"&&(u=this.selectionStart);for(var c=i?this._unwrappedTextLines:this._textLines,l=c.length,r=0;r<l;r++){if(u<=c[r].length)return{lineIndex:r,charIndex:u};u-=c[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:c[r-1].length<u?c[r-1].length:u}},getSelectionStyles:function(u,i,c){typeof u>"u"&&(u=this.selectionStart||0),typeof i>"u"&&(i=this.selectionEnd||u);for(var l=[],r=u;r<i;r++)l.push(this.getStyleAtPosition(r,c));return l},getStyleAtPosition:function(u,i){var c=this.get2DCursorLocation(u),l=i?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return l||{}},setSelectionStyles:function(u,i,c){typeof i>"u"&&(i=this.selectionStart||0),typeof c>"u"&&(c=this.selectionEnd||i);for(var l=i;l<c;l++)this._extendStyles(l,u);return this._forceClearCache=!0,this},_getStyleDeclaration:function(u,i){var c=this.styles&&this.styles[u];return c?c[i]:null},getCompleteStyleDeclaration:function(u,i){for(var c=this._getStyleDeclaration(u,i)||{},l={},r,s=0;s<this._styleProperties.length;s++)r=this._styleProperties[s],l[r]=typeof c[r]>"u"?this[r]:c[r];return l},_setStyleDeclaration:function(u,i,c){this.styles[u][i]=c},_deleteStyleDeclaration:function(u,i){delete this.styles[u][i]},_getLineStyle:function(u){return!!this.styles[u]},_setLineStyle:function(u){this.styles[u]={}},_deleteLineStyle:function(u){delete this.styles[u]}})}(),function(){function u(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,c){this.callSuper("initialize",i,c),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,c){this[i]!==c&&(this._fireSelectionChanged(),this[i]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,l=this.canvas.viewportTransform;c.save(),c.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this.transform(c),this._clearTextArea(c),i||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,c):this.renderSelection(i,c),c.restore()}},_clearTextArea:function(i){var c=this.width+4,l=this.height+4;i.clearRect(-c/2,-l/2,c,l)},_getCursorBoundaries:function(i){typeof i>"u"&&(i=this.selectionStart);var c=this._getLeftOffset(),l=this._getTopOffset(),r=this._getCursorBoundariesOffsets(i);return{left:c,top:l,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,l,r,s=0,n=0,a,f=this.get2DCursorLocation(i);r=f.charIndex,l=f.lineIndex;for(var o=0;o<l;o++)s+=this.getHeightOfLine(o);c=this._getLineLeftOffset(l);var d=this.__charBounds[l][r];return d&&(n=d.left),this.charSpacing!==0&&r===this._textLines[l].length&&(n-=this._getWidthOfCharSpacing()),a={top:s,left:c+(n>0?n:0)},this.direction==="rtl"&&(a.left*=-1),this.cursorOffsetCache=a,this.cursorOffsetCache},renderCursor:function(i,c){var l=this.get2DCursorLocation(),r=l.lineIndex,s=l.charIndex>0?l.charIndex-1:0,n=this.getValueOfPropertyAt(r,s,"fontSize"),a=this.scaleX*this.canvas.getZoom(),f=this.cursorWidth/a,o=i.topOffset,d=this.getValueOfPropertyAt(r,s,"deltaY");o+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-n*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,c),c.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,s,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(i.left+i.leftOffset-f/2,o+i.top+d,f,n)},renderSelection:function(i,c){for(var l=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,s=this.textAlign.indexOf("justify")!==-1,n=this.get2DCursorLocation(l),a=this.get2DCursorLocation(r),f=n.lineIndex,o=a.lineIndex,d=n.charIndex<0?0:n.charIndex,g=a.charIndex<0?0:a.charIndex,v=f;v<=o;v++){var _=this._getLineLeftOffset(v)||0,b=this.getHeightOfLine(v),w=0,x=0,A=0;if(v===f&&(x=this.__charBounds[f][d].left),v>=f&&v<o)A=s&&!this.isEndOfWrapping(v)?this.width:this.getLineWidth(v)||5;else if(v===o)if(g===0)A=this.__charBounds[o][g].left;else{var M=this._getWidthOfCharSpacing();A=this.__charBounds[o][g-1].left+this.__charBounds[o][g-1].width-M}w=b,(this.lineHeight<1||v===o&&this.lineHeight>1)&&(b/=this.lineHeight);var X=i.left+_+x,z=A-x,$=b,q=0;this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",$=1,q=b):c.fillStyle=this.selectionColor,this.direction==="rtl"&&(X=this.width-X-z),c.fillRect(X,i.top+i.topOffset+q,z,$),i.topOffset+=w}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),c=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c}}}),e.IText.fromObject=function(i,c){var l=e.util.stylesFromArray(i.styles,i.text),r=Object.assign({},i,{styles:l});if(u(r),r.styles)for(var s in r.styles)for(var n in r.styles[s])u(r.styles[s][n]);e.Object._fromObject("IText",r,c,"text")}}(),function(){var u=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var c=i.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,i._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var c=i.canvas;c&&(c._iTextInstances=c._iTextInstances||[],e.util.removeFromArray(c._iTextInstances,i),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,i._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(c){c.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,c,l,r){var s;return s={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",c,{duration:l,onComplete:function(){s.isAborted||i[r]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return s.isAborted}}),s},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var c=this,l=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},l)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var c=0,l=i-1;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)c++,l--;for(;/\S/.test(this._text[l])&&l>-1;)c++,l--;return i-c},findWordBoundaryRight:function(i){var c=0,l=i;if(this._reSpace.test(this._text[l]))for(;this._reSpace.test(this._text[l]);)c++,l++;for(;/\S/.test(this._text[l])&&l<this._text.length;)c++,l++;return i+c},findLineBoundaryLeft:function(i){for(var c=0,l=i-1;!/\n/.test(this._text[l])&&l>-1;)c++,l--;return i-c},findLineBoundaryRight:function(i){for(var c=0,l=i;!/\n/.test(this._text[l])&&l<this._text.length;)c++,l++;return i+c},searchWordBoundary:function(i,c){for(var l=this._text,r=this._reSpace.test(l[i])?i-1:i,s=l[r],n=e.reNonWord;!n.test(s)&&r>0&&r<l.length;)r+=c,s=l[r];return n.test(s)&&(r+=c===1?0:1),r},selectWord:function(i){i=i||this.selectionStart;var c=this.searchWordBoundary(i,-1),l=this.searchWordBoundary(i,1);this.selectionStart=c,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var c=this.findLineBoundaryLeft(i),l=this.findLineBoundaryRight(i);return this.selectionStart=c,this.selectionEnd=l,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var c=this.getSelectionStartFromPointer(i.e),l=this.selectionStart,r=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||l===r)&&(l===c||r===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==l||this.selectionEnd!==r)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,c,l){var r=l.slice(0,i),s=e.util.string.graphemeSplit(r).length;if(i===c)return{selectionStart:s,selectionEnd:s};var n=l.slice(i,c),a=e.util.string.graphemeSplit(n).length;return{selectionStart:s,selectionEnd:s+a}},fromGraphemeToStringSelection:function(i,c,l){var r=l.slice(0,i),s=r.join("").length;if(i===c)return{selectionStart:s,selectionEnd:s};var n=l.slice(i,c),a=n.join("").length;return{selectionStart:s,selectionEnd:s+a}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(i),l=this.get2DCursorLocation(i),r=l.lineIndex,s=l.charIndex,n=this.getValueOfPropertyAt(r,s,"fontSize")*this.lineHeight,a=c.leftOffset,f=this.calcTransformMatrix(),o={x:c.left+a,y:c.top+c.topOffset+n},d=this.canvas.getRetinaScaling(),g=this.canvas.upperCanvasEl,v=g.width/d,_=g.height/d,b=v-n,w=_-n,x=g.clientWidth/v,A=g.clientHeight/_;return o=e.util.transformPoint(o,f),o=e.util.transformPoint(o,this.canvas.viewportTransform),o.x*=x,o.y*=A,o.x<0&&(o.x=0),o.x>b&&(o.x=b),o.y<0&&(o.y=0),o.y>w&&(o.y=w),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:n+"px",charHeight:n}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,c){var l=this.get2DCursorLocation(i,!0),r=this.get2DCursorLocation(c,!0),s=l.lineIndex,n=l.charIndex,a=r.lineIndex,f=r.charIndex,o,d;if(s!==a){if(this.styles[s])for(o=n;o<this._unwrappedTextLines[s].length;o++)delete this.styles[s][o];if(this.styles[a])for(o=f;o<this._unwrappedTextLines[a].length;o++)d=this.styles[a][o],d&&(this.styles[s]||(this.styles[s]={}),this.styles[s][n+o-f]=d);for(o=s+1;o<=a;o++)delete this.styles[o];this.shiftLineStyles(a,s-a)}else if(this.styles[s]){d=this.styles[s];var g=f-n,v,_;for(o=n;o<f;o++)delete d[o];for(_ in this.styles[s])v=parseInt(_,10),v>=f&&(d[v-g]=d[_],delete d[_])}},shiftLineStyles:function(i,c){var l=u(this.styles);for(var r in this.styles){var s=parseInt(r,10);s>i&&(this.styles[s+c]=l[s],l[s-c]||delete this.styles[s])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,c,l,r){var s,n={},a=!1,f=this._unwrappedTextLines[i].length===c;l||(l=1),this.shiftLineStyles(i,l),this.styles[i]&&(s=this.styles[i][c===0?c:c-1]);for(var o in this.styles[i]){var d=parseInt(o,10);d>=c&&(a=!0,n[d-c]=this.styles[i][o],f&&c===0||delete this.styles[i][o])}var g=!1;for(a&&!f&&(this.styles[i+l]=n,g=!0),g&&l--;l>0;)r&&r[l-1]?this.styles[i+l]={0:u(r[l-1])}:s?this.styles[i+l]={0:u(s)}:delete this.styles[i+l],l--;this._forceClearCache=!0},insertCharStyleObject:function(i,c,l,r){this.styles||(this.styles={});var s=this.styles[i],n=s?u(s):{};l||(l=1);for(var a in n){var f=parseInt(a,10);f>=c&&(s[f+l]=n[f],n[f-l]||delete s[f])}if(this._forceClearCache=!0,r){for(;l--;)Object.keys(r[l]).length&&(this.styles[i]||(this.styles[i]={}),this.styles[i][c+l]=u(r[l]));return}if(s)for(var o=s[c?c-1:1];o&&l--;)this.styles[i][c+l]=u(o)},insertNewStyleBlock:function(i,c,l){for(var r=this.get2DCursorLocation(c,!0),s=[0],n=0,a=0;a<i.length;a++)i[a]===`
`?(n++,s[n]=0):s[n]++;s[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,s[0],l),l=l&&l.slice(s[0]+1)),n&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+s[0],n);for(var a=1;a<n;a++)s[a]>0?this.insertCharStyleObject(r.lineIndex+a,0,s[a],l):l&&this.styles[r.lineIndex+a]&&l[0]&&(this.styles[r.lineIndex+a][0]=l[0]),l=l&&l.slice(s[a]+1);s[a]>0&&this.insertCharStyleObject(r.lineIndex+a,0,s[a],l)},setSelectionStartEndWithShift:function(i,c,l){l<=i?(c===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=l):l>i&&l<c?this._selectionDirection==="right"?this.selectionEnd=l:this.selectionStart=l:(c===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=l)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(u){if(this.canvas){this.__newClickTime=+new Date;var i=u.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",u),this._stopEvent(u.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(u){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===u.x&&this.__lastPointer.y===u.y},_stopEvent:function(u){u.preventDefault&&u.preventDefault(),u.stopPropagation&&u.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(u){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(u.e))},tripleClickHandler:function(u){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(u.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(u){!this.canvas||!this.editable||u.e.button&&u.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(u.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(u){!this.canvas||!this.editable||u.e.button&&u.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(u){if(this.__isMousedown=!1,!(!this.editable||this.group||u.transform&&u.transform.actionPerformed||u.e.button&&u.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(u.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(u){var i=this.getSelectionStartFromPointer(u),c=this.selectionStart,l=this.selectionEnd;u.shiftKey?this.setSelectionStartEndWithShift(c,l,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(u){for(var i=this.getLocalPointer(u),c=0,l=0,r=0,s=0,n=0,a,f,o=0,d=this._textLines.length;o<d&&r<=i.y;o++)r+=this.getHeightOfLine(o)*this.scaleY,n=o,o>0&&(s+=this._textLines[o-1].length+this.missingNewlineOffset(o-1));a=this._getLineLeftOffset(n),l=a*this.scaleX,f=this._textLines[n],this.direction==="rtl"&&(i.x=this.width*this.scaleX-i.x+l);for(var g=0,v=f.length;g<v&&(c=l,l+=this.__charBounds[n][g].kernedWidth*this.scaleX,l<=i.x);g++)s++;return this._getNewSelectionStartFromOffset(i,c,l,s,v)},_getNewSelectionStartFromOffset:function(u,i,c,l,r){var s=u.x-i,n=c-u.x,a=n>s||n<0?0:1,f=l+a;return this.flipX&&(f=r-f),f>this._text.length&&(f=this._text.length),f}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var u=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+u.top+"; left: "+u.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+u.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(u){if(this.isEditing){var i=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(u.keyCode in i)this[i[u.keyCode]](u);else if(u.keyCode in this.ctrlKeysMapDown&&(u.ctrlKey||u.metaKey))this[this.ctrlKeysMapDown[u.keyCode]](u);else return;u.stopImmediatePropagation(),u.preventDefault(),u.keyCode>=33&&u.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(u){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(u.keyCode in this.ctrlKeysMapUp&&(u.ctrlKey||u.metaKey))this[this.ctrlKeysMapUp[u.keyCode]](u);else return;u.stopImmediatePropagation(),u.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(u){var i=this.fromPaste;if(this.fromPaste=!1,u&&u.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,l=this._text.length,r=c.length,s,n,a=r-l,f=this.selectionStart,o=this.selectionEnd,d=f!==o,g,v,_;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var b=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),w=f>b.selectionStart;d?(s=this._text.slice(f,o),a+=o-f):r<l&&(w?s=this._text.slice(o+a,o):s=this._text.slice(f,f-a)),n=c.slice(b.selectionEnd-a,b.selectionEnd),s&&s.length&&(n.length&&(g=this.getSelectionStyles(f,f+1,!1),g=n.map(function(){return g[0]})),d?(v=f,_=o):w?(v=o-s.length,_=o):(v=o,_=o+s.length),this.removeStyleFromTo(v,_)),n.length&&(i&&n.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(g=e.copiedTextStyle),this.insertNewStyleBlock(n,f,g)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(u){this.compositionStart=u.target.selectionStart,this.compositionEnd=u.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(u){return u&&u.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(u,i){var c=this._getLineLeftOffset(u),l;return i>0&&(l=this.__charBounds[u][i-1],c+=l.left+l.width),c},getDownCursorOffset:function(u,i){var c=this._getSelectionForOffset(u,i),l=this.get2DCursorLocation(c),r=l.lineIndex;if(r===this._textLines.length-1||u.metaKey||u.keyCode===34)return this._text.length-c;var s=l.charIndex,n=this._getWidthBeforeCursor(r,s),a=this._getIndexOnLine(r+1,n),f=this._textLines[r].slice(s);return f.length+a+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(u,i){return u.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(u,i){var c=this._getSelectionForOffset(u,i),l=this.get2DCursorLocation(c),r=l.lineIndex;if(r===0||u.metaKey||u.keyCode===33)return-c;var s=l.charIndex,n=this._getWidthBeforeCursor(r,s),a=this._getIndexOnLine(r-1,n),f=this._textLines[r].slice(0,s),o=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+a-f.length+(1-o)},_getIndexOnLine:function(u,i){for(var c=this._textLines[u],l=this._getLineLeftOffset(u),r=l,s=0,n,a,f=0,o=c.length;f<o;f++)if(n=this.__charBounds[u][f].width,r+=n,r>i){a=!0;var d=r-n,g=r,v=Math.abs(d-i),_=Math.abs(g-i);s=_<v?f:f-1;break}return a||(s=c.length-1),s},moveCursorDown:function(u){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",u)},moveCursorUp:function(u){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",u)},_moveCursorUpOrDown:function(u,i){var c="get"+u+"CursorOffset",l=this[c](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(l):this.moveCursorWithoutShift(l),l!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(u){var i=this._selectionDirection==="left"?this.selectionStart+u:this.selectionEnd+u;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),u!==0},moveCursorWithoutShift:function(u){return u<0?(this.selectionStart+=u,this.selectionEnd=this.selectionStart):(this.selectionEnd+=u,this.selectionStart=this.selectionEnd),u!==0},moveCursorLeft:function(u){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",u)},_move:function(u,i,c){var l;if(u.altKey)l=this["findWordBoundary"+c](this[i]);else if(u.metaKey||u.keyCode===35||u.keyCode===36)l=this["findLineBoundary"+c](this[i]);else return this[i]+=c==="Left"?-1:1,!0;if(typeof l<"u"&&this[i]!==l)return this[i]=l,!0},_moveLeft:function(u,i){return this._move(u,i,"Left")},_moveRight:function(u,i){return this._move(u,i,"Right")},moveCursorLeftWithoutShift:function(u){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(u,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(u){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(u,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(u,"selectionStart")},moveCursorRight:function(u){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",u)},_moveCursorLeftOrRight:function(u,i){var c="moveCursor"+u+"With";this._currentCursorOpacity=1,i.shiftKey?c+="Shift":c+="outShift",this[c](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(u){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(u,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(u,"selectionEnd")},moveCursorRightWithoutShift:function(u){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(u,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(u,i){typeof i>"u"&&(i=u+1),this.removeStyleFromTo(u,i),this._text.splice(u,i-u),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(u,i,c,l){typeof l>"u"&&(l=c),l>c&&this.removeStyleFromTo(c,l);var r=e.util.string.graphemeSplit(u);this.insertNewStyleBlock(r,c,i),this._text=[].concat(this._text.slice(0,c),r,this._text.slice(l)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var u=e.util.toFixed,i=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),l=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(l)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var l=!0,r=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",r?'text-decoration="'+r+'" ':"",'style="',this.getSvgStyles(l),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,l){var r=[],s=[],n=c,a;this._setSVGBg(s);for(var f=0,o=this._textLines.length;f<o;f++)a=this._getLineLeftOffset(f),(this.textBackgroundColor||this.styleHas("textBackgroundColor",f))&&this._setSVGTextLineBg(s,f,l+a,n),this._setSVGTextLineText(r,f,l+a,n),n+=this.getHeightOfLine(f);return{textSpans:r,textBgRects:s}},_createTextCharSpan:function(c,l,r,s){var n=c!==c.trim()||c.match(i),a=this.getSvgSpanStyles(l,n),f=a?'style="'+a+'"':"",o=l.deltaY,d="",g=e.Object.NUM_FRACTION_DIGITS;return o&&(d=' dy="'+u(o,g)+'" '),['<tspan x="',u(r,g),'" y="',u(s,g),'" ',d,f,">",e.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,l,r,s){var n=this.getHeightOfLine(l),a=this.textAlign.indexOf("justify")!==-1,f,o,d="",g,v,_=0,b=this._textLines[l],w;s+=n*(1-this._fontSizeFraction)/this.lineHeight;for(var x=0,A=b.length-1;x<=A;x++)w=x===A||this.charSpacing,d+=b[x],g=this.__charBounds[l][x],_===0?(r+=g.kernedWidth-g.width,_+=g.width):_+=g.kernedWidth,a&&!w&&this._reSpaceAndTab.test(b[x])&&(w=!0),w||(f=f||this.getCompleteStyleDeclaration(l,x),o=this.getCompleteStyleDeclaration(l,x+1),w=e.util.hasStyleChanged(f,o,!0)),w&&(v=this._getStyleDeclaration(l,x)||{},c.push(this._createTextCharSpan(d,v,r,s)),d="",f=o,r+=_,_=0)},_pushTextBgRect:function(c,l,r,s,n,a){var f=e.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(l),' x="',u(r,f),'" y="',u(s,f),'" width="',u(n,f),'" height="',u(a,f),`"></rect>
`)},_setSVGTextLineBg:function(c,l,r,s){for(var n=this._textLines[l],a=this.getHeightOfLine(l)/this.lineHeight,f=0,o=0,d,g,v=this.getValueOfPropertyAt(l,0,"textBackgroundColor"),_=0,b=n.length;_<b;_++)d=this.__charBounds[l][_],g=this.getValueOfPropertyAt(l,_,"textBackgroundColor"),g!==v?(v&&this._pushTextBgRect(c,v,r+o,s,f,a),o=d.left,f=d.width,v=g):f+=d.kernedWidth;g&&this._pushTextBgRect(c,g,r+o,s,f,a)},_getFillAttributes:function(c){var l=c&&typeof c=="string"?new e.Color(c):"";return!l||!l.getSource()||l.getAlpha()===1?'fill="'+c+'"':'opacity="'+l.getAlpha()+'" fill="'+l.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var l=0,r=0,s=0;s<c;s++)l+=this.getHeightOfLine(s);return r=this.getHeightOfLine(s),{lineTop:l,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var l=e.Object.prototype.getSvgStyles.call(this,c);return l+" white-space: pre;"}})}(),function(u){var i=u.fabric||(u.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var l=0,r=0,s=0,n={},a=0;a<c.graphemeLines.length;a++)c.graphemeText[s]===`
`&&a>0?(r=0,s++,l++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[s])&&a>0&&(r++,s++),n[a]={line:l,offset:r},s+=c.graphemeLines[a].length,r+=c.graphemeLines[a].length;return n},styleHas:function(c,l){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[l];r&&(l=r.line)}return i.Text.prototype.styleHas.call(this,c,l)},isEmptyStyles:function(c){if(!this.styles)return!0;var l=0,r=c+1,s,n,a=!1,f=this._styleMap[c],o=this._styleMap[c+1];f&&(c=f.line,l=f.offset),o&&(r=o.line,a=r===c,s=o.offset),n=typeof c>"u"?this.styles:{line:this.styles[c]};for(var d in n)for(var g in n[d])if(g>=l&&(!a||g<s))for(var v in n[d][g])return!1;return!0},_getStyleDeclaration:function(c,l){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[c];if(!r)return null;c=r.line,l=r.offset+l}return this.callSuper("_getStyleDeclaration",c,l)},_setStyleDeclaration:function(c,l,r){var s=this._styleMap[c];c=s.line,l=s.offset+l,this.styles[c][l]=r},_deleteStyleDeclaration:function(c,l){var r=this._styleMap[c];c=r.line,l=r.offset+l,delete this.styles[c][l]},_getLineStyle:function(c){var l=this._styleMap[c];return!!this.styles[l.line]},_setLineStyle:function(c){var l=this._styleMap[c];this.styles[l.line]={}},_wrapText:function(c,l){var r=[],s;for(this.isWrapping=!0,s=0;s<c.length;s++)r=r.concat(this._wrapLine(c[s],s,l));return this.isWrapping=!1,r},_measureWord:function(c,l,r){var s=0,n,a=!0;r=r||0;for(var f=0,o=c.length;f<o;f++){var d=this._getGraphemeBox(c[f],l,f+r,n,a);s+=d.kernedWidth,n=c[f]}return s},_wrapLine:function(c,l,r,X){var n=0,a=this.splitByGrapheme,f=[],o=[],d=a?i.util.string.graphemeSplit(c):c.split(this._wordJoiners),g="",v=0,_=a?"":" ",b=0,w=0,x=0,A=!0,M=this._getWidthOfCharSpacing(),X=X||0;d.length===0&&d.push([]),r-=X;for(var z=0;z<d.length;z++)g=a?d[z]:i.util.string.graphemeSplit(d[z]),b=this._measureWord(g,l,v),v+=g.length,n+=w+b-M,n>r&&!A?(f.push(o),o=[],n=b,A=!0):n+=M,!A&&!a&&o.push(_),o=o.concat(g),w=a?0:this._measureWord([_],l,v),v++,A=!1,b>x&&(x=b);return z&&f.push(o),x+X>this.dynamicMinWidth&&(this.dynamicMinWidth=x-M+X),f},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var l=i.Text.prototype._splitTextIntoLines.call(this,c),r=this._wrapText(l.lines,this.width),s=new Array(r.length),n=0;n<r.length;n++)s[n]=r[n].join("");return l.lines=s,l.graphemeLines=r,l},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var l in this._styleMap)this._textLines[l]&&(c[this._styleMap[l].line]=1);for(var l in this.styles)c[l]||delete this.styles[l]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),i.Textbox.fromObject=function(c,l){var r=i.util.stylesFromArray(c.styles,c.text),s=Object.assign({},c,{styles:r});return i.Object._fromObject("Textbox",s,l,"text")}}(t),function(){var u=e.controlsUtils,i=u.scaleSkewCursorStyleHandler,c=u.scaleCursorStyleHandler,l=u.scalingEqually,r=u.scalingYOrSkewingX,s=u.scalingXOrSkewingY,n=u.scaleOrSkewActionName,a=e.Object.prototype.controls;if(a.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:i,actionHandler:s,getActionName:n}),a.mr=new e.Control({x:.5,y:0,cursorStyleHandler:i,actionHandler:s,getActionName:n}),a.mb=new e.Control({x:0,y:.5,cursorStyleHandler:i,actionHandler:r,getActionName:n}),a.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:i,actionHandler:r,getActionName:n}),a.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:c,actionHandler:l}),a.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:c,actionHandler:l}),a.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:c,actionHandler:l}),a.br=new e.Control({x:.5,y:.5,cursorStyleHandler:c,actionHandler:l}),a.mtr=new e.Control({x:0,y:-.5,actionHandler:u.rotationWithSnapping,cursorStyleHandler:u.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var f=e.Textbox.prototype.controls={};f.mtr=a.mtr,f.tr=a.tr,f.br=a.br,f.tl=a.tl,f.bl=a.bl,f.mt=a.mt,f.mb=a.mb,f.mr=new e.Control({x:.5,y:0,actionHandler:u.changeWidth,cursorStyleHandler:i,actionName:"resizing"}),f.ml=new e.Control({x:-.5,y:0,actionHandler:u.changeWidth,cursorStyleHandler:i,actionName:"resizing"})}}()})(Yt);const ll="/colorful/assets/4-4b3f79f6.png";function cl(t,e,h){const p=new Yt.fabric.Canvas(t,{width:e,height:h}),m=be(null);function y(s,n={}){var a=new Yt.fabric.Textbox(s,n);return p.add(a),a}function C(s,n=150){const a=s.width,f=s.height;return a<=n&&f<=n?1:(a>f?"width":"height")==="width"?1/(a/n):1/(f/n)}function u(s,n={}){if(s instanceof HTMLImageElement){const a=new Yt.fabric.Image(s);a.left=n.left||0,a.top=n.top||0,a.scale(C(a)),p.add(a)}else Yt.fabric.Image.fromURL(s,function(a){a.scale(.2),a.left=n.left||0,a.top=n.top||0,p.add(a)})}function i(s,n=!0){return p.bringForward(s,n),p.getObjects().indexOf(s)}function c(s,n=!0){return p.sendBackwards(s,n),p.getObjects().indexOf(s)}function l(){const s=p.toDataURL({width:p.width,height:p.height,left:0,top:0,format:"png",multiplier:4}),n=document.createElement("a");n.download="image.png",n.href=s,n.click(),n.remove()}window.addEventListener("keydown",s=>{const n=s.key,a=p.getActiveObject();n==="Backspace"&&a&&!a.isEditing&&p.remove(a)});function r(){u(ll,{left:120,top:210}),y("哈囉 ~ 妳好嗎 😙",{top:130,left:100,fontFamily:"Nunito",fontSize:28,fill:"#333",width:250})}return{canvas:p,download:l,addImage:u,addText:y,objectLayerUp:i,objectLayerDown:c,setupExample:r,selectedObject:m}}const ul="/colorful/assets/1-f106370d.jpg",fl="/colorful/assets/2-574a4a6d.jpg",hl="/colorful/assets/3-9b0dd2af.jpg",dl="/colorful/assets/4-62a3dd6b.jpg",pl="/colorful/assets/5-122756a9.jpg",gl="/colorful/assets/6-9eaf57bb.jpg",ml="/colorful/assets/7-5a9d028c.jpg",Ts=[{title:"Marble 1",template:"template-1",image_url:ul},{title:"Marble 2",template:"template-1",image_url:fl},{title:"Marble 3",template:"template-1",image_url:hl},{title:"Marble 4",template:"template-1",image_url:dl},{title:"Marble 5",template:"template-1",image_url:pl},{title:"Marble 6",template:"template-1",image_url:gl},{title:"Marble 7",template:"template-1",image_url:ml}];function vl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 13.5L12 21m0 0l-7.5-7.5M12 21V3"})])}function yl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})])}function _l(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})])}function Cl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18"})])}function bl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})])}function wl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6"})])}function Sl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6"})])}function xl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})])}function Tl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[le("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})])}const St=(t,e)=>{const h=t.__vccOpts||t;for(const[p,m]of e)h[p]=m;return h},Ol=wt({name:"MainToolBar",components:{PhotoIcon:Tl,DocumentIcon:bl,PencilSquareIcon:xl},setup(t,{emit:e}){function h(p){e("tool-picked",p)}return{cards:Ts,pickToot:h}}}),El={id:"MainToolBar",style:{display:"flex"}},Pl=le("div",null,"卡片",-1),Ml=le("div",null,"貼圖",-1),Al=le("div",null,"文字",-1);function kl(t,e,h,p,m,y){const C=Oe("DocumentIcon"),u=Oe("PhotoIcon"),i=Oe("PencilSquareIcon");return ge(),me("div",El,[le("div",{class:"tool-panel__item",onClick:e[0]||(e[0]=c=>t.pickToot("card-book"))},[le("div",null,[_e(C,{class:"font-icon",style:{transform:"rotate(-90deg)"}})]),Pl]),le("div",{class:"tool-panel__item",onClick:e[1]||(e[1]=c=>t.pickToot("sticker-book"))},[le("div",null,[_e(u,{class:"font-icon"})]),Ml]),le("div",{class:"tool-panel__item",onClick:e[2]||(e[2]=c=>t.pickToot("text-form"))},[le("div",null,[_e(i,{class:"font-icon"})]),Al])])}const Dl=St(Ol,[["render",kl]]);const Il=wt({name:"CardBook",props:["cards"],setup(t,{emit:e}){const h=Ie(t.cards);function p(m){e("card-selected",{card:m})}return{onCardPicked:p,cards:h}}}),Fl={id:"CardBook",class:"card-book"},Ll=["onClick"],Bl=["src","alt"];function jl(t,e,h,p,m,y){return ge(),me("div",Fl,[(ge(!0),me(De,null,kt(t.cards,C=>(ge(),me("div",{class:Ei(["card-book__item-card",{active:C.selected}]),key:C.title,onClick:u=>t.onCardPicked(C)},[le("img",{src:C.image_url,alt:C.title},null,8,Bl)],10,Ll))),128))])}const Rl=St(Il,[["render",jl]]),zl=wt({name:"TextForm",setup(t,{emit:e}){const h=Ie({show:!1,fields:{text:"",fontFamily:"Nunito",fontSize:28,fill:"#333"}});function p(){editor.addText(h.fields.text,h.fields),h.show=!1,h.fields={text:"",fontFamily:"Nunito",fontSize:28,fill:"#333"}}return{textForm:h,addNewText:p}}}),Hl=le("button",{type:"submit"},"Submit",-1);function Wl(t,e,h,p,m,y){return ge(),me("form",{onSubmit:e[4]||(e[4]=el((...C)=>t.addNewText&&t.addNewText(...C),["prevent"]))},[vt(le("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=C=>t.textForm.fields.text=C)},null,512),[[oi,t.textForm.fields.text]]),vt(le("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=C=>t.textForm.fields.fontFamily=C)},null,512),[[oi,t.textForm.fields.fontFamily]]),vt(le("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=C=>t.textForm.fields.fontSize=C)},null,512),[[oi,t.textForm.fields.fontSize]]),vt(le("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=C=>t.textForm.fields.fill=C)},null,512),[[oi,t.textForm.fields.fill]]),Hl],32)}const Xl=St(zl,[["render",Wl]]);function Nl(t,e){return ge(),me("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[le("path",{"fill-rule":"evenodd",d:"M10.5 3.75a6 6 0 00-5.98 6.496A5.25 5.25 0 006.75 20.25H18a4.5 4.5 0 002.206-8.423 3.75 3.75 0 00-4.133-4.303A6.001 6.001 0 0010.5 3.75zm2.03 5.47a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.72-1.72v4.94a.75.75 0 001.5 0v-4.94l1.72 1.72a.75.75 0 101.06-1.06l-3-3z","clip-rule":"evenodd"})])}const Yl=wt({name:"StickerBook",components:{CloudArrowUpIcon:Nl},props:["stickers"],setup(t,{emit:e}){const h=Ie(t.stickers),p=Ie([]);function m(u){const i=u.target.files;i.length>0&&Object.values(i).map((c,l)=>{const r=new FileReader;r.onload=s=>{p.push({id:Math.random().toString(16).slice(2),file_path:s.target.result})},r.readAsDataURL(c)}),document.getElementById("FileUploadForm").reset()}function y(){document.getElementById("FileInput").click()}function C(u){e("sticker-picked",u)}return{stickers:h,ownStickers:p,clickFileInput:y,onImageSelect:m,pickSticker:C}}}),Gl={id:"FileUploadForm"},Vl={class:"sticker-list"},Ul=["onClick"],$l=["src"],ql={class:"sticker-list"},Kl=le("div",null,"上傳",-1),Jl=["onClick"],Ql=["src"];function Zl(t,e,h,p,m,y){const C=Oe("CloudArrowUpIcon");return ge(),me("div",null,[vt(le("form",Gl,[le("input",{type:"file",multiple:"",id:"FileInput",accept:"image/gif, image/jpeg, image/png",onChange:e[0]||(e[0]=(...u)=>t.onImageSelect&&t.onImageSelect(...u))},null,32)],512),[[pn,!1]]),le("div",Vl,[(ge(!0),me(De,null,kt(t.stickers,u=>(ge(),me("div",{class:"sticker-list__item",key:u.id,onClick:i=>t.pickSticker(u)},[le("img",{src:u.file_path},null,8,$l)],8,Ul))),128))]),le("div",ql,[le("div",{class:"my-upload",onClick:e[1]||(e[1]=(...u)=>t.clickFileInput&&t.clickFileInput(...u))},[le("div",null,[_e(C,{style:{height:"20px"}})]),Kl]),(ge(!0),me(De,null,kt(t.ownStickers,u=>(ge(),me("div",{class:"sticker-list__item",key:u.id,onClick:i=>t.pickSticker(u)},[le("img",{src:u.file_path},null,8,Ql)],8,Jl))),128))])])}const ec=St(Yl,[["render",Zl]]),tc="/colorful/assets/1-71c64d4d.png",ic="/colorful/assets/2-f8e5ae08.png",nc="/colorful/assets/3-574ec781.png",rc="/colorful/assets/4-4b3f79f6.png",sc="/colorful/assets/5-04e7d806.png",oc=[{id:1,file_path:tc},{id:2,file_path:ic},{id:3,file_path:nc},{id:4,file_path:rc},{id:5,file_path:sc}];const ac=wt({name:"CardEditor",components:{CardBook:Rl,TextForm:Xl,MainToolBar:Dl,StickerBook:ec,ArrowRightIcon:_l,ArrowLeftIcon:yl,ArrowDownIcon:vl,ArrowUpIcon:Cl,MagnifyingGlassMinusIcon:wl,MagnifyingGlassPlusIcon:Sl},setup(){let t,e,h,p=be("large");const m=be(!1),y=Ie(Ts),C=Ie(oc),u=be(!1),i=be(!1),c=be(null),l=be(null),r=be(null),s=Bi(()=>u.value&&i.value);function n(){const M=document.querySelector(".canvas-container");if(M.style.top=0,M.style.left=0,p.value==="large"){const X=window.innerWidth,z=X*(4/7);e.setDimensions({width:`${X}px`,height:`${z}px`},{cssOnly:!0}),h.style.width=`${X}px`,p.value="small"}else e.setDimensions({width:"700px",height:"400px"},{cssOnly:!0}),h.style.width="700px",p.value="large";e.renderAll()}Di(()=>{t=cl("CardEditorCanvas",700,400),e=t.canvas,f("card-book");function M(X){if(!(X.selected.length>1)){const z=X.selected[0];c.value=z,l.value=e.getObjects().indexOf(z)}}e.on("selection:created",X=>{M(X)}),e.on("selection:updated",X=>{M(X)}),e.on("selection:cleared",X=>{c.value=null,l.value=null}),document.fonts.ready.then(X=>{u.value=!0,g({card:y[0]}),t.setupExample(),i.value=!0,o("text-form"),a()})});function a(){let M=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${M}px`)}function f(M){if(M==="text-form"){const X=t.addText("新增文字",{fontSize:24,left:100,top:50,width:150,fill:"#333",fontFamily:"Nunito"});t.canvas.setActiveObject(X)}o(M)}function o(M){r.value=M}function d(){t.download()}function g(M){y.forEach($=>{$.selected=$.title===M.card.title});const X=M.card;let z=document.getElementById("CardImage");z||(z=document.createElement("img"),z.setAttribute("id","CardImage"),z.style.width="700px",z.style.height="auto",document.querySelector(".canvas-container").append(z)),h=z,z.src=X.image_url}const v=window.innerWidth;window.addEventListener("resize",M=>{M.preventDefault(),window.innerWidth});function _(M){const X=new Image;X.addEventListener("load",()=>{t.addImage(X)}),X.src=M.file_path}function b(){const M=e.getActiveObject();e.remove(M),c.value=null}const w=Ie({x:1,y:1});function x(M,X){const z=document.querySelector(".canvas-container"),$=["25%","0","-50%","-100%"],q=["25%","0","-25%"];if(M==="x"){const K=w.x+X;if(K<0||K>$.length)return;w.x=K,z.style.left=$[K]}else{const K=w.y+X;if(K<0||K>q.length)return;w.y=K,z.style.top=q[K]}}function A(M){M==="up"?t.objectLayerUp(c._rawValue):t.objectLayerDown(c._rawValue)}return{canvasSize:p,isDevMode:m,cards:y,stickers:C,initialed:s,download:d,targetObject:c,targetObjectIndex:l,targetDetailPanel:r,changeTargetObjectLayer:A,changeCanvasBackground:g,onToolPicked:f,onStickerPicked:_,toggleCanvasSize:n,deleteTargetObject:b,scrollCanvas:x}}}),lc={id:"CardEditorApp"},cc={id:"TopBar"},uc={key:0,class:"scroll-control-panel"},fc=le("div",{id:"CardEditorCanvasContainer"},[le("canvas",{id:"CardEditorCanvas"})],-1),hc={id:"DetailPanel",style:{overflow:"auto"}},dc={key:3},pc={class:"main-tool-bar-container"};function gc(t,e,h,p,m,y){const C=Oe("ArrowUpIcon"),u=Oe("ArrowDownIcon"),i=Oe("ArrowLeftIcon"),c=Oe("ArrowRightIcon"),l=Oe("MagnifyingGlassMinusIcon"),r=Oe("MagnifyingGlassPlusIcon"),s=Oe("CardBook"),n=Oe("StickerBook"),a=Oe("TextForm"),f=Oe("MainToolBar");return ge(),me("div",lc,[le("div",cc,[t.canvasSize==="large"?(ge(),me("div",uc,[le("div",{class:"item-icon",onClick:e[0]||(e[0]=o=>t.scrollCanvas("y",-1))},[_e(C)]),le("div",{class:"item-icon",onClick:e[1]||(e[1]=o=>t.scrollCanvas("y",1))},[_e(u)]),le("div",{class:"item-icon",onClick:e[2]||(e[2]=o=>t.scrollCanvas("x",-1))},[_e(i)]),le("div",{class:"item-icon",onClick:e[3]||(e[3]=o=>t.scrollCanvas("x",1))},[_e(c)])])):rt("",!0),t.canvasSize==="large"?(ge(),me("div",{key:1,onClick:e[4]||(e[4]=(...o)=>t.toggleCanvasSize&&t.toggleCanvasSize(...o))},[_e(l,{style:{height:"20px"}})])):rt("",!0),t.canvasSize==="small"?(ge(),me("div",{key:2,onClick:e[5]||(e[5]=(...o)=>t.toggleCanvasSize&&t.toggleCanvasSize(...o))},[_e(r,{style:{height:"20px"}})])):rt("",!0)]),fc,le("div",hc,[t.targetObject?(ge(),me("button",{key:0,onClick:e[6]||(e[6]=(...o)=>t.deleteTargetObject&&t.deleteTargetObject(...o))},"刪除物件")):rt("",!0),t.targetObject?(ge(),me("button",{key:1,onClick:e[7]||(e[7]=o=>t.changeTargetObjectLayer("up"))},"圖層向上")):rt("",!0),t.targetObject?(ge(),me("button",{key:2,onClick:e[8]||(e[8]=o=>t.changeTargetObjectLayer("down"))},"圖層向下")):rt("",!0),vt(le("div",null,[_e(s,{cards:t.cards,onCardSelected:t.changeCanvasBackground},null,8,["cards","onCardSelected"])],512),[[pn,t.targetDetailPanel==="card-book"]]),vt(le("div",null,[_e(n,{stickers:t.stickers,onStickerPicked:t.onStickerPicked},null,8,["stickers","onStickerPicked"])],512),[[pn,t.targetDetailPanel=="sticker-book"]]),t.targetDetailPanel==="text-form"?(ge(),me("div",dc,[_e(a)])):rt("",!0)]),le("div",pc,[_e(f,{onToolPicked:t.onToolPicked},null,8,["onToolPicked"])])])}const mc=St(ac,[["render",gc]]);function wr(t){return t!==null&&typeof t=="object"&&"constructor"in t&&t.constructor===Object}function Hn(t,e){t===void 0&&(t={}),e===void 0&&(e={}),Object.keys(e).forEach(h=>{typeof t[h]>"u"?t[h]=e[h]:wr(e[h])&&wr(t[h])&&Object.keys(e[h]).length>0&&Hn(t[h],e[h])})}const Os={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function xt(){const t=typeof document<"u"?document:{};return Hn(t,Os),t}const vc={document:Os,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(t){return typeof setTimeout>"u"?(t(),null):setTimeout(t,0)},cancelAnimationFrame(t){typeof setTimeout>"u"||clearTimeout(t)}};function Re(){const t=typeof window<"u"?window:{};return Hn(t,vc),t}function yc(t){const e=t;Object.keys(e).forEach(h=>{try{e[h]=null}catch{}try{delete e[h]}catch{}})}function gn(t,e){return e===void 0&&(e=0),setTimeout(t,e)}function bi(){return Date.now()}function _c(t){const e=Re();let h;return e.getComputedStyle&&(h=e.getComputedStyle(t,null)),!h&&t.currentStyle&&(h=t.currentStyle),h||(h=t.style),h}function Cc(t,e){e===void 0&&(e="x");const h=Re();let p,m,y;const C=_c(t);return h.WebKitCSSMatrix?(m=C.transform||C.webkitTransform,m.split(",").length>6&&(m=m.split(", ").map(u=>u.replace(",",".")).join(", ")),y=new h.WebKitCSSMatrix(m==="none"?"":m)):(y=C.MozTransform||C.OTransform||C.MsTransform||C.msTransform||C.transform||C.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),p=y.toString().split(",")),e==="x"&&(h.WebKitCSSMatrix?m=y.m41:p.length===16?m=parseFloat(p[12]):m=parseFloat(p[4])),e==="y"&&(h.WebKitCSSMatrix?m=y.m42:p.length===16?m=parseFloat(p[13]):m=parseFloat(p[5])),m||0}function ai(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function bc(t){return typeof window<"u"&&typeof window.HTMLElement<"u"?t instanceof HTMLElement:t&&(t.nodeType===1||t.nodeType===11)}function je(){const t=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let h=1;h<arguments.length;h+=1){const p=h<0||arguments.length<=h?void 0:arguments[h];if(p!=null&&!bc(p)){const m=Object.keys(Object(p)).filter(y=>e.indexOf(y)<0);for(let y=0,C=m.length;y<C;y+=1){const u=m[y],i=Object.getOwnPropertyDescriptor(p,u);i!==void 0&&i.enumerable&&(ai(t[u])&&ai(p[u])?p[u].__swiper__?t[u]=p[u]:je(t[u],p[u]):!ai(t[u])&&ai(p[u])?(t[u]={},p[u].__swiper__?t[u]=p[u]:je(t[u],p[u])):t[u]=p[u])}}}return t}function li(t,e,h){t.style.setProperty(e,h)}function Es(t){let{swiper:e,targetPosition:h,side:p}=t;const m=Re(),y=-e.translate;let C=null,u;const i=e.params.speed;e.wrapperEl.style.scrollSnapType="none",m.cancelAnimationFrame(e.cssModeFrameID);const c=h>y?"next":"prev",l=(s,n)=>c==="next"&&s>=n||c==="prev"&&s<=n,r=()=>{u=new Date().getTime(),C===null&&(C=u);const s=Math.max(Math.min((u-C)/i,1),0),n=.5-Math.cos(s*Math.PI)/2;let a=y+n*(h-y);if(l(a,h)&&(a=h),e.wrapperEl.scrollTo({[p]:a}),l(a,h)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[p]:a})}),m.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=m.requestAnimationFrame(r)};r()}function Wn(t){return t.querySelector(".swiper-slide-transform")||t.shadowRoot&&t.shadowRoot.querySelector(".swiper-slide-transform")||t}function Je(t,e){return e===void 0&&(e=""),[...t.children].filter(h=>h.matches(e))}function Xn(t,e){e===void 0&&(e=[]);const h=document.createElement(t);return h.classList.add(...Array.isArray(e)?e:[e]),h}function wc(t,e){const h=[];for(;t.previousElementSibling;){const p=t.previousElementSibling;e?p.matches(e)&&h.push(p):h.push(p),t=p}return h}function Sc(t,e){const h=[];for(;t.nextElementSibling;){const p=t.nextElementSibling;e?p.matches(e)&&h.push(p):h.push(p),t=p}return h}function ot(t,e){return Re().getComputedStyle(t,null).getPropertyValue(e)}function wi(t){let e=t,h;if(e){for(h=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(h+=1);return h}}function Ps(t,e){const h=[];let p=t.parentElement;for(;p;)e?p.matches(e)&&h.push(p):h.push(p),p=p.parentElement;return h}function mn(t,e,h){const p=Re();return h?t[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(p.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(p.getComputedStyle(t,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):t.offsetWidth}let Gi;function xc(){const t=Re(),e=xt();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch)}}function Ms(){return Gi||(Gi=xc()),Gi}let Vi;function Tc(t){let{userAgent:e}=t===void 0?{}:t;const h=Ms(),p=Re(),m=p.navigator.platform,y=e||p.navigator.userAgent,C={ios:!1,android:!1},u=p.screen.width,i=p.screen.height,c=y.match(/(Android);?[\s\/]+([\d.]+)?/);let l=y.match(/(iPad).*OS\s([\d_]+)/);const r=y.match(/(iPod)(.*OS\s([\d_]+))?/),s=!l&&y.match(/(iPhone\sOS|iOS)\s([\d_]+)/),n=m==="Win32";let a=m==="MacIntel";const f=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!l&&a&&h.touch&&f.indexOf(`${u}x${i}`)>=0&&(l=y.match(/(Version)\/([\d.]+)/),l||(l=[0,1,"13_0_0"]),a=!1),c&&!n&&(C.os="android",C.android=!0),(l||s||r)&&(C.os="ios",C.ios=!0),C}function Oc(t){return t===void 0&&(t={}),Vi||(Vi=Tc(t)),Vi}let Ui;function Ec(){const t=Re();let e=!1;function h(){const p=t.navigator.userAgent.toLowerCase();return p.indexOf("safari")>=0&&p.indexOf("chrome")<0&&p.indexOf("android")<0}if(h()){const p=String(t.navigator.userAgent);if(p.includes("Version/")){const[m,y]=p.split("Version/")[1].split(" ")[0].split(".").map(C=>Number(C));e=m<16||m===16&&y<2}}return{isSafari:e||h(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}function Pc(){return Ui||(Ui=Ec()),Ui}function Mc(t){let{swiper:e,on:h,emit:p}=t;const m=Re();let y=null,C=null;const u=()=>{!e||e.destroyed||!e.initialized||(p("beforeResize"),p("resize"))},i=()=>{!e||e.destroyed||!e.initialized||(y=new ResizeObserver(r=>{C=m.requestAnimationFrame(()=>{const{width:s,height:n}=e;let a=s,f=n;r.forEach(o=>{let{contentBoxSize:d,contentRect:g,target:v}=o;v&&v!==e.el||(a=g?g.width:(d[0]||d).inlineSize,f=g?g.height:(d[0]||d).blockSize)}),(a!==s||f!==n)&&u()})}),y.observe(e.el))},c=()=>{C&&m.cancelAnimationFrame(C),y&&y.unobserve&&e.el&&(y.unobserve(e.el),y=null)},l=()=>{!e||e.destroyed||!e.initialized||p("orientationchange")};h("init",()=>{if(e.params.resizeObserver&&typeof m.ResizeObserver<"u"){i();return}m.addEventListener("resize",u),m.addEventListener("orientationchange",l)}),h("destroy",()=>{c(),m.removeEventListener("resize",u),m.removeEventListener("orientationchange",l)})}function Ac(t){let{swiper:e,extendParams:h,on:p,emit:m}=t;const y=[],C=Re(),u=function(l,r){r===void 0&&(r={});const s=C.MutationObserver||C.WebkitMutationObserver,n=new s(a=>{if(e.__preventObserver__)return;if(a.length===1){m("observerUpdate",a[0]);return}const f=function(){m("observerUpdate",a[0])};C.requestAnimationFrame?C.requestAnimationFrame(f):C.setTimeout(f,0)});n.observe(l,{attributes:typeof r.attributes>"u"?!0:r.attributes,childList:typeof r.childList>"u"?!0:r.childList,characterData:typeof r.characterData>"u"?!0:r.characterData}),y.push(n)},i=()=>{if(e.params.observer){if(e.params.observeParents){const l=Ps(e.el);for(let r=0;r<l.length;r+=1)u(l[r])}u(e.el,{childList:e.params.observeSlideChildren}),u(e.wrapperEl,{attributes:!1})}},c=()=>{y.forEach(l=>{l.disconnect()}),y.splice(0,y.length)};h({observer:!1,observeParents:!1,observeSlideChildren:!1}),p("init",i),p("destroy",c)}var kc={on(t,e,h){const p=this;if(!p.eventsListeners||p.destroyed||typeof e!="function")return p;const m=h?"unshift":"push";return t.split(" ").forEach(y=>{p.eventsListeners[y]||(p.eventsListeners[y]=[]),p.eventsListeners[y][m](e)}),p},once(t,e,h){const p=this;if(!p.eventsListeners||p.destroyed||typeof e!="function")return p;function m(){p.off(t,m),m.__emitterProxy&&delete m.__emitterProxy;for(var y=arguments.length,C=new Array(y),u=0;u<y;u++)C[u]=arguments[u];e.apply(p,C)}return m.__emitterProxy=e,p.on(t,m,h)},onAny(t,e){const h=this;if(!h.eventsListeners||h.destroyed||typeof t!="function")return h;const p=e?"unshift":"push";return h.eventsAnyListeners.indexOf(t)<0&&h.eventsAnyListeners[p](t),h},offAny(t){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const h=e.eventsAnyListeners.indexOf(t);return h>=0&&e.eventsAnyListeners.splice(h,1),e},off(t,e){const h=this;return!h.eventsListeners||h.destroyed||!h.eventsListeners||t.split(" ").forEach(p=>{typeof e>"u"?h.eventsListeners[p]=[]:h.eventsListeners[p]&&h.eventsListeners[p].forEach((m,y)=>{(m===e||m.__emitterProxy&&m.__emitterProxy===e)&&h.eventsListeners[p].splice(y,1)})}),h},emit(){const t=this;if(!t.eventsListeners||t.destroyed||!t.eventsListeners)return t;let e,h,p;for(var m=arguments.length,y=new Array(m),C=0;C<m;C++)y[C]=arguments[C];return typeof y[0]=="string"||Array.isArray(y[0])?(e=y[0],h=y.slice(1,y.length),p=t):(e=y[0].events,h=y[0].data,p=y[0].context||t),h.unshift(p),(Array.isArray(e)?e:e.split(" ")).forEach(i=>{t.eventsAnyListeners&&t.eventsAnyListeners.length&&t.eventsAnyListeners.forEach(c=>{c.apply(p,[i,...h])}),t.eventsListeners&&t.eventsListeners[i]&&t.eventsListeners[i].forEach(c=>{c.apply(p,h)})}),t}};function Dc(){const t=this;let e,h;const p=t.el;typeof t.params.width<"u"&&t.params.width!==null?e=t.params.width:e=p.clientWidth,typeof t.params.height<"u"&&t.params.height!==null?h=t.params.height:h=p.clientHeight,!(e===0&&t.isHorizontal()||h===0&&t.isVertical())&&(e=e-parseInt(ot(p,"padding-left")||0,10)-parseInt(ot(p,"padding-right")||0,10),h=h-parseInt(ot(p,"padding-top")||0,10)-parseInt(ot(p,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(h)&&(h=0),Object.assign(t,{width:e,height:h,size:t.isHorizontal()?e:h}))}function Ic(){const t=this;function e(z){return t.isHorizontal()?z:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[z]}function h(z,$){return parseFloat(z.getPropertyValue(e($))||0)}const p=t.params,{wrapperEl:m,slidesEl:y,size:C,rtlTranslate:u,wrongRTL:i}=t,c=t.virtual&&p.virtual.enabled,l=c?t.virtual.slides.length:t.slides.length,r=Je(y,`.${t.params.slideClass}, swiper-slide`),s=c?t.virtual.slides.length:r.length;let n=[];const a=[],f=[];let o=p.slidesOffsetBefore;typeof o=="function"&&(o=p.slidesOffsetBefore.call(t));let d=p.slidesOffsetAfter;typeof d=="function"&&(d=p.slidesOffsetAfter.call(t));const g=t.snapGrid.length,v=t.slidesGrid.length;let _=p.spaceBetween,b=-o,w=0,x=0;if(typeof C>"u")return;typeof _=="string"&&_.indexOf("%")>=0?_=parseFloat(_.replace("%",""))/100*C:typeof _=="string"&&(_=parseFloat(_)),t.virtualSize=-_,r.forEach(z=>{u?z.style.marginLeft="":z.style.marginRight="",z.style.marginBottom="",z.style.marginTop=""}),p.centeredSlides&&p.cssMode&&(li(m,"--swiper-centered-offset-before",""),li(m,"--swiper-centered-offset-after",""));const A=p.grid&&p.grid.rows>1&&t.grid;A&&t.grid.initSlides(s);let M;const X=p.slidesPerView==="auto"&&p.breakpoints&&Object.keys(p.breakpoints).filter(z=>typeof p.breakpoints[z].slidesPerView<"u").length>0;for(let z=0;z<s;z+=1){M=0;let $;if(r[z]&&($=r[z]),A&&t.grid.updateSlide(z,$,s,e),!(r[z]&&ot($,"display")==="none")){if(p.slidesPerView==="auto"){X&&(r[z].style[e("width")]="");const q=getComputedStyle($),K=$.style.transform,te=$.style.webkitTransform;if(K&&($.style.transform="none"),te&&($.style.webkitTransform="none"),p.roundLengths)M=t.isHorizontal()?mn($,"width",!0):mn($,"height",!0);else{const re=h(q,"width"),oe=h(q,"padding-left"),se=h(q,"padding-right"),S=h(q,"margin-left"),F=h(q,"margin-right"),I=q.getPropertyValue("box-sizing");if(I&&I==="border-box")M=re+S+F;else{const{clientWidth:D,offsetWidth:U}=$;M=re+oe+se+S+F+(U-D)}}K&&($.style.transform=K),te&&($.style.webkitTransform=te),p.roundLengths&&(M=Math.floor(M))}else M=(C-(p.slidesPerView-1)*_)/p.slidesPerView,p.roundLengths&&(M=Math.floor(M)),r[z]&&(r[z].style[e("width")]=`${M}px`);r[z]&&(r[z].swiperSlideSize=M),f.push(M),p.centeredSlides?(b=b+M/2+w/2+_,w===0&&z!==0&&(b=b-C/2-_),z===0&&(b=b-C/2-_),Math.abs(b)<1/1e3&&(b=0),p.roundLengths&&(b=Math.floor(b)),x%p.slidesPerGroup===0&&n.push(b),a.push(b)):(p.roundLengths&&(b=Math.floor(b)),(x-Math.min(t.params.slidesPerGroupSkip,x))%t.params.slidesPerGroup===0&&n.push(b),a.push(b),b=b+M+_),t.virtualSize+=M+_,w=M,x+=1}}if(t.virtualSize=Math.max(t.virtualSize,C)+d,u&&i&&(p.effect==="slide"||p.effect==="coverflow")&&(m.style.width=`${t.virtualSize+_}px`),p.setWrapperSize&&(m.style[e("width")]=`${t.virtualSize+_}px`),A&&t.grid.updateWrapperSize(M,n,e),!p.centeredSlides){const z=[];for(let $=0;$<n.length;$+=1){let q=n[$];p.roundLengths&&(q=Math.floor(q)),n[$]<=t.virtualSize-C&&z.push(q)}n=z,Math.floor(t.virtualSize-C)-Math.floor(n[n.length-1])>1&&n.push(t.virtualSize-C)}if(c&&p.loop){const z=f[0]+_;if(p.slidesPerGroup>1){const $=Math.ceil((t.virtual.slidesBefore+t.virtual.slidesAfter)/p.slidesPerGroup),q=z*p.slidesPerGroup;for(let K=0;K<$;K+=1)n.push(n[n.length-1]+q)}for(let $=0;$<t.virtual.slidesBefore+t.virtual.slidesAfter;$+=1)p.slidesPerGroup===1&&n.push(n[n.length-1]+z),a.push(a[a.length-1]+z),t.virtualSize+=z}if(n.length===0&&(n=[0]),_!==0){const z=t.isHorizontal()&&u?"marginLeft":e("marginRight");r.filter(($,q)=>!p.cssMode||p.loop?!0:q!==r.length-1).forEach($=>{$.style[z]=`${_}px`})}if(p.centeredSlides&&p.centeredSlidesBounds){let z=0;f.forEach(q=>{z+=q+(_||0)}),z-=_;const $=z-C;n=n.map(q=>q<=0?-o:q>$?$+d:q)}if(p.centerInsufficientSlides){let z=0;if(f.forEach($=>{z+=$+(_||0)}),z-=_,z<C){const $=(C-z)/2;n.forEach((q,K)=>{n[K]=q-$}),a.forEach((q,K)=>{a[K]=q+$})}}if(Object.assign(t,{slides:r,snapGrid:n,slidesGrid:a,slidesSizesGrid:f}),p.centeredSlides&&p.cssMode&&!p.centeredSlidesBounds){li(m,"--swiper-centered-offset-before",`${-n[0]}px`),li(m,"--swiper-centered-offset-after",`${t.size/2-f[f.length-1]/2}px`);const z=-t.snapGrid[0],$=-t.slidesGrid[0];t.snapGrid=t.snapGrid.map(q=>q+z),t.slidesGrid=t.slidesGrid.map(q=>q+$)}if(s!==l&&t.emit("slidesLengthChange"),n.length!==g&&(t.params.watchOverflow&&t.checkOverflow(),t.emit("snapGridLengthChange")),a.length!==v&&t.emit("slidesGridLengthChange"),p.watchSlidesProgress&&t.updateSlidesOffset(),!c&&!p.cssMode&&(p.effect==="slide"||p.effect==="fade")){const z=`${p.containerModifierClass}backface-hidden`,$=t.el.classList.contains(z);s<=p.maxBackfaceHiddenSlides?$||t.el.classList.add(z):$&&t.el.classList.remove(z)}}function Fc(t){const e=this,h=[],p=e.virtual&&e.params.virtual.enabled;let m=0,y;typeof t=="number"?e.setTransition(t):t===!0&&e.setTransition(e.params.speed);const C=u=>p?e.slides[e.getSlideIndexByData(u)]:e.slides[u];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(u=>{h.push(u)});else for(y=0;y<Math.ceil(e.params.slidesPerView);y+=1){const u=e.activeIndex+y;if(u>e.slides.length&&!p)break;h.push(C(u))}else h.push(C(e.activeIndex));for(y=0;y<h.length;y+=1)if(typeof h[y]<"u"){const u=h[y].offsetHeight;m=u>m?u:m}(m||m===0)&&(e.wrapperEl.style.height=`${m}px`)}function Lc(){const t=this,e=t.slides,h=t.isElement?t.isHorizontal()?t.wrapperEl.offsetLeft:t.wrapperEl.offsetTop:0;for(let p=0;p<e.length;p+=1)e[p].swiperSlideOffset=(t.isHorizontal()?e[p].offsetLeft:e[p].offsetTop)-h-t.cssOverflowAdjustment()}function Bc(t){t===void 0&&(t=this&&this.translate||0);const e=this,h=e.params,{slides:p,rtlTranslate:m,snapGrid:y}=e;if(p.length===0)return;typeof p[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let C=-t;m&&(C=t),p.forEach(i=>{i.classList.remove(h.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let u=h.spaceBetween;typeof u=="string"&&u.indexOf("%")>=0?u=parseFloat(u.replace("%",""))/100*e.size:typeof u=="string"&&(u=parseFloat(u));for(let i=0;i<p.length;i+=1){const c=p[i];let l=c.swiperSlideOffset;h.cssMode&&h.centeredSlides&&(l-=p[0].swiperSlideOffset);const r=(C+(h.centeredSlides?e.minTranslate():0)-l)/(c.swiperSlideSize+u),s=(C-y[0]+(h.centeredSlides?e.minTranslate():0)-l)/(c.swiperSlideSize+u),n=-(C-l),a=n+e.slidesSizesGrid[i];(n>=0&&n<e.size-1||a>1&&a<=e.size||n<=0&&a>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(i),p[i].classList.add(h.slideVisibleClass)),c.progress=m?-r:r,c.originalProgress=m?-s:s}}function jc(t){const e=this;if(typeof t>"u"){const l=e.rtlTranslate?-1:1;t=e&&e.translate&&e.translate*l||0}const h=e.params,p=e.maxTranslate()-e.minTranslate();let{progress:m,isBeginning:y,isEnd:C,progressLoop:u}=e;const i=y,c=C;if(p===0)m=0,y=!0,C=!0;else{m=(t-e.minTranslate())/p;const l=Math.abs(t-e.minTranslate())<1,r=Math.abs(t-e.maxTranslate())<1;y=l||m<=0,C=r||m>=1,l&&(m=0),r&&(m=1)}if(h.loop){const l=e.getSlideIndexByData(0),r=e.getSlideIndexByData(e.slides.length-1),s=e.slidesGrid[l],n=e.slidesGrid[r],a=e.slidesGrid[e.slidesGrid.length-1],f=Math.abs(t);f>=s?u=(f-s)/a:u=(f+a-n)/a,u>1&&(u-=1)}Object.assign(e,{progress:m,progressLoop:u,isBeginning:y,isEnd:C}),(h.watchSlidesProgress||h.centeredSlides&&h.autoHeight)&&e.updateSlidesProgress(t),y&&!i&&e.emit("reachBeginning toEdge"),C&&!c&&e.emit("reachEnd toEdge"),(i&&!y||c&&!C)&&e.emit("fromEdge"),e.emit("progress",m)}function Rc(){const t=this,{slides:e,params:h,slidesEl:p,activeIndex:m}=t,y=t.virtual&&h.virtual.enabled,C=i=>Je(p,`.${h.slideClass}${i}, swiper-slide${i}`)[0];e.forEach(i=>{i.classList.remove(h.slideActiveClass,h.slideNextClass,h.slidePrevClass)});let u;if(y)if(h.loop){let i=m-t.virtual.slidesBefore;i<0&&(i=t.virtual.slides.length+i),i>=t.virtual.slides.length&&(i-=t.virtual.slides.length),u=C(`[data-swiper-slide-index="${i}"]`)}else u=C(`[data-swiper-slide-index="${m}"]`);else u=e[m];if(u){u.classList.add(h.slideActiveClass);let i=Sc(u,`.${h.slideClass}, swiper-slide`)[0];h.loop&&!i&&(i=e[0]),i&&i.classList.add(h.slideNextClass);let c=wc(u,`.${h.slideClass}, swiper-slide`)[0];h.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(h.slidePrevClass)}t.emitSlidesClasses()}const gi=(t,e)=>{if(!t||t.destroyed||!t.params)return;const h=()=>t.isElement?"swiper-slide":`.${t.params.slideClass}`,p=e.closest(h());if(p){const m=p.querySelector(`.${t.params.lazyPreloaderClass}`);m&&m.remove()}},$i=(t,e)=>{if(!t.slides[e])return;const h=t.slides[e].querySelector('[loading="lazy"]');h&&h.removeAttribute("loading")},vn=t=>{if(!t||t.destroyed||!t.params)return;let e=t.params.lazyPreloadPrevNext;const h=t.slides.length;if(!h||!e||e<0)return;e=Math.min(e,h);const p=t.params.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(t.params.slidesPerView),m=t.activeIndex;if(t.params.grid&&t.params.grid.rows>1){const C=m,u=[C-e];u.push(...Array.from({length:e}).map((i,c)=>C+p+c)),t.slides.forEach((i,c)=>{u.includes(i.column)&&$i(t,c)});return}const y=m+p-1;if(t.params.rewind||t.params.loop)for(let C=m-e;C<=y+e;C+=1){const u=(C%h+h)%h;(u<m||u>y)&&$i(t,u)}else for(let C=Math.max(m-e,0);C<=Math.min(y+e,h-1);C+=1)C!==m&&(C>y||C<m)&&$i(t,C)};function zc(t){const{slidesGrid:e,params:h}=t,p=t.rtlTranslate?t.translate:-t.translate;let m;for(let y=0;y<e.length;y+=1)typeof e[y+1]<"u"?p>=e[y]&&p<e[y+1]-(e[y+1]-e[y])/2?m=y:p>=e[y]&&p<e[y+1]&&(m=y+1):p>=e[y]&&(m=y);return h.normalizeSlideIndex&&(m<0||typeof m>"u")&&(m=0),m}function Hc(t){const e=this,h=e.rtlTranslate?e.translate:-e.translate,{snapGrid:p,params:m,activeIndex:y,realIndex:C,snapIndex:u}=e;let i=t,c;const l=s=>{let n=s-e.virtual.slidesBefore;return n<0&&(n=e.virtual.slides.length+n),n>=e.virtual.slides.length&&(n-=e.virtual.slides.length),n};if(typeof i>"u"&&(i=zc(e)),p.indexOf(h)>=0)c=p.indexOf(h);else{const s=Math.min(m.slidesPerGroupSkip,i);c=s+Math.floor((i-s)/m.slidesPerGroup)}if(c>=p.length&&(c=p.length-1),i===y){c!==u&&(e.snapIndex=c,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=l(i));return}let r;e.virtual&&m.virtual.enabled&&m.loop?r=l(i):e.slides[i]?r=parseInt(e.slides[i].getAttribute("data-swiper-slide-index")||i,10):r=i,Object.assign(e,{previousSnapIndex:u,snapIndex:c,previousRealIndex:C,realIndex:r,previousIndex:y,activeIndex:i}),e.initialized&&vn(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),C!==r&&e.emit("realIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&e.emit("slideChange")}function Wc(t){const e=this,h=e.params,p=t.closest(`.${h.slideClass}, swiper-slide`);let m=!1,y;if(p){for(let C=0;C<e.slides.length;C+=1)if(e.slides[C]===p){m=!0,y=C;break}}if(p&&m)e.clickedSlide=p,e.virtual&&e.params.virtual.enabled?e.clickedIndex=parseInt(p.getAttribute("data-swiper-slide-index"),10):e.clickedIndex=y;else{e.clickedSlide=void 0,e.clickedIndex=void 0;return}h.slideToClickedSlide&&e.clickedIndex!==void 0&&e.clickedIndex!==e.activeIndex&&e.slideToClickedSlide()}var Xc={updateSize:Dc,updateSlides:Ic,updateAutoHeight:Fc,updateSlidesOffset:Lc,updateSlidesProgress:Bc,updateProgress:jc,updateSlidesClasses:Rc,updateActiveIndex:Hc,updateClickedSlide:Wc};function Nc(t){t===void 0&&(t=this.isHorizontal()?"x":"y");const e=this,{params:h,rtlTranslate:p,translate:m,wrapperEl:y}=e;if(h.virtualTranslate)return p?-m:m;if(h.cssMode)return m;let C=Cc(y,t);return C+=e.cssOverflowAdjustment(),p&&(C=-C),C||0}function Yc(t,e){const h=this,{rtlTranslate:p,params:m,wrapperEl:y,progress:C}=h;let u=0,i=0;const c=0;h.isHorizontal()?u=p?-t:t:i=t,m.roundLengths&&(u=Math.floor(u),i=Math.floor(i)),h.previousTranslate=h.translate,h.translate=h.isHorizontal()?u:i,m.cssMode?y[h.isHorizontal()?"scrollLeft":"scrollTop"]=h.isHorizontal()?-u:-i:m.virtualTranslate||(h.isHorizontal()?u-=h.cssOverflowAdjustment():i-=h.cssOverflowAdjustment(),y.style.transform=`translate3d(${u}px, ${i}px, ${c}px)`);let l;const r=h.maxTranslate()-h.minTranslate();r===0?l=0:l=(t-h.minTranslate())/r,l!==C&&h.updateProgress(t),h.emit("setTranslate",h.translate,e)}function Gc(){return-this.snapGrid[0]}function Vc(){return-this.snapGrid[this.snapGrid.length-1]}function Uc(t,e,h,p,m){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),h===void 0&&(h=!0),p===void 0&&(p=!0);const y=this,{params:C,wrapperEl:u}=y;if(y.animating&&C.preventInteractionOnTransition)return!1;const i=y.minTranslate(),c=y.maxTranslate();let l;if(p&&t>i?l=i:p&&t<c?l=c:l=t,y.updateProgress(l),C.cssMode){const r=y.isHorizontal();if(e===0)u[r?"scrollLeft":"scrollTop"]=-l;else{if(!y.support.smoothScroll)return Es({swiper:y,targetPosition:-l,side:r?"left":"top"}),!0;u.scrollTo({[r?"left":"top"]:-l,behavior:"smooth"})}return!0}return e===0?(y.setTransition(0),y.setTranslate(l),h&&(y.emit("beforeTransitionStart",e,m),y.emit("transitionEnd"))):(y.setTransition(e),y.setTranslate(l),h&&(y.emit("beforeTransitionStart",e,m),y.emit("transitionStart")),y.animating||(y.animating=!0,y.onTranslateToWrapperTransitionEnd||(y.onTranslateToWrapperTransitionEnd=function(s){!y||y.destroyed||s.target===this&&(y.wrapperEl.removeEventListener("transitionend",y.onTranslateToWrapperTransitionEnd),y.onTranslateToWrapperTransitionEnd=null,delete y.onTranslateToWrapperTransitionEnd,h&&y.emit("transitionEnd"))}),y.wrapperEl.addEventListener("transitionend",y.onTranslateToWrapperTransitionEnd))),!0}var $c={getTranslate:Nc,setTranslate:Yc,minTranslate:Gc,maxTranslate:Vc,translateTo:Uc};function qc(t,e){const h=this;h.params.cssMode||(h.wrapperEl.style.transitionDuration=`${t}ms`),h.emit("setTransition",t,e)}function As(t){let{swiper:e,runCallbacks:h,direction:p,step:m}=t;const{activeIndex:y,previousIndex:C}=e;let u=p;if(u||(y>C?u="next":y<C?u="prev":u="reset"),e.emit(`transition${m}`),h&&y!==C){if(u==="reset"){e.emit(`slideResetTransition${m}`);return}e.emit(`slideChangeTransition${m}`),u==="next"?e.emit(`slideNextTransition${m}`):e.emit(`slidePrevTransition${m}`)}}function Kc(t,e){t===void 0&&(t=!0);const h=this,{params:p}=h;p.cssMode||(p.autoHeight&&h.updateAutoHeight(),As({swiper:h,runCallbacks:t,direction:e,step:"Start"}))}function Jc(t,e){t===void 0&&(t=!0);const h=this,{params:p}=h;h.animating=!1,!p.cssMode&&(h.setTransition(0),As({swiper:h,runCallbacks:t,direction:e,step:"End"}))}var Qc={setTransition:qc,transitionStart:Kc,transitionEnd:Jc};function Zc(t,e,h,p,m){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),h===void 0&&(h=!0),typeof t=="string"&&(t=parseInt(t,10));const y=this;let C=t;C<0&&(C=0);const{params:u,snapGrid:i,slidesGrid:c,previousIndex:l,activeIndex:r,rtlTranslate:s,wrapperEl:n,enabled:a}=y;if(y.animating&&u.preventInteractionOnTransition||!a&&!p&&!m)return!1;const f=Math.min(y.params.slidesPerGroupSkip,C);let o=f+Math.floor((C-f)/y.params.slidesPerGroup);o>=i.length&&(o=i.length-1);const d=-i[o];if(u.normalizeSlideIndex)for(let v=0;v<c.length;v+=1){const _=-Math.floor(d*100),b=Math.floor(c[v]*100),w=Math.floor(c[v+1]*100);typeof c[v+1]<"u"?_>=b&&_<w-(w-b)/2?C=v:_>=b&&_<w&&(C=v+1):_>=b&&(C=v)}if(y.initialized&&C!==r&&(!y.allowSlideNext&&(s?d>y.translate&&d>y.minTranslate():d<y.translate&&d<y.minTranslate())||!y.allowSlidePrev&&d>y.translate&&d>y.maxTranslate()&&(r||0)!==C))return!1;C!==(l||0)&&h&&y.emit("beforeSlideChangeStart"),y.updateProgress(d);let g;if(C>r?g="next":C<r?g="prev":g="reset",s&&-d===y.translate||!s&&d===y.translate)return y.updateActiveIndex(C),u.autoHeight&&y.updateAutoHeight(),y.updateSlidesClasses(),u.effect!=="slide"&&y.setTranslate(d),g!=="reset"&&(y.transitionStart(h,g),y.transitionEnd(h,g)),!1;if(u.cssMode){const v=y.isHorizontal(),_=s?d:-d;if(e===0){const b=y.virtual&&y.params.virtual.enabled;b&&(y.wrapperEl.style.scrollSnapType="none",y._immediateVirtual=!0),b&&!y._cssModeVirtualInitialSet&&y.params.initialSlide>0?(y._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{n[v?"scrollLeft":"scrollTop"]=_})):n[v?"scrollLeft":"scrollTop"]=_,b&&requestAnimationFrame(()=>{y.wrapperEl.style.scrollSnapType="",y._immediateVirtual=!1})}else{if(!y.support.smoothScroll)return Es({swiper:y,targetPosition:_,side:v?"left":"top"}),!0;n.scrollTo({[v?"left":"top"]:_,behavior:"smooth"})}return!0}return y.setTransition(e),y.setTranslate(d),y.updateActiveIndex(C),y.updateSlidesClasses(),y.emit("beforeTransitionStart",e,p),y.transitionStart(h,g),e===0?y.transitionEnd(h,g):y.animating||(y.animating=!0,y.onSlideToWrapperTransitionEnd||(y.onSlideToWrapperTransitionEnd=function(_){!y||y.destroyed||_.target===this&&(y.wrapperEl.removeEventListener("transitionend",y.onSlideToWrapperTransitionEnd),y.onSlideToWrapperTransitionEnd=null,delete y.onSlideToWrapperTransitionEnd,y.transitionEnd(h,g))}),y.wrapperEl.addEventListener("transitionend",y.onSlideToWrapperTransitionEnd)),!0}function eu(t,e,h,p){t===void 0&&(t=0),e===void 0&&(e=this.params.speed),h===void 0&&(h=!0),typeof t=="string"&&(t=parseInt(t,10));const m=this;let y=t;return m.params.loop&&(m.virtual&&m.params.virtual.enabled?y=y+m.virtual.slidesBefore:y=m.getSlideIndexByData(y)),m.slideTo(y,e,h,p)}function tu(t,e,h){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);const p=this,{enabled:m,params:y,animating:C}=p;if(!m)return p;let u=y.slidesPerGroup;y.slidesPerView==="auto"&&y.slidesPerGroup===1&&y.slidesPerGroupAuto&&(u=Math.max(p.slidesPerViewDynamic("current",!0),1));const i=p.activeIndex<y.slidesPerGroupSkip?1:u,c=p.virtual&&y.virtual.enabled;if(y.loop){if(C&&!c&&y.loopPreventsSliding)return!1;p.loopFix({direction:"next"}),p._clientLeft=p.wrapperEl.clientLeft}return y.rewind&&p.isEnd?p.slideTo(0,t,e,h):p.slideTo(p.activeIndex+i,t,e,h)}function iu(t,e,h){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);const p=this,{params:m,snapGrid:y,slidesGrid:C,rtlTranslate:u,enabled:i,animating:c}=p;if(!i)return p;const l=p.virtual&&m.virtual.enabled;if(m.loop){if(c&&!l&&m.loopPreventsSliding)return!1;p.loopFix({direction:"prev"}),p._clientLeft=p.wrapperEl.clientLeft}const r=u?p.translate:-p.translate;function s(d){return d<0?-Math.floor(Math.abs(d)):Math.floor(d)}const n=s(r),a=y.map(d=>s(d));let f=y[a.indexOf(n)-1];if(typeof f>"u"&&m.cssMode){let d;y.forEach((g,v)=>{n>=g&&(d=v)}),typeof d<"u"&&(f=y[d>0?d-1:d])}let o=0;if(typeof f<"u"&&(o=C.indexOf(f),o<0&&(o=p.activeIndex-1),m.slidesPerView==="auto"&&m.slidesPerGroup===1&&m.slidesPerGroupAuto&&(o=o-p.slidesPerViewDynamic("previous",!0)+1,o=Math.max(o,0))),m.rewind&&p.isBeginning){const d=p.params.virtual&&p.params.virtual.enabled&&p.virtual?p.virtual.slides.length-1:p.slides.length-1;return p.slideTo(d,t,e,h)}return p.slideTo(o,t,e,h)}function nu(t,e,h){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0);const p=this;return p.slideTo(p.activeIndex,t,e,h)}function ru(t,e,h,p){t===void 0&&(t=this.params.speed),e===void 0&&(e=!0),p===void 0&&(p=.5);const m=this;let y=m.activeIndex;const C=Math.min(m.params.slidesPerGroupSkip,y),u=C+Math.floor((y-C)/m.params.slidesPerGroup),i=m.rtlTranslate?m.translate:-m.translate;if(i>=m.snapGrid[u]){const c=m.snapGrid[u],l=m.snapGrid[u+1];i-c>(l-c)*p&&(y+=m.params.slidesPerGroup)}else{const c=m.snapGrid[u-1],l=m.snapGrid[u];i-c<=(l-c)*p&&(y-=m.params.slidesPerGroup)}return y=Math.max(y,0),y=Math.min(y,m.slidesGrid.length-1),m.slideTo(y,t,e,h)}function su(){const t=this,{params:e,slidesEl:h}=t,p=e.slidesPerView==="auto"?t.slidesPerViewDynamic():e.slidesPerView;let m=t.clickedIndex,y;const C=t.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(t.animating)return;y=parseInt(t.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?m<t.loopedSlides-p/2||m>t.slides.length-t.loopedSlides+p/2?(t.loopFix(),m=t.getSlideIndex(Je(h,`${C}[data-swiper-slide-index="${y}"]`)[0]),gn(()=>{t.slideTo(m)})):t.slideTo(m):m>t.slides.length-p?(t.loopFix(),m=t.getSlideIndex(Je(h,`${C}[data-swiper-slide-index="${y}"]`)[0]),gn(()=>{t.slideTo(m)})):t.slideTo(m)}else t.slideTo(m)}var ou={slideTo:Zc,slideToLoop:eu,slideNext:tu,slidePrev:iu,slideReset:nu,slideToClosest:ru,slideToClickedSlide:su};function au(t){const e=this,{params:h,slidesEl:p}=e;if(!h.loop||e.virtual&&e.params.virtual.enabled)return;Je(p,`.${h.slideClass}, swiper-slide`).forEach((y,C)=>{y.setAttribute("data-swiper-slide-index",C)}),e.loopFix({slideRealIndex:t,direction:h.centeredSlides?void 0:"next"})}function lu(t){let{slideRealIndex:e,slideTo:h=!0,direction:p,setTranslate:m,activeSlideIndex:y,byController:C,byMousewheel:u}=t===void 0?{}:t;const i=this;if(!i.params.loop)return;i.emit("beforeLoopFix");const{slides:c,allowSlidePrev:l,allowSlideNext:r,slidesEl:s,params:n}=i;if(i.allowSlidePrev=!0,i.allowSlideNext=!0,i.virtual&&n.virtual.enabled){h&&(!n.centeredSlides&&i.snapIndex===0?i.slideTo(i.virtual.slides.length,0,!1,!0):n.centeredSlides&&i.snapIndex<n.slidesPerView?i.slideTo(i.virtual.slides.length+i.snapIndex,0,!1,!0):i.snapIndex===i.snapGrid.length-1&&i.slideTo(i.virtual.slidesBefore,0,!1,!0)),i.allowSlidePrev=l,i.allowSlideNext=r,i.emit("loopFix");return}const a=n.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10));let f=n.loopedSlides||a;f%n.slidesPerGroup!==0&&(f+=n.slidesPerGroup-f%n.slidesPerGroup),i.loopedSlides=f;const o=[],d=[];let g=i.activeIndex;typeof y>"u"?y=i.getSlideIndex(i.slides.filter(x=>x.classList.contains(n.slideActiveClass))[0]):g=y;const v=p==="next"||!p,_=p==="prev"||!p;let b=0,w=0;if(y<f){b=Math.max(f-y,n.slidesPerGroup);for(let x=0;x<f-y;x+=1){const A=x-Math.floor(x/c.length)*c.length;o.push(c.length-A-1)}}else if(y>i.slides.length-f*2){w=Math.max(y-(i.slides.length-f*2),n.slidesPerGroup);for(let x=0;x<w;x+=1){const A=x-Math.floor(x/c.length)*c.length;d.push(A)}}if(_&&o.forEach(x=>{i.slides[x].swiperLoopMoveDOM=!0,s.prepend(i.slides[x]),i.slides[x].swiperLoopMoveDOM=!1}),v&&d.forEach(x=>{i.slides[x].swiperLoopMoveDOM=!0,s.append(i.slides[x]),i.slides[x].swiperLoopMoveDOM=!1}),i.recalcSlides(),n.slidesPerView==="auto"&&i.updateSlides(),n.watchSlidesProgress&&i.updateSlidesOffset(),h){if(o.length>0&&_)if(typeof e>"u"){const x=i.slidesGrid[g],M=i.slidesGrid[g+b]-x;u?i.setTranslate(i.translate-M):(i.slideTo(g+b,0,!1,!0),m&&(i.touches[i.isHorizontal()?"startX":"startY"]+=M))}else m&&i.slideToLoop(e,0,!1,!0);else if(d.length>0&&v)if(typeof e>"u"){const x=i.slidesGrid[g],M=i.slidesGrid[g-w]-x;u?i.setTranslate(i.translate-M):(i.slideTo(g-w,0,!1,!0),m&&(i.touches[i.isHorizontal()?"startX":"startY"]+=M))}else i.slideToLoop(e,0,!1,!0)}if(i.allowSlidePrev=l,i.allowSlideNext=r,i.controller&&i.controller.control&&!C){const x={slideRealIndex:e,slideTo:!1,direction:p,setTranslate:m,activeSlideIndex:y,byController:!0};Array.isArray(i.controller.control)?i.controller.control.forEach(A=>{!A.destroyed&&A.params.loop&&A.loopFix(x)}):i.controller.control instanceof i.constructor&&i.controller.control.params.loop&&i.controller.control.loopFix(x)}i.emit("loopFix")}function cu(){const t=this,{params:e,slidesEl:h}=t;if(!e.loop||t.virtual&&t.params.virtual.enabled)return;t.recalcSlides();const p=[];t.slides.forEach(m=>{const y=typeof m.swiperSlideIndex>"u"?m.getAttribute("data-swiper-slide-index")*1:m.swiperSlideIndex;p[y]=m}),t.slides.forEach(m=>{m.removeAttribute("data-swiper-slide-index")}),p.forEach(m=>{h.append(m)}),t.recalcSlides(),t.slideTo(t.realIndex,0)}var uu={loopCreate:au,loopFix:lu,loopDestroy:cu};function fu(t){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const h=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),h.style.cursor="move",h.style.cursor=t?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function hu(){const t=this;t.params.watchOverflow&&t.isLocked||t.params.cssMode||(t.isElement&&(t.__preventObserver__=!0),t[t.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1}))}var du={setGrabCursor:fu,unsetGrabCursor:hu};function pu(t,e){e===void 0&&(e=this);function h(p){if(!p||p===xt()||p===Re())return null;p.assignedSlot&&(p=p.assignedSlot);const m=p.closest(t);return!m&&!p.getRootNode?null:m||h(p.getRootNode().host)}return h(e)}function gu(t){const e=this,h=xt(),p=Re(),m=e.touchEventsData;m.evCache.push(t);const{params:y,touches:C,enabled:u}=e;if(!u||!y.simulateTouch&&t.pointerType==="mouse"||e.animating&&y.preventInteractionOnTransition)return;!e.animating&&y.cssMode&&y.loop&&e.loopFix();let i=t;i.originalEvent&&(i=i.originalEvent);let c=i.target;if(y.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(c)||"which"in i&&i.which===3||"button"in i&&i.button>0||m.isTouched&&m.isMoved)return;const l=!!y.noSwipingClass&&y.noSwipingClass!=="",r=t.composedPath?t.composedPath():t.path;l&&i.target&&i.target.shadowRoot&&r&&(c=r[0]);const s=y.noSwipingSelector?y.noSwipingSelector:`.${y.noSwipingClass}`,n=!!(i.target&&i.target.shadowRoot);if(y.noSwiping&&(n?pu(s,c):c.closest(s))){e.allowClick=!0;return}if(y.swipeHandler&&!c.closest(y.swipeHandler))return;C.currentX=i.pageX,C.currentY=i.pageY;const a=C.currentX,f=C.currentY,o=y.edgeSwipeDetection||y.iOSEdgeSwipeDetection,d=y.edgeSwipeThreshold||y.iOSEdgeSwipeThreshold;if(o&&(a<=d||a>=p.innerWidth-d))if(o==="prevent")t.preventDefault();else return;Object.assign(m,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),C.startX=a,C.startY=f,m.touchStartTime=bi(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,y.threshold>0&&(m.allowThresholdMove=!1);let g=!0;c.matches(m.focusableElements)&&(g=!1,c.nodeName==="SELECT"&&(m.isTouched=!1)),h.activeElement&&h.activeElement.matches(m.focusableElements)&&h.activeElement!==c&&h.activeElement.blur();const v=g&&e.allowTouchMove&&y.touchStartPreventDefault;(y.touchStartForcePreventDefault||v)&&!c.isContentEditable&&i.preventDefault(),y.freeMode&&y.freeMode.enabled&&e.freeMode&&e.animating&&!y.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function mu(t){const e=xt(),h=this,p=h.touchEventsData,{params:m,touches:y,rtlTranslate:C,enabled:u}=h;if(!u||!m.simulateTouch&&t.pointerType==="mouse")return;let i=t;if(i.originalEvent&&(i=i.originalEvent),!p.isTouched){p.startMoving&&p.isScrolling&&h.emit("touchMoveOpposite",i);return}const c=p.evCache.findIndex(w=>w.pointerId===i.pointerId);c>=0&&(p.evCache[c]=i);const l=p.evCache.length>1?p.evCache[0]:i,r=l.pageX,s=l.pageY;if(i.preventedByNestedSwiper){y.startX=r,y.startY=s;return}if(!h.allowTouchMove){i.target.matches(p.focusableElements)||(h.allowClick=!1),p.isTouched&&(Object.assign(y,{startX:r,startY:s,prevX:h.touches.currentX,prevY:h.touches.currentY,currentX:r,currentY:s}),p.touchStartTime=bi());return}if(m.touchReleaseOnEdges&&!m.loop){if(h.isVertical()){if(s<y.startY&&h.translate<=h.maxTranslate()||s>y.startY&&h.translate>=h.minTranslate()){p.isTouched=!1,p.isMoved=!1;return}}else if(r<y.startX&&h.translate<=h.maxTranslate()||r>y.startX&&h.translate>=h.minTranslate())return}if(e.activeElement&&i.target===e.activeElement&&i.target.matches(p.focusableElements)){p.isMoved=!0,h.allowClick=!1;return}if(p.allowTouchCallbacks&&h.emit("touchMove",i),i.targetTouches&&i.targetTouches.length>1)return;y.currentX=r,y.currentY=s;const n=y.currentX-y.startX,a=y.currentY-y.startY;if(h.params.threshold&&Math.sqrt(n**2+a**2)<h.params.threshold)return;if(typeof p.isScrolling>"u"){let w;h.isHorizontal()&&y.currentY===y.startY||h.isVertical()&&y.currentX===y.startX?p.isScrolling=!1:n*n+a*a>=25&&(w=Math.atan2(Math.abs(a),Math.abs(n))*180/Math.PI,p.isScrolling=h.isHorizontal()?w>m.touchAngle:90-w>m.touchAngle)}if(p.isScrolling&&h.emit("touchMoveOpposite",i),typeof p.startMoving>"u"&&(y.currentX!==y.startX||y.currentY!==y.startY)&&(p.startMoving=!0),p.isScrolling||h.zoom&&h.params.zoom&&h.params.zoom.enabled&&p.evCache.length>1){p.isTouched=!1;return}if(!p.startMoving)return;h.allowClick=!1,!m.cssMode&&i.cancelable&&i.preventDefault(),m.touchMoveStopPropagation&&!m.nested&&i.stopPropagation();let f=h.isHorizontal()?n:a,o=h.isHorizontal()?y.currentX-y.previousX:y.currentY-y.previousY;m.oneWayMovement&&(f=Math.abs(f)*(C?1:-1),o=Math.abs(o)*(C?1:-1)),y.diff=f,f*=m.touchRatio,C&&(f=-f,o=-o);const d=h.touchesDirection;h.swipeDirection=f>0?"prev":"next",h.touchesDirection=o>0?"prev":"next";const g=h.params.loop&&!m.cssMode;if(!p.isMoved){if(g&&h.loopFix({direction:h.swipeDirection}),p.startTranslate=h.getTranslate(),h.setTransition(0),h.animating){const w=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});h.wrapperEl.dispatchEvent(w)}p.allowMomentumBounce=!1,m.grabCursor&&(h.allowSlideNext===!0||h.allowSlidePrev===!0)&&h.setGrabCursor(!0),h.emit("sliderFirstMove",i)}let v;p.isMoved&&d!==h.touchesDirection&&g&&Math.abs(f)>=1&&(h.loopFix({direction:h.swipeDirection,setTranslate:!0}),v=!0),h.emit("sliderMove",i),p.isMoved=!0,p.currentTranslate=f+p.startTranslate;let _=!0,b=m.resistanceRatio;if(m.touchReleaseOnEdges&&(b=0),f>0?(g&&!v&&p.currentTranslate>(m.centeredSlides?h.minTranslate()-h.size/2:h.minTranslate())&&h.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),p.currentTranslate>h.minTranslate()&&(_=!1,m.resistance&&(p.currentTranslate=h.minTranslate()-1+(-h.minTranslate()+p.startTranslate+f)**b))):f<0&&(g&&!v&&p.currentTranslate<(m.centeredSlides?h.maxTranslate()+h.size/2:h.maxTranslate())&&h.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:h.slides.length-(m.slidesPerView==="auto"?h.slidesPerViewDynamic():Math.ceil(parseFloat(m.slidesPerView,10)))}),p.currentTranslate<h.maxTranslate()&&(_=!1,m.resistance&&(p.currentTranslate=h.maxTranslate()+1-(h.maxTranslate()-p.startTranslate-f)**b))),_&&(i.preventedByNestedSwiper=!0),!h.allowSlideNext&&h.swipeDirection==="next"&&p.currentTranslate<p.startTranslate&&(p.currentTranslate=p.startTranslate),!h.allowSlidePrev&&h.swipeDirection==="prev"&&p.currentTranslate>p.startTranslate&&(p.currentTranslate=p.startTranslate),!h.allowSlidePrev&&!h.allowSlideNext&&(p.currentTranslate=p.startTranslate),m.threshold>0)if(Math.abs(f)>m.threshold||p.allowThresholdMove){if(!p.allowThresholdMove){p.allowThresholdMove=!0,y.startX=y.currentX,y.startY=y.currentY,p.currentTranslate=p.startTranslate,y.diff=h.isHorizontal()?y.currentX-y.startX:y.currentY-y.startY;return}}else{p.currentTranslate=p.startTranslate;return}!m.followFinger||m.cssMode||((m.freeMode&&m.freeMode.enabled&&h.freeMode||m.watchSlidesProgress)&&(h.updateActiveIndex(),h.updateSlidesClasses()),m.freeMode&&m.freeMode.enabled&&h.freeMode&&h.freeMode.onTouchMove(),h.updateProgress(p.currentTranslate),h.setTranslate(p.currentTranslate))}function vu(t){const e=this,h=e.touchEventsData,p=h.evCache.findIndex(v=>v.pointerId===t.pointerId);if(p>=0&&h.evCache.splice(p,1),["pointercancel","pointerout","pointerleave"].includes(t.type)&&!(t.type==="pointercancel"&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:m,touches:y,rtlTranslate:C,slidesGrid:u,enabled:i}=e;if(!i||!m.simulateTouch&&t.pointerType==="mouse")return;let c=t;if(c.originalEvent&&(c=c.originalEvent),h.allowTouchCallbacks&&e.emit("touchEnd",c),h.allowTouchCallbacks=!1,!h.isTouched){h.isMoved&&m.grabCursor&&e.setGrabCursor(!1),h.isMoved=!1,h.startMoving=!1;return}m.grabCursor&&h.isMoved&&h.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const l=bi(),r=l-h.touchStartTime;if(e.allowClick){const v=c.path||c.composedPath&&c.composedPath();e.updateClickedSlide(v&&v[0]||c.target),e.emit("tap click",c),r<300&&l-h.lastClickTime<300&&e.emit("doubleTap doubleClick",c)}if(h.lastClickTime=bi(),gn(()=>{e.destroyed||(e.allowClick=!0)}),!h.isTouched||!h.isMoved||!e.swipeDirection||y.diff===0||h.currentTranslate===h.startTranslate){h.isTouched=!1,h.isMoved=!1,h.startMoving=!1;return}h.isTouched=!1,h.isMoved=!1,h.startMoving=!1;let s;if(m.followFinger?s=C?e.translate:-e.translate:s=-h.currentTranslate,m.cssMode)return;if(m.freeMode&&m.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:s});return}let n=0,a=e.slidesSizesGrid[0];for(let v=0;v<u.length;v+=v<m.slidesPerGroupSkip?1:m.slidesPerGroup){const _=v<m.slidesPerGroupSkip-1?1:m.slidesPerGroup;typeof u[v+_]<"u"?s>=u[v]&&s<u[v+_]&&(n=v,a=u[v+_]-u[v]):s>=u[v]&&(n=v,a=u[u.length-1]-u[u.length-2])}let f=null,o=null;m.rewind&&(e.isBeginning?o=m.virtual&&m.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(f=0));const d=(s-u[n])/a,g=n<m.slidesPerGroupSkip-1?1:m.slidesPerGroup;if(r>m.longSwipesMs){if(!m.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(d>=m.longSwipesRatio?e.slideTo(m.rewind&&e.isEnd?f:n+g):e.slideTo(n)),e.swipeDirection==="prev"&&(d>1-m.longSwipesRatio?e.slideTo(n+g):o!==null&&d<0&&Math.abs(d)>m.longSwipesRatio?e.slideTo(o):e.slideTo(n))}else{if(!m.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(c.target===e.navigation.nextEl||c.target===e.navigation.prevEl)?c.target===e.navigation.nextEl?e.slideTo(n+g):e.slideTo(n):(e.swipeDirection==="next"&&e.slideTo(f!==null?f:n+g),e.swipeDirection==="prev"&&e.slideTo(o!==null?o:n))}}function Sr(){const t=this,{params:e,el:h}=t;if(h&&h.offsetWidth===0)return;e.breakpoints&&t.setBreakpoint();const{allowSlideNext:p,allowSlidePrev:m,snapGrid:y}=t,C=t.virtual&&t.params.virtual.enabled;t.allowSlideNext=!0,t.allowSlidePrev=!0,t.updateSize(),t.updateSlides(),t.updateSlidesClasses();const u=C&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&t.isEnd&&!t.isBeginning&&!t.params.centeredSlides&&!u?t.slideTo(t.slides.length-1,0,!1,!0):t.params.loop&&!C?t.slideToLoop(t.realIndex,0,!1,!0):t.slideTo(t.activeIndex,0,!1,!0),t.autoplay&&t.autoplay.running&&t.autoplay.paused&&(clearTimeout(t.autoplay.resizeTimeout),t.autoplay.resizeTimeout=setTimeout(()=>{t.autoplay&&t.autoplay.running&&t.autoplay.paused&&t.autoplay.resume()},500)),t.allowSlidePrev=m,t.allowSlideNext=p,t.params.watchOverflow&&y!==t.snapGrid&&t.checkOverflow()}function yu(t){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&t.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(t.stopPropagation(),t.stopImmediatePropagation())))}function _u(){const t=this,{wrapperEl:e,rtlTranslate:h,enabled:p}=t;if(!p)return;t.previousTranslate=t.translate,t.isHorizontal()?t.translate=-e.scrollLeft:t.translate=-e.scrollTop,t.translate===0&&(t.translate=0),t.updateActiveIndex(),t.updateSlidesClasses();let m;const y=t.maxTranslate()-t.minTranslate();y===0?m=0:m=(t.translate-t.minTranslate())/y,m!==t.progress&&t.updateProgress(h?-t.translate:t.translate),t.emit("setTranslate",t.translate,!1)}function Cu(t){const e=this;gi(e,t.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let xr=!1;function bu(){}const ks=(t,e)=>{const h=xt(),{params:p,el:m,wrapperEl:y,device:C}=t,u=!!p.nested,i=e==="on"?"addEventListener":"removeEventListener",c=e;m[i]("pointerdown",t.onTouchStart,{passive:!1}),h[i]("pointermove",t.onTouchMove,{passive:!1,capture:u}),h[i]("pointerup",t.onTouchEnd,{passive:!0}),h[i]("pointercancel",t.onTouchEnd,{passive:!0}),h[i]("pointerout",t.onTouchEnd,{passive:!0}),h[i]("pointerleave",t.onTouchEnd,{passive:!0}),(p.preventClicks||p.preventClicksPropagation)&&m[i]("click",t.onClick,!0),p.cssMode&&y[i]("scroll",t.onScroll),p.updateOnWindowResize?t[c](C.ios||C.android?"resize orientationchange observerUpdate":"resize observerUpdate",Sr,!0):t[c]("observerUpdate",Sr,!0),m[i]("load",t.onLoad,{capture:!0})};function wu(){const t=this,e=xt(),{params:h}=t;t.onTouchStart=gu.bind(t),t.onTouchMove=mu.bind(t),t.onTouchEnd=vu.bind(t),h.cssMode&&(t.onScroll=_u.bind(t)),t.onClick=yu.bind(t),t.onLoad=Cu.bind(t),xr||(e.addEventListener("touchstart",bu),xr=!0),ks(t,"on")}function Su(){ks(this,"off")}var xu={attachEvents:wu,detachEvents:Su};const Tr=(t,e)=>t.grid&&e.grid&&e.grid.rows>1;function Tu(){const t=this,{realIndex:e,initialized:h,params:p,el:m}=t,y=p.breakpoints;if(!y||y&&Object.keys(y).length===0)return;const C=t.getBreakpoint(y,t.params.breakpointsBase,t.el);if(!C||t.currentBreakpoint===C)return;const i=(C in y?y[C]:void 0)||t.originalParams,c=Tr(t,p),l=Tr(t,i),r=p.enabled;c&&!l?(m.classList.remove(`${p.containerModifierClass}grid`,`${p.containerModifierClass}grid-column`),t.emitContainerClasses()):!c&&l&&(m.classList.add(`${p.containerModifierClass}grid`),(i.grid.fill&&i.grid.fill==="column"||!i.grid.fill&&p.grid.fill==="column")&&m.classList.add(`${p.containerModifierClass}grid-column`),t.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(f=>{if(typeof i[f]>"u")return;const o=p[f]&&p[f].enabled,d=i[f]&&i[f].enabled;o&&!d&&t[f].disable(),!o&&d&&t[f].enable()});const s=i.direction&&i.direction!==p.direction,n=p.loop&&(i.slidesPerView!==p.slidesPerView||s);s&&h&&t.changeDirection(),je(t.params,i);const a=t.params.enabled;Object.assign(t,{allowTouchMove:t.params.allowTouchMove,allowSlideNext:t.params.allowSlideNext,allowSlidePrev:t.params.allowSlidePrev}),r&&!a?t.disable():!r&&a&&t.enable(),t.currentBreakpoint=C,t.emit("_beforeBreakpoint",i),n&&h&&(t.loopDestroy(),t.loopCreate(e),t.updateSlides()),t.emit("breakpoint",i)}function Ou(t,e,h){if(e===void 0&&(e="window"),!t||e==="container"&&!h)return;let p=!1;const m=Re(),y=e==="window"?m.innerHeight:h.clientHeight,C=Object.keys(t).map(u=>{if(typeof u=="string"&&u.indexOf("@")===0){const i=parseFloat(u.substr(1));return{value:y*i,point:u}}return{value:u,point:u}});C.sort((u,i)=>parseInt(u.value,10)-parseInt(i.value,10));for(let u=0;u<C.length;u+=1){const{point:i,value:c}=C[u];e==="window"?m.matchMedia(`(min-width: ${c}px)`).matches&&(p=i):c<=h.clientWidth&&(p=i)}return p||"max"}var Eu={setBreakpoint:Tu,getBreakpoint:Ou};function Pu(t,e){const h=[];return t.forEach(p=>{typeof p=="object"?Object.keys(p).forEach(m=>{p[m]&&h.push(e+m)}):typeof p=="string"&&h.push(e+p)}),h}function Mu(){const t=this,{classNames:e,params:h,rtl:p,el:m,device:y}=t,C=Pu(["initialized",h.direction,{"free-mode":t.params.freeMode&&h.freeMode.enabled},{autoheight:h.autoHeight},{rtl:p},{grid:h.grid&&h.grid.rows>1},{"grid-column":h.grid&&h.grid.rows>1&&h.grid.fill==="column"},{android:y.android},{ios:y.ios},{"css-mode":h.cssMode},{centered:h.cssMode&&h.centeredSlides},{"watch-progress":h.watchSlidesProgress}],h.containerModifierClass);e.push(...C),m.classList.add(...e),t.emitContainerClasses()}function Au(){const t=this,{el:e,classNames:h}=t;e.classList.remove(...h),t.emitContainerClasses()}var ku={addClasses:Mu,removeClasses:Au};function Du(){const t=this,{isLocked:e,params:h}=t,{slidesOffsetBefore:p}=h;if(p){const m=t.slides.length-1,y=t.slidesGrid[m]+t.slidesSizesGrid[m]+p*2;t.isLocked=t.size>y}else t.isLocked=t.snapGrid.length===1;h.allowSlideNext===!0&&(t.allowSlideNext=!t.isLocked),h.allowSlidePrev===!0&&(t.allowSlidePrev=!t.isLocked),e&&e!==t.isLocked&&(t.isEnd=!1),e!==t.isLocked&&t.emit(t.isLocked?"lock":"unlock")}var Iu={checkOverflow:Du},Or={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Fu(t,e){return function(p){p===void 0&&(p={});const m=Object.keys(p)[0],y=p[m];if(typeof y!="object"||y===null){je(e,p);return}if(["navigation","pagination","scrollbar"].indexOf(m)>=0&&t[m]===!0&&(t[m]={auto:!0}),!(m in t&&"enabled"in y)){je(e,p);return}t[m]===!0&&(t[m]={enabled:!0}),typeof t[m]=="object"&&!("enabled"in t[m])&&(t[m].enabled=!0),t[m]||(t[m]={enabled:!1}),je(e,p)}}const qi={eventsEmitter:kc,update:Xc,translate:$c,transition:Qc,slide:ou,loop:uu,grabCursor:du,events:xu,breakpoints:Eu,checkOverflow:Iu,classes:ku},Ki={};let Zt=class Ze{constructor(){let e,h;for(var p=arguments.length,m=new Array(p),y=0;y<p;y++)m[y]=arguments[y];m.length===1&&m[0].constructor&&Object.prototype.toString.call(m[0]).slice(8,-1)==="Object"?h=m[0]:[e,h]=m,h||(h={}),h=je({},h),e&&!h.el&&(h.el=e);const C=xt();if(h.el&&typeof h.el=="string"&&C.querySelectorAll(h.el).length>1){const l=[];return C.querySelectorAll(h.el).forEach(r=>{const s=je({},h,{el:r});l.push(new Ze(s))}),l}const u=this;u.__swiper__=!0,u.support=Ms(),u.device=Oc({userAgent:h.userAgent}),u.browser=Pc(),u.eventsListeners={},u.eventsAnyListeners=[],u.modules=[...u.__modules__],h.modules&&Array.isArray(h.modules)&&u.modules.push(...h.modules);const i={};u.modules.forEach(l=>{l({params:h,swiper:u,extendParams:Fu(h,i),on:u.on.bind(u),once:u.once.bind(u),off:u.off.bind(u),emit:u.emit.bind(u)})});const c=je({},Or,i);return u.params=je({},c,Ki,h),u.originalParams=je({},u.params),u.passedParams=je({},h),u.params&&u.params.on&&Object.keys(u.params.on).forEach(l=>{u.on(l,u.params.on[l])}),u.params&&u.params.onAny&&u.onAny(u.params.onAny),Object.assign(u,{enabled:u.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return u.params.direction==="horizontal"},isVertical(){return u.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:u.params.allowSlideNext,allowSlidePrev:u.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:u.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:u.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),u.emit("_swiper"),u.params.init&&u.init(),u}getSlideIndex(e){const{slidesEl:h,params:p}=this,m=Je(h,`.${p.slideClass}, swiper-slide`),y=wi(m[0]);return wi(e)-y}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(h=>h.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:h,params:p}=e;e.slides=Je(h,`.${p.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,h){const p=this;e=Math.min(Math.max(e,0),1);const m=p.minTranslate(),C=(p.maxTranslate()-m)*e+m;p.translateTo(C,typeof h>"u"?0:h),p.updateActiveIndex(),p.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const h=e.el.className.split(" ").filter(p=>p.indexOf("swiper")===0||p.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",h.join(" "))}getSlideClasses(e){const h=this;return h.destroyed?"":e.className.split(" ").filter(p=>p.indexOf("swiper-slide")===0||p.indexOf(h.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const h=[];e.slides.forEach(p=>{const m=e.getSlideClasses(p);h.push({slideEl:p,classNames:m}),e.emit("_slideClass",p,m)}),e.emit("_slideClasses",h)}slidesPerViewDynamic(e,h){e===void 0&&(e="current"),h===void 0&&(h=!1);const p=this,{params:m,slides:y,slidesGrid:C,slidesSizesGrid:u,size:i,activeIndex:c}=p;let l=1;if(m.centeredSlides){let r=y[c]?y[c].swiperSlideSize:0,s;for(let n=c+1;n<y.length;n+=1)y[n]&&!s&&(r+=y[n].swiperSlideSize,l+=1,r>i&&(s=!0));for(let n=c-1;n>=0;n-=1)y[n]&&!s&&(r+=y[n].swiperSlideSize,l+=1,r>i&&(s=!0))}else if(e==="current")for(let r=c+1;r<y.length;r+=1)(h?C[r]+u[r]-C[c]<i:C[r]-C[c]<i)&&(l+=1);else for(let r=c-1;r>=0;r-=1)C[c]-C[r]<i&&(l+=1);return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:h,params:p}=e;p.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(C=>{C.complete&&gi(e,C)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function m(){const C=e.rtlTranslate?e.translate*-1:e.translate,u=Math.min(Math.max(C,e.maxTranslate()),e.minTranslate());e.setTranslate(u),e.updateActiveIndex(),e.updateSlidesClasses()}let y;if(p.freeMode&&p.freeMode.enabled&&!p.cssMode)m(),p.autoHeight&&e.updateAutoHeight();else{if((p.slidesPerView==="auto"||p.slidesPerView>1)&&e.isEnd&&!p.centeredSlides){const C=e.virtual&&p.virtual.enabled?e.virtual.slides:e.slides;y=e.slideTo(C.length-1,0,!1,!0)}else y=e.slideTo(e.activeIndex,0,!1,!0);y||m()}p.watchOverflow&&h!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,h){h===void 0&&(h=!0);const p=this,m=p.params.direction;return e||(e=m==="horizontal"?"vertical":"horizontal"),e===m||e!=="horizontal"&&e!=="vertical"||(p.el.classList.remove(`${p.params.containerModifierClass}${m}`),p.el.classList.add(`${p.params.containerModifierClass}${e}`),p.emitContainerClasses(),p.params.direction=e,p.slides.forEach(y=>{e==="vertical"?y.style.width="":y.style.height=""}),p.emit("changeDirection"),h&&p.update()),p}changeLanguageDirection(e){const h=this;h.rtl&&e==="rtl"||!h.rtl&&e==="ltr"||(h.rtl=e==="rtl",h.rtlTranslate=h.params.direction==="horizontal"&&h.rtl,h.rtl?(h.el.classList.add(`${h.params.containerModifierClass}rtl`),h.el.dir="rtl"):(h.el.classList.remove(`${h.params.containerModifierClass}rtl`),h.el.dir="ltr"),h.update())}mount(e){const h=this;if(h.mounted)return!0;let p=e||h.params.el;if(typeof p=="string"&&(p=document.querySelector(p)),!p)return!1;p.swiper=h,p.parentNode&&p.parentNode.host&&(h.isElement=!0);const m=()=>`.${(h.params.wrapperClass||"").trim().split(" ").join(".")}`;let C=(()=>p&&p.shadowRoot&&p.shadowRoot.querySelector?p.shadowRoot.querySelector(m()):Je(p,m())[0])();return!C&&h.params.createElements&&(C=Xn("div",h.params.wrapperClass),p.append(C),Je(p,`.${h.params.slideClass}`).forEach(u=>{C.append(u)})),Object.assign(h,{el:p,wrapperEl:C,slidesEl:h.isElement?p.parentNode.host:C,hostEl:h.isElement?p.parentNode.host:p,mounted:!0,rtl:p.dir.toLowerCase()==="rtl"||ot(p,"direction")==="rtl",rtlTranslate:h.params.direction==="horizontal"&&(p.dir.toLowerCase()==="rtl"||ot(p,"direction")==="rtl"),wrongRTL:ot(C,"display")==="-webkit-box"}),!0}init(e){const h=this;return h.initialized||h.mount(e)===!1||(h.emit("beforeInit"),h.params.breakpoints&&h.setBreakpoint(),h.addClasses(),h.updateSize(),h.updateSlides(),h.params.watchOverflow&&h.checkOverflow(),h.params.grabCursor&&h.enabled&&h.setGrabCursor(),h.params.loop&&h.virtual&&h.params.virtual.enabled?h.slideTo(h.params.initialSlide+h.virtual.slidesBefore,0,h.params.runCallbacksOnInit,!1,!0):h.slideTo(h.params.initialSlide,0,h.params.runCallbacksOnInit,!1,!0),h.params.loop&&h.loopCreate(),h.attachEvents(),[...h.el.querySelectorAll('[loading="lazy"]')].forEach(m=>{m.complete?gi(h,m):m.addEventListener("load",y=>{gi(h,y.target)})}),vn(h),h.initialized=!0,vn(h),h.emit("init"),h.emit("afterInit")),h}destroy(e,h){e===void 0&&(e=!0),h===void 0&&(h=!0);const p=this,{params:m,el:y,wrapperEl:C,slides:u}=p;return typeof p.params>"u"||p.destroyed||(p.emit("beforeDestroy"),p.initialized=!1,p.detachEvents(),m.loop&&p.loopDestroy(),h&&(p.removeClasses(),y.removeAttribute("style"),C.removeAttribute("style"),u&&u.length&&u.forEach(i=>{i.classList.remove(m.slideVisibleClass,m.slideActiveClass,m.slideNextClass,m.slidePrevClass),i.removeAttribute("style"),i.removeAttribute("data-swiper-slide-index")})),p.emit("destroy"),Object.keys(p.eventsListeners).forEach(i=>{p.off(i)}),e!==!1&&(p.el.swiper=null,yc(p)),p.destroyed=!0),null}static extendDefaults(e){je(Ki,e)}static get extendedDefaults(){return Ki}static get defaults(){return Or}static installModule(e){Ze.prototype.__modules__||(Ze.prototype.__modules__=[]);const h=Ze.prototype.__modules__;typeof e=="function"&&h.indexOf(e)<0&&h.push(e)}static use(e){return Array.isArray(e)?(e.forEach(h=>Ze.installModule(h)),Ze):(Ze.installModule(e),Ze)}};Object.keys(qi).forEach(t=>{Object.keys(qi[t]).forEach(e=>{Zt.prototype[e]=qi[t][e]})});Zt.use([Mc,Ac]);const Ds=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function bt(t){return typeof t=="object"&&t!==null&&t.constructor&&Object.prototype.toString.call(t).slice(8,-1)==="Object"}function at(t,e){const h=["__proto__","constructor","prototype"];Object.keys(e).filter(p=>h.indexOf(p)<0).forEach(p=>{typeof t[p]>"u"?t[p]=e[p]:bt(e[p])&&bt(t[p])&&Object.keys(e[p]).length>0?e[p].__swiper__?t[p]=e[p]:at(t[p],e[p]):t[p]=e[p]})}function Is(t){return t===void 0&&(t={}),t.navigation&&typeof t.navigation.nextEl>"u"&&typeof t.navigation.prevEl>"u"}function Fs(t){return t===void 0&&(t={}),t.pagination&&typeof t.pagination.el>"u"}function Ls(t){return t===void 0&&(t={}),t.scrollbar&&typeof t.scrollbar.el>"u"}function Bs(t){t===void 0&&(t="");const e=t.split(" ").map(p=>p.trim()).filter(p=>!!p),h=[];return e.forEach(p=>{h.indexOf(p)<0&&h.push(p)}),h.join(" ")}function Lu(t){return t===void 0&&(t=""),t?t.includes("swiper-wrapper")?t:`swiper-wrapper ${t}`:"swiper-wrapper"}function Bu(t){let{swiper:e,slides:h,passedParams:p,changedParams:m,nextEl:y,prevEl:C,scrollbarEl:u,paginationEl:i}=t;const c=m.filter(M=>M!=="children"&&M!=="direction"&&M!=="wrapperClass"),{params:l,pagination:r,navigation:s,scrollbar:n,virtual:a,thumbs:f}=e;let o,d,g,v,_,b,w,x;m.includes("thumbs")&&p.thumbs&&p.thumbs.swiper&&l.thumbs&&!l.thumbs.swiper&&(o=!0),m.includes("controller")&&p.controller&&p.controller.control&&l.controller&&!l.controller.control&&(d=!0),m.includes("pagination")&&p.pagination&&(p.pagination.el||i)&&(l.pagination||l.pagination===!1)&&r&&!r.el&&(g=!0),m.includes("scrollbar")&&p.scrollbar&&(p.scrollbar.el||u)&&(l.scrollbar||l.scrollbar===!1)&&n&&!n.el&&(v=!0),m.includes("navigation")&&p.navigation&&(p.navigation.prevEl||C)&&(p.navigation.nextEl||y)&&(l.navigation||l.navigation===!1)&&s&&!s.prevEl&&!s.nextEl&&(_=!0);const A=M=>{e[M]&&(e[M].destroy(),M==="navigation"?(e.isElement&&(e[M].prevEl.remove(),e[M].nextEl.remove()),l[M].prevEl=void 0,l[M].nextEl=void 0,e[M].prevEl=void 0,e[M].nextEl=void 0):(e.isElement&&e[M].el.remove(),l[M].el=void 0,e[M].el=void 0))};m.includes("loop")&&e.isElement&&(l.loop&&!p.loop?b=!0:!l.loop&&p.loop?w=!0:x=!0),c.forEach(M=>{if(bt(l[M])&&bt(p[M]))at(l[M],p[M]),(M==="navigation"||M==="pagination"||M==="scrollbar")&&"enabled"in p[M]&&!p[M].enabled&&A(M);else{const X=p[M];(X===!0||X===!1)&&(M==="navigation"||M==="pagination"||M==="scrollbar")?X===!1&&A(M):l[M]=p[M]}}),c.includes("controller")&&!d&&e.controller&&e.controller.control&&l.controller&&l.controller.control&&(e.controller.control=l.controller.control),m.includes("children")&&h&&a&&l.virtual.enabled&&(a.slides=h,a.update(!0)),m.includes("children")&&h&&l.loop&&(x=!0),o&&f.init()&&f.update(!0),d&&(e.controller.control=l.controller.control),g&&(e.isElement&&(!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-pagination"),e.el.appendChild(i)),i&&(l.pagination.el=i),r.init(),r.render(),r.update()),v&&(e.isElement&&(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-scrollbar"),e.el.appendChild(u)),u&&(l.scrollbar.el=u),n.init(),n.updateSize(),n.setTranslate()),_&&(e.isElement&&((!y||typeof y=="string")&&(y=document.createElement("div"),y.classList.add("swiper-button-next"),y.innerHTML=e.hostEl.nextButtonSvg,e.el.appendChild(y)),(!C||typeof C=="string")&&(C=document.createElement("div"),C.classList.add("swiper-button-prev"),y.innerHTML=e.hostEl.prevButtonSvg,e.el.appendChild(C))),y&&(l.navigation.nextEl=y),C&&(l.navigation.prevEl=C),s.init(),s.update()),m.includes("allowSlideNext")&&(e.allowSlideNext=p.allowSlideNext),m.includes("allowSlidePrev")&&(e.allowSlidePrev=p.allowSlidePrev),m.includes("direction")&&e.changeDirection(p.direction,!1),(b||x)&&e.loopDestroy(),(w||x)&&e.loopCreate(),e.update()}function Er(t,e){t===void 0&&(t={}),e===void 0&&(e=!0);const h={on:{}},p={},m={};at(h,Zt.defaults),at(h,Zt.extendedDefaults),h._emitClasses=!0,h.init=!1;const y={},C=Ds.map(i=>i.replace(/_/,"")),u=Object.assign({},t);return Object.keys(u).forEach(i=>{typeof t[i]>"u"||(C.indexOf(i)>=0?bt(t[i])?(h[i]={},m[i]={},at(h[i],t[i]),at(m[i],t[i])):(h[i]=t[i],m[i]=t[i]):i.search(/on[A-Z]/)===0&&typeof t[i]=="function"?e?p[`${i[2].toLowerCase()}${i.substr(3)}`]=t[i]:h.on[`${i[2].toLowerCase()}${i.substr(3)}`]=t[i]:y[i]=t[i])}),["navigation","pagination","scrollbar"].forEach(i=>{h[i]===!0&&(h[i]={}),h[i]===!1&&delete h[i]}),{params:h,passedParams:m,rest:y,events:p}}function ju(t,e){let{el:h,nextEl:p,prevEl:m,paginationEl:y,scrollbarEl:C,swiper:u}=t;Is(e)&&p&&m&&(u.params.navigation.nextEl=p,u.originalParams.navigation.nextEl=p,u.params.navigation.prevEl=m,u.originalParams.navigation.prevEl=m),Fs(e)&&y&&(u.params.pagination.el=y,u.originalParams.pagination.el=y),Ls(e)&&C&&(u.params.scrollbar.el=C,u.originalParams.scrollbar.el=C),u.init(h)}function Ru(t,e,h,p,m){const y=[];if(!e)return y;const C=i=>{y.indexOf(i)<0&&y.push(i)};if(h&&p){const i=p.map(m),c=h.map(m);i.join("")!==c.join("")&&C("children"),p.length!==h.length&&C("children")}return Ds.filter(i=>i[0]==="_").map(i=>i.replace(/_/,"")).forEach(i=>{if(i in t&&i in e)if(bt(t[i])&&bt(e[i])){const c=Object.keys(t[i]),l=Object.keys(e[i]);c.length!==l.length?C(i):(c.forEach(r=>{t[i][r]!==e[i][r]&&C(i)}),l.forEach(r=>{t[i][r]!==e[i][r]&&C(i)}))}else t[i]!==e[i]&&C(i)}),y}const zu=t=>{!t||t.destroyed||!t.params.virtual||t.params.virtual&&!t.params.virtual.enabled||(t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.parallax&&t.params.parallax&&t.params.parallax.enabled&&t.parallax.setTranslate())};function Ji(t,e,h){t===void 0&&(t={});const p=[],m={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},y=(C,u)=>{Array.isArray(C)&&C.forEach(i=>{const c=typeof i.type=="symbol";u==="default"&&(u="container-end"),c&&i.children?y(i.children,u):i.type&&(i.type.name==="SwiperSlide"||i.type.name==="AsyncComponentWrapper")?p.push(i):m[u]&&m[u].push(i)})};return Object.keys(t).forEach(C=>{if(typeof t[C]!="function")return;const u=t[C]();y(u,C)}),h.value=e.value,e.value=p,{slides:p,slots:m}}function Hu(t,e,h){if(!h)return null;const p=l=>{let r=l;return l<0?r=e.length+l:r>=e.length&&(r=r-e.length),r},m=t.value.isHorizontal()?{[t.value.rtlTranslate?"right":"left"]:`${h.offset}px`}:{top:`${h.offset}px`},{from:y,to:C}=h,u=t.value.params.loop?-e.length:0,i=t.value.params.loop?e.length*2:e.length,c=[];for(let l=u;l<i;l+=1)l>=y&&l<=C&&c.push(e[p(l)]);return c.map(l=>(l.props||(l.props={}),l.props.style||(l.props.style={}),l.props.swiperRef=t,l.props.style=m,Ne(l.type,{...l.props},l.children)))}const Wu={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(t,e){let{slots:h,emit:p}=e;const{tag:m,wrapperTag:y}=t,C=be("swiper"),u=be(null),i=be(!1),c=be(!1),l=be(null),r=be(null),s=be(null),n={value:[]},a={value:[]},f=be(null),o=be(null),d=be(null),g=be(null),{params:v,passedParams:_}=Er(t,!1);Ji(h,n,a),s.value=_,a.value=n.value;const b=()=>{Ji(h,n,a),i.value=!0};v.onAny=function(A){for(var M=arguments.length,X=new Array(M>1?M-1:0),z=1;z<M;z++)X[z-1]=arguments[z];p(A,...X)},Object.assign(v.on,{_beforeBreakpoint:b,_containerClasses(A,M){C.value=M}});const w={...v};if(delete w.wrapperClass,r.value=new Zt(w),r.value.virtual&&r.value.params.virtual.enabled){r.value.virtual.slides=n.value;const A={cache:!1,slides:n.value,renderExternal:M=>{u.value=M},renderExternalUpdate:!1};at(r.value.params.virtual,A),at(r.value.originalParams.virtual,A)}In(()=>{!c.value&&r.value&&(r.value.emitSlidesClasses(),c.value=!0);const{passedParams:A}=Er(t,!1),M=Ru(A,s.value,n.value,a.value,X=>X.props&&X.props.key);s.value=A,(M.length||i.value)&&r.value&&!r.value.destroyed&&Bu({swiper:r.value,slides:n.value,passedParams:A,changedParams:M,nextEl:f.value,prevEl:o.value,scrollbarEl:g.value,paginationEl:d.value}),i.value=!1}),Bn("swiper",r),fi(u,()=>{Zr(()=>{zu(r.value)})}),Di(()=>{l.value&&(ju({el:l.value,nextEl:f.value,prevEl:o.value,paginationEl:d.value,scrollbarEl:g.value,swiper:r.value},v),p("swiper",r.value))}),Fn(()=>{r.value&&!r.value.destroyed&&r.value.destroy(!0,!1)});function x(A){return v.virtual?Hu(r,A,u.value):(A.forEach((M,X)=>{M.props||(M.props={}),M.props.swiperRef=r,M.props.swiperSlideIndex=X}),A)}return()=>{const{slides:A,slots:M}=Ji(h,n,a);return Ne(m,{ref:l,class:Bs(C.value)},[M["container-start"],Ne(y,{class:Lu(v.wrapperClass)},[M["wrapper-start"],x(A),M["wrapper-end"]]),Is(t)&&[Ne("div",{ref:o,class:"swiper-button-prev"}),Ne("div",{ref:f,class:"swiper-button-next"})],Ls(t)&&Ne("div",{ref:g,class:"swiper-scrollbar"}),Fs(t)&&Ne("div",{ref:d,class:"swiper-pagination"}),M["container-end"]])}}},Xu={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(t,e){let{slots:h}=e,p=!1;const{swiperRef:m}=t,y=be(null),C=be("swiper-slide"),u=be(!1);function i(r,s,n){s===y.value&&(C.value=n)}Di(()=>{!m||!m.value||(m.value.on("_slideClass",i),p=!0)}),cs(()=>{p||!m||!m.value||(m.value.on("_slideClass",i),p=!0)}),In(()=>{!y.value||!m||!m.value||(typeof t.swiperSlideIndex<"u"&&(y.value.swiperSlideIndex=t.swiperSlideIndex),m.value.destroyed&&C.value!=="swiper-slide"&&(C.value="swiper-slide"))}),Fn(()=>{!m||!m.value||m.value.off("_slideClass",i)});const c=Bi(()=>({isActive:C.value.indexOf("swiper-slide-active")>=0,isVisible:C.value.indexOf("swiper-slide-visible")>=0,isPrev:C.value.indexOf("swiper-slide-prev")>=0,isNext:C.value.indexOf("swiper-slide-next")>=0}));Bn("swiperSlide",c);const l=()=>{u.value=!0};return()=>Ne(t.tag,{class:Bs(`${C.value}`),ref:y,"data-swiper-slide-index":typeof t.virtualIndex>"u"&&m&&m.value&&m.value.params.loop?t.swiperSlideIndex:t.virtualIndex,onLoadCapture:l},t.zoom?Ne("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof t.zoom=="number"?t.zoom:void 0},[h.default&&h.default(c.value),t.lazy&&!u.value&&Ne("div",{class:"swiper-lazy-preloader"})]):[h.default&&h.default(c.value),t.lazy&&!u.value&&Ne("div",{class:"swiper-lazy-preloader"})])}};function Nu(t,e,h,p){return t.params.createElements&&Object.keys(p).forEach(m=>{if(!h[m]&&h.auto===!0){let y=Je(t.el,`.${p[m]}`)[0];y||(y=Xn("div",p[m]),y.className=p[m],t.el.append(y)),h[m]=y,e[m]=y}}),h}function Wt(t){return t===void 0&&(t=""),`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Yu(t){let{swiper:e,extendParams:h,on:p,emit:m}=t;const y="swiper-pagination";h({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:g=>g,formatFractionTotal:g=>g,bulletClass:`${y}-bullet`,bulletActiveClass:`${y}-bullet-active`,modifierClass:`${y}-`,currentClass:`${y}-current`,totalClass:`${y}-total`,hiddenClass:`${y}-hidden`,progressbarFillClass:`${y}-progressbar-fill`,progressbarOppositeClass:`${y}-progressbar-opposite`,clickableClass:`${y}-clickable`,lockClass:`${y}-lock`,horizontalClass:`${y}-horizontal`,verticalClass:`${y}-vertical`,paginationDisabledClass:`${y}-disabled`}}),e.pagination={el:null,bullets:[]};let C,u=0;const i=g=>(Array.isArray(g)||(g=[g].filter(v=>!!v)),g);function c(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function l(g,v){const{bulletActiveClass:_}=e.params.pagination;g&&(g=g[`${v==="prev"?"previous":"next"}ElementSibling`],g&&(g.classList.add(`${_}-${v}`),g=g[`${v==="prev"?"previous":"next"}ElementSibling`],g&&g.classList.add(`${_}-${v}-${v}`)))}function r(g){const v=g.target.closest(Wt(e.params.pagination.bulletClass));if(!v)return;g.preventDefault();const _=wi(v)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===_)return;const b=e.getSlideIndexByData(_),w=e.getSlideIndexByData(e.realIndex);b>e.slides.length-e.loopedSlides&&e.loopFix({direction:b>w?"next":"prev",activeSlideIndex:b,slideTo:!1}),e.slideToLoop(_)}else e.slideTo(_)}function s(){const g=e.rtl,v=e.params.pagination;if(c())return;let _=e.pagination.el;_=i(_);let b,w;const x=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,A=e.params.loop?Math.ceil(x/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(w=e.previousRealIndex||0,b=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(b=e.snapIndex,w=e.previousSnapIndex):(w=e.previousIndex||0,b=e.activeIndex||0),v.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const M=e.pagination.bullets;let X,z,$;if(v.dynamicBullets&&(C=mn(M[0],e.isHorizontal()?"width":"height",!0),_.forEach(q=>{q.style[e.isHorizontal()?"width":"height"]=`${C*(v.dynamicMainBullets+4)}px`}),v.dynamicMainBullets>1&&w!==void 0&&(u+=b-(w||0),u>v.dynamicMainBullets-1?u=v.dynamicMainBullets-1:u<0&&(u=0)),X=Math.max(b-u,0),z=X+(Math.min(M.length,v.dynamicMainBullets)-1),$=(z+X)/2),M.forEach(q=>{const K=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(te=>`${v.bulletActiveClass}${te}`)].map(te=>typeof te=="string"&&te.includes(" ")?te.split(" "):te).flat();q.classList.remove(...K)}),_.length>1)M.forEach(q=>{const K=wi(q);K===b?q.classList.add(...v.bulletActiveClass.split(" ")):e.isElement&&q.setAttribute("part","bullet"),v.dynamicBullets&&(K>=X&&K<=z&&q.classList.add(...`${v.bulletActiveClass}-main`.split(" ")),K===X&&l(q,"prev"),K===z&&l(q,"next"))});else{const q=M[b];if(q&&q.classList.add(...v.bulletActiveClass.split(" ")),e.isElement&&M.forEach((K,te)=>{K.setAttribute("part",te===b?"bullet-active":"bullet")}),v.dynamicBullets){const K=M[X],te=M[z];for(let re=X;re<=z;re+=1)M[re]&&M[re].classList.add(...`${v.bulletActiveClass}-main`.split(" "));l(K,"prev"),l(te,"next")}}if(v.dynamicBullets){const q=Math.min(M.length,v.dynamicMainBullets+4),K=(C*q-C)/2-$*C,te=g?"right":"left";M.forEach(re=>{re.style[e.isHorizontal()?te:"top"]=`${K}px`})}}_.forEach((M,X)=>{if(v.type==="fraction"&&(M.querySelectorAll(Wt(v.currentClass)).forEach(z=>{z.textContent=v.formatFractionCurrent(b+1)}),M.querySelectorAll(Wt(v.totalClass)).forEach(z=>{z.textContent=v.formatFractionTotal(A)})),v.type==="progressbar"){let z;v.progressbarOpposite?z=e.isHorizontal()?"vertical":"horizontal":z=e.isHorizontal()?"horizontal":"vertical";const $=(b+1)/A;let q=1,K=1;z==="horizontal"?q=$:K=$,M.querySelectorAll(Wt(v.progressbarFillClass)).forEach(te=>{te.style.transform=`translate3d(0,0,0) scaleX(${q}) scaleY(${K})`,te.style.transitionDuration=`${e.params.speed}ms`})}v.type==="custom"&&v.renderCustom?(M.innerHTML=v.renderCustom(e,b+1,A),X===0&&m("paginationRender",M)):(X===0&&m("paginationRender",M),m("paginationUpdate",M)),e.params.watchOverflow&&e.enabled&&M.classList[e.isLocked?"add":"remove"](v.lockClass)})}function n(){const g=e.params.pagination;if(c())return;const v=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let _=e.pagination.el;_=i(_);let b="";if(g.type==="bullets"){let w=e.params.loop?Math.ceil(v/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&w>v&&(w=v);for(let x=0;x<w;x+=1)g.renderBullet?b+=g.renderBullet.call(e,x,g.bulletClass):b+=`<${g.bulletElement} ${e.isElement?'part="bullet"':""} class="${g.bulletClass}"></${g.bulletElement}>`}g.type==="fraction"&&(g.renderFraction?b=g.renderFraction.call(e,g.currentClass,g.totalClass):b=`<span class="${g.currentClass}"></span> / <span class="${g.totalClass}"></span>`),g.type==="progressbar"&&(g.renderProgressbar?b=g.renderProgressbar.call(e,g.progressbarFillClass):b=`<span class="${g.progressbarFillClass}"></span>`),e.pagination.bullets=[],_.forEach(w=>{g.type!=="custom"&&(w.innerHTML=b||""),g.type==="bullets"&&e.pagination.bullets.push(...w.querySelectorAll(Wt(g.bulletClass)))}),g.type!=="custom"&&m("paginationRender",_[0])}function a(){e.params.pagination=Nu(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const g=e.params.pagination;if(!g.el)return;let v;typeof g.el=="string"&&e.isElement&&(v=e.el.querySelector(g.el)),!v&&typeof g.el=="string"&&(v=[...document.querySelectorAll(g.el)]),v||(v=g.el),!(!v||v.length===0)&&(e.params.uniqueNavElements&&typeof g.el=="string"&&Array.isArray(v)&&v.length>1&&(v=[...e.el.querySelectorAll(g.el)],v.length>1&&(v=v.filter(_=>Ps(_,".swiper")[0]===e.el)[0])),Array.isArray(v)&&v.length===1&&(v=v[0]),Object.assign(e.pagination,{el:v}),v=i(v),v.forEach(_=>{g.type==="bullets"&&g.clickable&&_.classList.add(g.clickableClass),_.classList.add(g.modifierClass+g.type),_.classList.add(e.isHorizontal()?g.horizontalClass:g.verticalClass),g.type==="bullets"&&g.dynamicBullets&&(_.classList.add(`${g.modifierClass}${g.type}-dynamic`),u=0,g.dynamicMainBullets<1&&(g.dynamicMainBullets=1)),g.type==="progressbar"&&g.progressbarOpposite&&_.classList.add(g.progressbarOppositeClass),g.clickable&&_.addEventListener("click",r),e.enabled||_.classList.add(g.lockClass)}))}function f(){const g=e.params.pagination;if(c())return;let v=e.pagination.el;v&&(v=i(v),v.forEach(_=>{_.classList.remove(g.hiddenClass),_.classList.remove(g.modifierClass+g.type),_.classList.remove(e.isHorizontal()?g.horizontalClass:g.verticalClass),g.clickable&&_.removeEventListener("click",r)})),e.pagination.bullets&&e.pagination.bullets.forEach(_=>_.classList.remove(...g.bulletActiveClass.split(" ")))}p("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const g=e.params.pagination;let{el:v}=e.pagination;v=i(v),v.forEach(_=>{_.classList.remove(g.horizontalClass,g.verticalClass),_.classList.add(e.isHorizontal()?g.horizontalClass:g.verticalClass)})}),p("init",()=>{e.params.pagination.enabled===!1?d():(a(),n(),s())}),p("activeIndexChange",()=>{typeof e.snapIndex>"u"&&s()}),p("snapIndexChange",()=>{s()}),p("snapGridLengthChange",()=>{n(),s()}),p("destroy",()=>{f()}),p("enable disable",()=>{let{el:g}=e.pagination;g&&(g=i(g),g.forEach(v=>v.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),p("lock unlock",()=>{s()}),p("click",(g,v)=>{const _=v.target,b=i(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&b&&b.length>0&&!_.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&_===e.navigation.nextEl||e.navigation.prevEl&&_===e.navigation.prevEl))return;const w=b[0].classList.contains(e.params.pagination.hiddenClass);m(w===!0?"paginationShow":"paginationHide"),b.forEach(x=>x.classList.toggle(e.params.pagination.hiddenClass))}});const o=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:g}=e.pagination;g&&(g=i(g),g.forEach(v=>v.classList.remove(e.params.pagination.paginationDisabledClass))),a(),n(),s()},d=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:g}=e.pagination;g&&(g=i(g),g.forEach(v=>v.classList.add(e.params.pagination.paginationDisabledClass))),f()};Object.assign(e.pagination,{enable:o,disable:d,render:n,update:s,init:a,destroy:f})}function Gu(t){const{effect:e,swiper:h,on:p,setTranslate:m,setTransition:y,overwriteParams:C,perspective:u,recreateShadows:i,getEffectParams:c}=t;p("beforeInit",()=>{if(h.params.effect!==e)return;h.classNames.push(`${h.params.containerModifierClass}${e}`),u&&u()&&h.classNames.push(`${h.params.containerModifierClass}3d`);const r=C?C():{};Object.assign(h.params,r),Object.assign(h.originalParams,r)}),p("setTranslate",()=>{h.params.effect===e&&m()}),p("setTransition",(r,s)=>{h.params.effect===e&&y(s)}),p("transitionEnd",()=>{if(h.params.effect===e&&i){if(!c||!c().slideShadows)return;h.slides.forEach(r=>{r.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(s=>s.remove())}),i()}});let l;p("virtualUpdate",()=>{h.params.effect===e&&(h.slides.length||(l=!0),requestAnimationFrame(()=>{l&&h.slides&&h.slides.length&&(m(),l=!1)}))})}function Vu(t,e){const h=Wn(e);return h!==e&&(h.style.backfaceVisibility="hidden",h.style["-webkit-backface-visibility"]="hidden"),h}function Pr(t,e,h){const p=`swiper-slide-shadow${h?`-${h}`:""}${t?` swiper-slide-shadow-${t}`:""}`,m=Wn(e);let y=m.querySelector(`.${p.split(" ").join(".")}`);return y||(y=Xn("div",p.split(" ")),m.append(y)),y}function Uu(t){let{swiper:e,extendParams:h,on:p}=t;h({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),Gu({effect:"coverflow",swiper:e,on:p,setTranslate:()=>{const{width:C,height:u,slides:i,slidesSizesGrid:c}=e,l=e.params.coverflowEffect,r=e.isHorizontal(),s=e.translate,n=r?-s+C/2:-s+u/2,a=r?l.rotate:-l.rotate,f=l.depth;for(let o=0,d=i.length;o<d;o+=1){const g=i[o],v=c[o],_=g.swiperSlideOffset,b=(n-_-v/2)/v,w=typeof l.modifier=="function"?l.modifier(b):b*l.modifier;let x=r?a*w:0,A=r?0:a*w,M=-f*Math.abs(w),X=l.stretch;typeof X=="string"&&X.indexOf("%")!==-1&&(X=parseFloat(l.stretch)/100*v);let z=r?0:X*w,$=r?X*w:0,q=1-(1-l.scale)*Math.abs(w);Math.abs($)<.001&&($=0),Math.abs(z)<.001&&(z=0),Math.abs(M)<.001&&(M=0),Math.abs(x)<.001&&(x=0),Math.abs(A)<.001&&(A=0),Math.abs(q)<.001&&(q=0);const K=`translate3d(${$}px,${z}px,${M}px)  rotateX(${A}deg) rotateY(${x}deg) scale(${q})`,te=Vu(l,g);if(te.style.transform=K,g.style.zIndex=-Math.abs(Math.round(w))+1,l.slideShadows){let re=r?g.querySelector(".swiper-slide-shadow-left"):g.querySelector(".swiper-slide-shadow-top"),oe=r?g.querySelector(".swiper-slide-shadow-right"):g.querySelector(".swiper-slide-shadow-bottom");re||(re=Pr("coverflow",g,r?"left":"top")),oe||(oe=Pr("coverflow",g,r?"right":"bottom")),re&&(re.style.opacity=w>0?w:0),oe&&(oe.style.opacity=-w>0?-w:0)}}},setTransition:C=>{e.slides.map(i=>Wn(i)).forEach(i=>{i.style.transitionDuration=`${C}ms`,i.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(c=>{c.style.transitionDuration=`${C}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}const $u="/colorful/assets/1-71c64d4d.png",qu="/colorful/assets/2-f8e5ae08.png",Ku="/colorful/assets/3-574ec781.png",Ju="/colorful/assets/box1-8bb6a34d.jpg",Qu="/colorful/assets/box2-f78a8661.jpg",Zu="/colorful/assets/box3-c79d4d43.jpg",ef="/colorful/assets/box4-511b9809.jpg",Mr=[{title:"2023年款 母親節",image_url:Ju,seats:{"1x3":1,"1x1":1},description:"以相並一大一小點心的方式呈現您與母親的心心相繫，將最好的心意獻給最棒的媽媽。（空間：1個標準長方形、1個標準方形）"},{title:"2023年款 歡慶生日",image_url:Qu,seats:{"1x1":16},description:"（空間：16個小方形）"},{title:"2023年款 中秋團圓",image_url:Zu,seats:{"2x2":6},description:"（空間：6個標準方形）"},{title:"2023年款 彌月蛋糕",image_url:ef,seats:{"2x2":2,"1x3":1},description:"（空間：1個標準長方形、2個標準方形）"}];const tf=wt({name:"CustomGiftBox",components:{Swiper:Wu,SwiperSlide:Xu},setup(){const t=Ie({}),e=l=>{l.slideNext()},h=l=>{t.value=Mr[l.activeIndex]},p=function(l,r){return Array.from({length:r}).map((s,n)=>{const a=n+1;return{title:`${l} ${a}`,price:a*5,inventory:20}})},m=Ie({rollcake:{items:p("Roll Cake",12)},puff:{items:p("Puff",12)},cookie:{items:p("Cookie",12)}}),y=Ie([{id:1,key:"rollcake",icon:{url:$u}},{id:2,key:"puff",icon:{url:qu}},{id:3,key:"cookie",icon:{url:Ku}}]),C=be("rollcake");function u(l){C.value=l}const i=Bi(()=>m[C.value].items);function c(){const l=document.getElementById("ggg");l.offsetHeight===90?l.style.height="35px":l.style.height="90px"}return{onSwiper:e,onSlideChange:h,modules:[Uu,Yu],categories:y,activeProductCategory:C,activeProducts:i,onChangeActiveProductCategory:u,boxs:Mr,activeBox:t,toggleDescAreaSize:c}}}),nf={id:"CustomGiftBox"},rf={class:"ppp"},sf=["src"],of={style:{"text-align":"center","font-size":"1.2rem","font-weight":"bold"}},af={style:{"font-size":"12px"}},lf={id:"ProductCategorySection",style:{"background-color":"#f3f3f3"}},cf={class:"category-icon-bar"},uf=["onClick"],ff=["src"],hf={id:"ProductListSection"},df={class:"product-list-section-inner"},pf=le("div",{class:"product-list-section-inner__item__avatar"},[le("img",{src:"https://placehold.co/160x160/png"})],-1),gf={class:"product-list-section-inner__item__body"},mf=le("div",{class:"product-list-section-inner__item__footer"},[le("span",{class:"product-list-section-inner__item__footer__button"}," - "),le("span",{class:"product-list-section-inner__item__footer__number"}," 0 "),le("span",{class:"product-list-section-inner__item__footer__button"}," + ")],-1);function vf(t,e,h,p,m,y){const C=Oe("swiper-slide"),u=Oe("swiper");return ge(),me("div",nf,[_e(u,{effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},pagination:!1,modules:t.modules,class:"mySwiper",onSwiper:t.onSwiper,onSlideChange:t.onSlideChange},{default:on(()=>[(ge(!0),me(De,null,kt(t.boxs,i=>(ge(),bs(C,{key:i.title},{default:on(()=>[le("div",rf,[le("img",{src:i.image_url},null,8,sf)])]),_:2},1024))),128)),t.activeBox.value?(ge(),me("div",{key:0,id:"ggg",class:"ggg",onClick:e[0]||(e[0]=(...i)=>t.toggleDescAreaSize&&t.toggleDescAreaSize(...i))},[le("div",of,Ri(t.activeBox.value.title),1),le("div",af,Ri(t.activeBox.value.description),1)])):rt("",!0)]),_:1},8,["modules","onSwiper","onSlideChange"]),le("div",lf,[le("div",cf,[(ge(!0),me(De,null,kt(t.categories,i=>(ge(),me("div",{key:i.id,class:"icon-wrapper",onClick:c=>t.onChangeActiveProductCategory(i.key)},[le("img",{src:i.icon.url},null,8,ff)],8,uf))),128))])]),le("div",hf,[le("div",df,[(ge(!0),me(De,null,kt(t.activeProducts,i=>(ge(),me("div",{class:"product-list-section-inner__item",key:i.title},[pf,le("div",gf,Ri(i.title),1),mf]))),128))])])])}const yf=St(tf,[["render",vf]]);const _f=wt({name:"CustomApp",components:{CardEditor:mc,CustomGiftBox:yf},setup(){const t="make-gift-box",e="make-card",h=Ie({}),p=be(t);Ie({});function m(){p.value===t?p.value=e:p.value=t}function y(C){console.log(C)}return{...h,activeStep:p,step1:t,step2:e,toNextStep:m,onGiftBoxUpdate:y}}}),Cf={id:"CustomApp"};function bf(t,e,h,p,m,y){const C=Oe("CardEditor");return ge(),me("div",Cf,[_e(C)])}const wf=St(_f,[["render",bf],["__scopeId","data-v-db0baf6a"]]);nl(wf).mount("#app");
